(()=>{var xs=Object.create;var Yn=Object.defineProperty;var As=Object.getOwnPropertyDescriptor;var Cs=Object.getOwnPropertyNames;var $s=Object.getPrototypeOf,Ts=Object.prototype.hasOwnProperty;var Ae=(t,e)=>()=>(t&&(e=t(t=0)),e);var sr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Rs=(t,e)=>{for(var n in e)Yn(t,n,{get:e[n],enumerable:!0})},Is=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Cs(e))!Ts.call(t,s)&&s!==n&&Yn(t,s,{get:()=>e[s],enumerable:!(r=As(e,s))||r.enumerable});return t};var or=(t,e,n)=>(n=t!=null?xs($s(t)):{},Is(e||!t||!t.__esModule?Yn(n,"default",{value:t,enumerable:!0}):n,t));var lr=sr(ar=>{(function(){var t,e,n,r,s=function(l,a){return function(){return l.apply(a,arguments)}},o=function(l,a){for(var c in a)u.call(a,c)&&(l[c]=a[c]);function d(){this.constructor=l}return d.prototype=a.prototype,l.prototype=new d,l.__super__=a.prototype,l},u={}.hasOwnProperty;r=function(){function l(){this.options_index=0,this.parsed=[]}return l.prototype.add_node=function(a){return a.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(a):this.add_option(a)},l.prototype.add_group=function(a){var c,d,f,m,g,b;for(c=this.parsed.length,this.parsed.push({array_index:c,group:!0,label:a.label,title:a.title?a.title:void 0,children:0,disabled:a.disabled,classes:a.className}),g=a.childNodes,b=[],d=0,f=g.length;d<f;d++)m=g[d],b.push(this.add_option(m,c,a.disabled));return b},l.prototype.add_option=function(a,c,d){if(a.nodeName.toUpperCase()==="OPTION")return a.text!==""?(c!=null&&(this.parsed[c].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,title:a.title?a.title:void 0,selected:a.selected,disabled:d===!0?d:a.disabled,group_array_index:c,group_label:c!=null?this.parsed[c].label:null,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},l}(),r.select_to_array=function(l){var a,c,d,f,m;for(f=new r,m=l.childNodes,c=0,d=m.length;c<d;c++)a=m[c],f.add_node(a);return f.parsed},e=function(){function l(a,c){this.form_field=a,this.options=c??{},this.label_click_handler=s(this.label_click_handler,this),l.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return l.prototype.set_default_values=function(){return this.click_test_action=function(a){return function(c){return a.test_active_click(c)}}(this),this.activate_action=function(a){return function(c){return a.activate_field(c)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=this.options.hide_results_on_select!=null?this.options.hide_results_on_select:!0},l.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||l.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||l.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||l.default_no_result_text},l.prototype.choice_label=function(a){return this.include_group_label_in_selected&&a.group_label!=null?"<b class='group-name'>"+this.escape_html(a.group_label)+"</b>"+a.html:a.html},l.prototype.mouse_enter=function(){return this.mouse_on_container=!0},l.prototype.mouse_leave=function(){return this.mouse_on_container=!1},l.prototype.input_focus=function(a){if(this.is_multiple){if(!this.active_field)return setTimeout(function(c){return function(){return c.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()},l.prototype.input_blur=function(a){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(c){return function(){return c.blur_test()}}(this),100)},l.prototype.label_click_handler=function(a){return this.is_multiple?this.container_mousedown(a):this.activate_field()},l.prototype.results_option_build=function(a){var c,d,f,m,g,b,y;for(c="",y=0,b=this.results_data,m=0,g=b.length;m<g&&(d=b[m],f="",d.group?f=this.result_add_group(d):f=this.result_add_option(d),f!==""&&(y++,c+=f),a?.first&&(d.selected&&this.is_multiple?this.choice_build(d):d.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(d))),!(y>=this.max_shown_results));m++);return c},l.prototype.result_add_option=function(a){var c,d;return!a.search_match||!this.include_option_in_results(a)?"":(c=[],!a.disabled&&!(a.selected&&this.is_multiple)&&c.push("active-result"),a.disabled&&!(a.selected&&this.is_multiple)&&c.push("disabled-result"),a.selected&&c.push("result-selected"),a.group_array_index!=null&&c.push("group-option"),a.classes!==""&&c.push(a.classes),d=document.createElement("li"),d.className=c.join(" "),a.style&&(d.style.cssText=a.style),d.setAttribute("data-option-array-index",a.array_index),d.innerHTML=a.highlighted_html||a.html,a.title&&(d.title=a.title),this.outerHTML(d))},l.prototype.result_add_group=function(a){var c,d;return!(a.search_match||a.group_match)||!(a.active_options>0)?"":(c=[],c.push("group-result"),a.classes&&c.push(a.classes),d=document.createElement("li"),d.className=c.join(" "),d.innerHTML=a.highlighted_html||this.escape_html(a.label),a.title&&(d.title=a.title),this.outerHTML(d))},l.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},l.prototype.reset_single_select_options=function(){var a,c,d,f,m;for(d=this.results_data,m=[],a=0,c=d.length;a<c;a++)f=d[a],f.selected?m.push(f.selected=!1):m.push(void 0);return m},l.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},l.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},l.prototype.winnow_results=function(a){var c,d,f,m,g,b,y,L,j,P,C,p,T,w,M;for(this.no_results_clear(),P=0,y=this.get_search_text(),c=y.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),j=this.get_search_regex(c),L=this.results_data,f=0,m=L.length;f<m;f++)g=L[f],g.search_match=!1,C=null,p=null,g.highlighted_html="",this.include_option_in_results(g)&&(g.group&&(g.group_match=!1,g.active_options=0),g.group_array_index!=null&&this.results_data[g.group_array_index]&&(C=this.results_data[g.group_array_index],C.active_options===0&&C.search_match&&(P+=1),C.active_options+=1),M=g.group?g.label:g.text,g.group&&!this.group_search||(p=this.search_string_match(M,j),g.search_match=p!=null,g.search_match&&!g.group&&(P+=1),g.search_match?(y.length&&(T=p.index,b=M.slice(0,T),d=M.slice(T,T+y.length),w=M.slice(T+y.length),g.highlighted_html=this.escape_html(b)+"<em>"+this.escape_html(d)+"</em>"+this.escape_html(w)),C!=null&&(C.group_match=!0)):g.group_array_index!=null&&this.results_data[g.group_array_index].search_match&&(g.search_match=!0)));if(this.result_clear_highlight(),P<1&&y.length)return this.update_results_content(""),this.no_results(y);if(this.update_results_content(this.results_option_build()),!a?.skip_highlight)return this.winnow_results_set_highlight()},l.prototype.get_search_regex=function(a){var c,d;return d=this.search_contains?a:"(^|\\s|\\b)"+a+"[^\\s]*",this.enable_split_word_search||this.search_contains||(d="^"+d),c=this.case_sensitive_search?"":"i",new RegExp(d,c)},l.prototype.search_string_match=function(a,c){var d;return d=c.exec(a),!this.search_contains&&d?.[1]&&(d.index+=1),d},l.prototype.choices_count=function(){var a,c,d,f;if(this.selected_option_count!=null)return this.selected_option_count;for(this.selected_option_count=0,f=this.form_field.options,a=0,c=f.length;a<c;a++)d=f[a],d.selected&&(this.selected_option_count+=1);return this.selected_option_count},l.prototype.choices_click=function(a){if(a.preventDefault(),this.activate_field(),!(this.results_showing||this.is_disabled))return this.results_show()},l.prototype.keydown_checker=function(a){var c,d;switch(d=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),d!==8&&this.pending_backstroke&&this.clear_backstroke(),d){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 27:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow();break}},l.prototype.keyup_checker=function(a){var c,d;switch(d=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),d){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:a.preventDefault(),this.results_showing&&this.result_select(a);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search();break}},l.prototype.clipboard_event_checker=function(a){if(!this.is_disabled)return setTimeout(function(c){return function(){return c.results_search()}}(this),50)},l.prototype.container_width=function(){return this.options.width!=null?this.options.width:this.form_field.offsetWidth+"px"},l.prototype.include_option_in_results=function(a){return!(this.is_multiple&&!this.display_selected_options&&a.selected||!this.display_disabled_options&&a.disabled||a.empty)},l.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},l.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},l.prototype.search_results_touchend=function(a){if(this.touch_started)return this.search_results_mouseup(a)},l.prototype.outerHTML=function(a){var c;return a.outerHTML?a.outerHTML:(c=document.createElement("div"),c.appendChild(a),c.innerHTML)},l.prototype.get_single_html=function(){return`<a class="chosen-single chosen-default">
  <span>`+this.default_text+`</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" />
  </div>
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_multi_html=function(){return`<ul class="chosen-choices">
  <li class="search-field">
    <input class="chosen-search-input" type="text" autocomplete="off" value="`+this.default_text+`" />
  </li>
</ul>
<div class="chosen-drop">
  <ul class="chosen-results"></ul>
</div>`},l.prototype.get_no_results_html=function(a){return`<li class="no-results">
  `+this.results_none_found+" <span>"+this.escape_html(a)+`</span>
</li>`},l.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},l.default_multiple_text="Select Some Options",l.default_single_text="Select an Option",l.default_no_result_text="No results match",l}(),t=jQuery,t.fn.extend({chosen:function(l){return e.browser_is_supported()?this.each(function(a){var c,d;if(c=t(this),d=c.data("chosen"),l==="destroy"){d instanceof n&&d.destroy();return}d instanceof n||c.data("chosen",new n(this,l))}):this}}),n=function(l){o(a,l);function a(){return a.__super__.constructor.apply(this,arguments)}return a.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex},a.prototype.set_up_html=function(){var c,d;return c=["chosen-container"],c.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&c.push(this.form_field.className),this.is_rtl&&c.push("chosen-rtl"),d={class:c.join(" "),title:this.form_field.title},this.form_field.id.length&&(d.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",d),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},a.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},a.prototype.register_observers=function(){return this.container.on("touchstart.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.container.on("touchend.chosen",function(c){return function(d){c.container_mouseup(d)}}(this)),this.container.on("mousedown.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.container.on("mouseup.chosen",function(c){return function(d){c.container_mouseup(d)}}(this)),this.container.on("mouseenter.chosen",function(c){return function(d){c.mouse_enter(d)}}(this)),this.container.on("mouseleave.chosen",function(c){return function(d){c.mouse_leave(d)}}(this)),this.search_results.on("mouseup.chosen",function(c){return function(d){c.search_results_mouseup(d)}}(this)),this.search_results.on("mouseover.chosen",function(c){return function(d){c.search_results_mouseover(d)}}(this)),this.search_results.on("mouseout.chosen",function(c){return function(d){c.search_results_mouseout(d)}}(this)),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(c){return function(d){c.search_results_mousewheel(d)}}(this)),this.search_results.on("touchstart.chosen",function(c){return function(d){c.search_results_touchstart(d)}}(this)),this.search_results.on("touchmove.chosen",function(c){return function(d){c.search_results_touchmove(d)}}(this)),this.search_results.on("touchend.chosen",function(c){return function(d){c.search_results_touchend(d)}}(this)),this.form_field_jq.on("chosen:updated.chosen",function(c){return function(d){c.results_update_field(d)}}(this)),this.form_field_jq.on("chosen:activate.chosen",function(c){return function(d){c.activate_field(d)}}(this)),this.form_field_jq.on("chosen:open.chosen",function(c){return function(d){c.container_mousedown(d)}}(this)),this.form_field_jq.on("chosen:close.chosen",function(c){return function(d){c.close_field(d)}}(this)),this.search_field.on("blur.chosen",function(c){return function(d){c.input_blur(d)}}(this)),this.search_field.on("keyup.chosen",function(c){return function(d){c.keyup_checker(d)}}(this)),this.search_field.on("keydown.chosen",function(c){return function(d){c.keydown_checker(d)}}(this)),this.search_field.on("focus.chosen",function(c){return function(d){c.input_focus(d)}}(this)),this.search_field.on("cut.chosen",function(c){return function(d){c.clipboard_event_checker(d)}}(this)),this.search_field.on("paste.chosen",function(c){return function(d){c.clipboard_event_checker(d)}}(this)),this.is_multiple?this.search_choices.on("click.chosen",function(c){return function(d){c.choices_click(d)}}(this)):this.container.on("click.chosen",function(c){c.preventDefault()})},a.prototype.destroy=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},a.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled)return this.close_field();if(!this.is_multiple)return this.selected_item.on("focus.chosen",this.activate_field)},a.prototype.container_mousedown=function(c){var d;if(!this.is_disabled&&(c&&((d=c.type)==="mousedown"||d==="touchstart")&&!this.results_showing&&c.preventDefault(),!(c!=null&&t(c.target).hasClass("search-choice-close"))))return this.active_field?!this.is_multiple&&c&&(t(c.target)[0]===this.selected_item[0]||t(c.target).parents("a.chosen-single").length)&&(c.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},a.prototype.container_mouseup=function(c){if(c.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(c)},a.prototype.search_results_mousewheel=function(c){var d;if(c.originalEvent&&(d=c.originalEvent.deltaY||-c.originalEvent.wheelDelta||c.originalEvent.detail),d!=null)return c.preventDefault(),c.type==="DOMMouseScroll"&&(d=d*40),this.search_results.scrollTop(d+this.search_results.scrollTop())},a.prototype.blur_test=function(c){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},a.prototype.close_field=function(){return t(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.blur()},a.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},a.prototype.test_active_click=function(c){var d;return d=t(c.target).closest(".chosen-container"),d.length&&this.container[0]===d[0]?this.active_field=!0:this.close_field()},a.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},a.prototype.result_do_highlight=function(c){var d,f,m,g,b;if(c.length){if(this.result_clear_highlight(),this.result_highlight=c,this.result_highlight.addClass("highlighted"),m=parseInt(this.search_results.css("maxHeight"),10),b=this.search_results.scrollTop(),g=m+b,f=this.result_highlight.position().top+this.search_results.scrollTop(),d=f+this.result_highlight.outerHeight(),d>=g)return this.search_results.scrollTop(d-m>0?d-m:0);if(f<b)return this.search_results.scrollTop(f)}},a.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},a.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},a.prototype.update_results_content=function(c){return this.search_results.html(c)},a.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},a.prototype.set_tab_index=function(c){var d;if(this.form_field.tabIndex)return d=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=d},a.prototype.set_label_behavior=function(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)},a.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},a.prototype.search_results_mouseup=function(c){var d;if(d=t(c.target).hasClass("active-result")?t(c.target):t(c.target).parents(".active-result").first(),d.length)return this.result_highlight=d,this.result_select(c),this.search_field.focus()},a.prototype.search_results_mouseover=function(c){var d;if(d=t(c.target).hasClass("active-result")?t(c.target):t(c.target).parents(".active-result").first(),d)return this.result_do_highlight(d)},a.prototype.search_results_mouseout=function(c){if(t(c.target).hasClass("active-result")||t(c.target).parents(".active-result").first())return this.result_clear_highlight()},a.prototype.choice_build=function(c){var d,f;return d=t("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(c)+"</span>"),c.disabled?d.addClass("search-choice-disabled"):(f=t("<a />",{class:"search-choice-close","data-option-array-index":c.array_index}),f.on("click.chosen",function(m){return function(g){return m.choice_destroy_link_click(g)}}(this)),d.append(f)),this.search_container.before(d)},a.prototype.choice_destroy_link_click=function(c){if(c.preventDefault(),c.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(c.target))},a.prototype.choice_destroy=function(c){if(this.result_deselect(c[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),c.parents("li").first().remove(),this.search_field_scale()},a.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()},a.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},a.prototype.result_select=function(c){var d,f;if(this.result_highlight)return d=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?d.removeClass("active-result"):this.reset_single_select_options(),d.addClass("result-selected"),f=this.results_data[d[0].getAttribute("data-option-array-index")],f.selected=!0,this.form_field.options[f.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(f):this.single_set_selected_text(this.choice_label(f)),this.is_multiple&&(!this.hide_results_on_select||c.metaKey||c.ctrlKey)?c.metaKey||c.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[f.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,c.preventDefault(),this.search_field_scale())},a.prototype.single_set_selected_text=function(c){return c==null&&(c=this.default_text),c===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(c)},a.prototype.result_deselect=function(c){var d;return d=this.results_data[c],this.form_field.options[d.options_index].disabled?!1:(d.selected=!1,this.form_field.options[d.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[d.options_index].value}),this.search_field_scale(),!0)},a.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},a.prototype.get_search_field_value=function(){return this.search_field.val()},a.prototype.get_search_text=function(){return t.trim(this.get_search_field_value())},a.prototype.escape_html=function(c){return t("<div/>").text(c).html()},a.prototype.winnow_results_set_highlight=function(){var c,d;if(d=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),c=d.length?d.first():this.search_results.find(".active-result").first(),c!=null)return this.result_do_highlight(c)},a.prototype.no_results=function(c){var d;return d=this.get_no_results_html(c),this.search_results.append(d),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},a.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},a.prototype.keydown_arrow=function(){var c;if(this.results_showing&&this.result_highlight){if(c=this.result_highlight.nextAll("li.active-result").first(),c)return this.result_do_highlight(c)}else return this.results_show()},a.prototype.keyup_arrow=function(){var c;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return c=this.result_highlight.prevAll("li.active-result"),c.length?this.result_do_highlight(c.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},a.prototype.keydown_backstroke=function(){var c;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();if(c=this.search_container.siblings("li.search-choice").last(),c.length&&!c.hasClass("search-choice-disabled"))return this.pending_backstroke=c,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},a.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},a.prototype.search_field_scale=function(){var c,d,f,m,g,b,y;if(this.is_multiple){for(g={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},b=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"],d=0,f=b.length;d<f;d++)m=b[d],g[m]=this.search_field.css(m);return c=t("<div />").css(g),c.text(this.get_search_field_value()),t("body").append(c),y=c.width()+25,c.remove(),this.container.is(":visible")&&(y=Math.min(this.container.outerWidth()-10,y)),this.search_field.width(y)}},a.prototype.trigger_form_field_change=function(c){return this.form_field_jq.trigger("input",c),this.form_field_jq.trigger("change",c)},a}(e)}).call(ar)});var We,Tn=Ae(()=>{We={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var H,pt=Ae(()=>{Tn();H={log(...t){this.enabled&&(t.push(Date.now()),We.logger.log("[ActionCable]",...t))}}});var Dt,Rn,Ft,In,ki=Ae(()=>{pt();Dt=()=>new Date().getTime(),Rn=t=>(Dt()-t)/1e3,Ft=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Dt(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),H.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Dt(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),H.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=Dt()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,H.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Dt(),H.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:n)*Math.random();return e*1e3*r*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(H.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Rn(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?H.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Rn(this.disconnectedAt)} s`):(H.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Rn(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Rn(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(H.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Ft.staleThreshold=6;Ft.reconnectionBackoffRate=.15;In=Ft});var Nt,xi=Ae(()=>{Nt={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Ht,Ai,Wo,qr,Wt,Pn,Ci=Ae(()=>{Tn();ki();xi();pt();({message_types:Ht,protocols:Ai}=Nt),Wo=Ai.slice(0,Ai.length-1),qr=[].indexOf,Wt=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new In(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return H.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...Ai,...this.consumer.subprotocols||[]];return H.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new We.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(H.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){H.log("Failed to reopen WebSocket",e)}finally{H.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return qr.call(Wo,this.getProtocol())>=0}isState(...e){return qr.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in We.WebSocket)if(We.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let n=this.events[e].bind(this);this.webSocket[`on${e}`]=n}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};Wt.reopenDelay=500;Wt.prototype.events={message(t){if(!this.isProtocolSupported())return;let{identifier:e,message:n,reason:r,reconnect:s,type:o}=JSON.parse(t.data);switch(o){case Ht.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Ht.disconnect:return H.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:s});case Ht.ping:return this.monitor.recordPing();case Ht.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Ht.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(H.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return H.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(H.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){H.log("WebSocket onerror event")}};Pn=Wt});var Vo,Xe,$i=Ae(()=>{Vo=function(t,e){if(e!=null)for(let n in e){let r=e[n];t[n]=r}return t},Xe=class{constructor(e,n={},r){this.consumer=e,this.identifier=JSON.stringify(n),Vo(this,r)}perform(e,n={}){return n.action=e,this.send(n)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Ti,jn,Ri=Ae(()=>{pt();Ti=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(H.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):H.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){H.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{H.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},jn=Ti});var Ge,Ii=Ae(()=>{$i();Ri();pt();Ge=class{constructor(e){this.consumer=e,this.guarantor=new jn(this),this.subscriptions=[]}create(e,n){let r=e,s=typeof r=="object"?r:{channel:r},o=new Xe(this.consumer,s,n);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(n=>n!==e),e}findAll(e){return this.subscriptions.filter(n=>n.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...n){return this.subscriptions.map(r=>this.notify(r,e,...n))}notify(e,n,...r){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(o=>typeof o[n]=="function"?o[n](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){H.log(`Subscription confirmed ${e}`),this.findAll(e).map(n=>this.guarantor.forget(n))}sendCommand(e,n){let{identifier:r}=e;return this.consumer.send({command:n,identifier:r})}}});function Pi(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){let e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}var mt,kr=Ae(()=>{Ci();Ii();mt=class{constructor(e){this._url=e,this.subscriptions=new Ge(this),this.connection=new Pn(this),this.subprotocols=[]}get url(){return Pi(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var Ar={};Rs(Ar,{Connection:()=>Pn,ConnectionMonitor:()=>In,Consumer:()=>mt,INTERNAL:()=>Nt,Subscription:()=>Xe,SubscriptionGuarantor:()=>jn,Subscriptions:()=>Ge,adapters:()=>We,createConsumer:()=>Uo,createWebSocketURL:()=>Pi,getConfig:()=>xr,logger:()=>H});function Uo(t=xr("url")||Nt.default_mount_path){return new mt(t)}function xr(t){let e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}var Cr=Ae(()=>{Ci();ki();kr();xi();$i();Ii();Ri();Tn();pt()});var Pr=sr((Ut,Mi)=>{(function(e,n){typeof Ut=="object"&&typeof Mi=="object"?Mi.exports=n():typeof define=="function"&&define.amd?define([],n):typeof Ut=="object"?Ut.ClipboardJS=n():e.ClipboardJS=n()})(Ut,function(){return function(){var t={686:function(r,s,o){"use strict";o.d(s,{default:function(){return ue}});var u=o(279),l=o.n(u),a=o(370),c=o.n(a),d=o(817),f=o.n(d);function m(q){try{return document.execCommand(q)}catch{return!1}}var g=function(_){var S=f()(_);return m("cut"),S},b=g;function y(q){var _=document.documentElement.getAttribute("dir")==="rtl",S=document.createElement("textarea");S.style.fontSize="12pt",S.style.border="0",S.style.padding="0",S.style.margin="0",S.style.position="absolute",S.style[_?"right":"left"]="-9999px";var k=window.pageYOffset||document.documentElement.scrollTop;return S.style.top="".concat(k,"px"),S.setAttribute("readonly",""),S.value=q,S}var L=function(_,S){var k=y(_);S.container.appendChild(k);var x=f()(k);return m("copy"),k.remove(),x},j=function(_){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},k="";return typeof _=="string"?k=L(_,S):_ instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(_?.type)?k=L(_.value,S):(k=f()(_),m("copy")),k},P=j;function C(q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(S){return typeof S}:C=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},C(q)}var p=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=_.action,k=S===void 0?"copy":S,x=_.container,I=_.target,Z=_.text;if(k!=="copy"&&k!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(I!==void 0)if(I&&C(I)==="object"&&I.nodeType===1){if(k==="copy"&&I.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(k==="cut"&&(I.hasAttribute("readonly")||I.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(Z)return P(Z,{container:x});if(I)return k==="cut"?b(I):P(I,{container:x})},T=p;function w(q){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w=function(S){return typeof S}:w=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},w(q)}function M(q,_){if(!(q instanceof _))throw new TypeError("Cannot call a class as a function")}function z(q,_){for(var S=0;S<_.length;S++){var k=_[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(q,k.key,k)}}function U(q,_,S){return _&&z(q.prototype,_),S&&z(q,S),q}function F(q,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(_&&_.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),_&&W(q,_)}function W(q,_){return W=Object.setPrototypeOf||function(k,x){return k.__proto__=x,k},W(q,_)}function V(q){var _=A();return function(){var k=D(q),x;if(_){var I=D(this).constructor;x=Reflect.construct(k,arguments,I)}else x=k.apply(this,arguments);return B(this,x)}}function B(q,_){return _&&(w(_)==="object"||typeof _=="function")?_:te(q)}function te(q){if(q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function D(q){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},D(q)}function J(q,_){var S="data-clipboard-".concat(q);if(_.hasAttribute(S))return _.getAttribute(S)}var Y=function(q){F(S,q);var _=V(S);function S(k,x){var I;return M(this,S),I=_.call(this),I.resolveOptions(x),I.listenClick(k),I}return U(S,[{key:"resolveOptions",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof x.action=="function"?x.action:this.defaultAction,this.target=typeof x.target=="function"?x.target:this.defaultTarget,this.text=typeof x.text=="function"?x.text:this.defaultText,this.container=w(x.container)==="object"?x.container:document.body}},{key:"listenClick",value:function(x){var I=this;this.listener=c()(x,"click",function(Z){return I.onClick(Z)})}},{key:"onClick",value:function(x){var I=x.delegateTarget||x.currentTarget,Z=this.action(I)||"copy",_e=T({action:Z,container:this.container,target:this.target(I),text:this.text(I)});this.emit(_e?"success":"error",{action:Z,text:_e,trigger:I,clearSelection:function(){I&&I.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(x){return J("action",x)}},{key:"defaultTarget",value:function(x){var I=J("target",x);if(I)return document.querySelector(I)}},{key:"defaultText",value:function(x){return J("text",x)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return P(x,I)}},{key:"cut",value:function(x){return b(x)}},{key:"isSupported",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],I=typeof x=="string"?[x]:x,Z=!!document.queryCommandSupported;return I.forEach(function(_e){Z=Z&&!!document.queryCommandSupported(_e)}),Z}}]),S}(l()),ue=Y},828:function(r){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}function u(l,a){for(;l&&l.nodeType!==s;){if(typeof l.matches=="function"&&l.matches(a))return l;l=l.parentNode}}r.exports=u},438:function(r,s,o){var u=o(828);function l(d,f,m,g,b){var y=c.apply(this,arguments);return d.addEventListener(m,y,b),{destroy:function(){d.removeEventListener(m,y,b)}}}function a(d,f,m,g,b){return typeof d.addEventListener=="function"?l.apply(null,arguments):typeof m=="function"?l.bind(null,document).apply(null,arguments):(typeof d=="string"&&(d=document.querySelectorAll(d)),Array.prototype.map.call(d,function(y){return l(y,f,m,g,b)}))}function c(d,f,m,g){return function(b){b.delegateTarget=u(b.target,f),b.delegateTarget&&g.call(d,b)}}r.exports=a},879:function(r,s){s.node=function(o){return o!==void 0&&o instanceof HTMLElement&&o.nodeType===1},s.nodeList=function(o){var u=Object.prototype.toString.call(o);return o!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in o&&(o.length===0||s.node(o[0]))},s.string=function(o){return typeof o=="string"||o instanceof String},s.fn=function(o){var u=Object.prototype.toString.call(o);return u==="[object Function]"}},370:function(r,s,o){var u=o(879),l=o(438);function a(m,g,b){if(!m&&!g&&!b)throw new Error("Missing required arguments");if(!u.string(g))throw new TypeError("Second argument must be a String");if(!u.fn(b))throw new TypeError("Third argument must be a Function");if(u.node(m))return c(m,g,b);if(u.nodeList(m))return d(m,g,b);if(u.string(m))return f(m,g,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function c(m,g,b){return m.addEventListener(g,b),{destroy:function(){m.removeEventListener(g,b)}}}function d(m,g,b){return Array.prototype.forEach.call(m,function(y){y.addEventListener(g,b)}),{destroy:function(){Array.prototype.forEach.call(m,function(y){y.removeEventListener(g,b)})}}}function f(m,g,b){return l(document.body,m,g,b)}r.exports=a},817:function(r){function s(o){var u;if(o.nodeName==="SELECT")o.focus(),u=o.value;else if(o.nodeName==="INPUT"||o.nodeName==="TEXTAREA"){var l=o.hasAttribute("readonly");l||o.setAttribute("readonly",""),o.select(),o.setSelectionRange(0,o.value.length),l||o.removeAttribute("readonly"),u=o.value}else{o.hasAttribute("contenteditable")&&o.focus();var a=window.getSelection(),c=document.createRange();c.selectNodeContents(o),a.removeAllRanges(),a.addRange(c),u=a.toString()}return u}r.exports=s},279:function(r){function s(){}s.prototype={on:function(o,u,l){var a=this.e||(this.e={});return(a[o]||(a[o]=[])).push({fn:u,ctx:l}),this},once:function(o,u,l){var a=this;function c(){a.off(o,c),u.apply(l,arguments)}return c._=u,this.on(o,c,l)},emit:function(o){var u=[].slice.call(arguments,1),l=((this.e||(this.e={}))[o]||[]).slice(),a=0,c=l.length;for(a;a<c;a++)l[a].fn.apply(l[a].ctx,u);return this},off:function(o,u){var l=this.e||(this.e={}),a=l[o],c=[];if(a&&u)for(var d=0,f=a.length;d<f;d++)a[d].fn!==u&&a[d].fn._!==u&&c.push(a[d]);return c.length?l[o]=c:delete l[o],this}},r.exports=s,r.exports.TinyEmitter=s}},e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}return function(){n.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(s,{a:s}),s}}(),function(){n.d=function(r,s){for(var o in s)n.o(s,o)&&!n.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:s[o]})}}(),function(){n.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)}}(),n(686)}().default})});window.ql={};function me(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(t)}function ye(t){return t.json()}function Ps(t){return t.text()}ql.getJson=function(t){return fetch(t,{credentials:"include"}).then(me).then(ye)};ql.getHtml=function(t){return fetch(t,{credentials:"include"}).then(me).then(Ps)};ql.Poller=function(t,e,n,r){this.continuePolling=!0,this.path=t,this.timeout=e,this.success=n,this.failure=r||this.defaultFailure,this.start=function s(){this.continuePolling&&ql.getJson(this.path).then(this.success).then(()=>setTimeout(s.bind(this),this.timeout)).catch(o=>{console.log(o),this.stop(),this.failure(o)})},this.once=function(){ql.getJson(this.path).then(this.success).catch(this.failure)},this.stop=function(){this.continuePolling=!1},this.defaultFailure=function(s){console.log("Request failed",s)}};ql.events={};ql.subscribe=function(t,e){ql.events[t]=ql.events[t]||[];function n(){ql.events[t]=ql.events[t].filter(r=>r!==e)}return n(),ql.events[t].push(e),{unsubscribe:n}};ql.publish=function(t,e){ql.events[t]&&ql.events[t].forEach(function(n){n.call(this,e)})};ql.debounce=function(t,e=20,n=!0){let r;return function(){let s=this,o=arguments,u=function(){r=null,n||t.apply(s,o)},l=n&&!r;clearTimeout(r),r=setTimeout(u,e),l&&t.apply(s,o)}};ql.showFlash=function(t,e){let n=$("#flash-sibling-before"),r=$('<div id="flash-alert" class="alert" role="alert"></div>');t==="notice"?r.addClass("alert-success"):r.addClass("alert-error");let s=$('<a class="alert__close" data-dismiss="alert" aria-labelledby="flash-alert"><ql-icon icon="close" /></a>'),o=$('<iframe class="l-ie-iframe-fix" tabindex="-1"></iframe>');r.text(e),r.append(s),r.append(o),$(".alert").remove(),r.insertAfter(n)};ql.moveFlash=function(t){$(()=>$("#flash-sibling-before").insertAfter(t))};$.widget("custom.userAutocomplete",$.ui.autocomplete,{_renderItem:function(t,e){return $("<li>").attr("data-value",e.value).append(ql.renderAutocompleteUser(e)).appendTo(t)}});ql.renderAutocompleteUser=function(t){return t.value==="newUser"?`<div class="add-new-user js-add-new-user">
      <i class="material-icons">add</i> Add New User
    </div>`:`<div class='autocomplete--user'>
      <img src='https://secure.gravatar.com/avatar/${t.label.gravatar_hash}.jpg?s=80&d=mm'/>
      <div>
        ${t.label.email}
        <span>${t.label.first_name} ${t.label.last_name}</span>
      </div>
    </div>`};ql.autocomplete=function(){function t(){$(".js-user-autocomplete").userAutocomplete({source:e}),$(document).on("nested:fieldAdded",n=>{n.field.find(".js-user-autocomplete").userAutocomplete({source:e})})}function e(n,r){let s=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+s).then(o=>{r(o.map(u=>({label:u,value:u.email})))})}return{init:t,source:e}}();ql.setCookie=function(t,e,n){let r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);let s="expires="+r.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"};ql.track=function(t,e={}){typeof gtag<"u"&&gtag("event",t,e)};var sf=or(lr());var mn={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0},G={log(...t){this.enabled&&(t.push(Date.now()),mn.logger.log("[ActionCable]",...t))}},At=()=>new Date().getTime(),pn=t=>(At()-t)/1e3,Ct=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=At(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),G.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=At(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),G.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=At()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,G.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=At(),G.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:n}=this.constructor,r=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:n)*Math.random();return e*1e3*r*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(G.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${pn(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?G.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${pn(this.disconnectedAt)} s`):(G.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return pn(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&pn(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(G.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Ct.staleThreshold=6;Ct.reconnectionBackoffRate=.15;var ur={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},{message_types:xt,protocols:Xn}=ur,js=Xn.slice(0,Xn.length-1),cr=[].indexOf,$t=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Ct(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return G.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...Xn,...this.consumer.subprotocols||[]];return G.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new mn.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(G.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){G.log("Failed to reopen WebSocket",e)}finally{G.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return cr.call(js,this.getProtocol())>=0}isState(...e){return cr.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in mn.WebSocket)if(mn.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let n=this.events[e].bind(this);this.webSocket[`on${e}`]=n}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};$t.reopenDelay=500;$t.prototype.events={message(t){if(!this.isProtocolSupported())return;let{identifier:e,message:n,reason:r,reconnect:s,type:o}=JSON.parse(t.data);switch(o){case xt.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case xt.disconnect:return G.log(`Disconnecting. Reason: ${r}`),this.close({allowReconnect:s});case xt.ping:return this.monitor.recordPing();case xt.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case xt.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",n)}},open(){if(G.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return G.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(G.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){G.log("WebSocket onerror event")}};var Ms=function(t,e){if(e!=null)for(let n in e){let r=e[n];t[n]=r}return t},Gn=class{constructor(e,n={},r){this.consumer=e,this.identifier=JSON.stringify(n),Ms(this,r)}perform(e,n={}){return n.action=e,this.send(n)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}},Kn=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(G.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):G.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){G.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{G.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},Qn=class{constructor(e){this.consumer=e,this.guarantor=new Kn(this),this.subscriptions=[]}create(e,n){let r=e,s=typeof r=="object"?r:{channel:r},o=new Gn(this.consumer,s,n);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(n=>n!==e),e}findAll(e){return this.subscriptions.filter(n=>n.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...n){return this.subscriptions.map(r=>this.notify(r,e,...n))}notify(e,n,...r){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(o=>typeof o[n]=="function"?o[n](...r):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){G.log(`Subscription confirmed ${e}`),this.findAll(e).map(n=>this.guarantor.forget(n))}sendCommand(e,n){let{identifier:r}=e;return this.consumer.send({command:n,identifier:r})}},Zn=class{constructor(e){this._url=e,this.subscriptions=new Qn(this),this.connection=new $t(this),this.subprotocols=[]}get url(){return Bs(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}};function Bs(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){let e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}function dr(t=Os("url")||ur.default_mount_path){return new Zn(t)}function Os(t){let e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}window.App=window.App||{};App.cable=dr();App.cable.subscriptions.create("PresenceChannel");(function(){if(window.Reflect===void 0||window.customElements===void 0||window.customElements.polyfillWrapFlushCallback)return;let t=HTMLElement,e={HTMLElement:function(){return Reflect.construct(t,[],this.constructor)}};window.HTMLElement=e.HTMLElement,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)})();(function(t){if(typeof t.requestSubmit=="function")return;t.requestSubmit=function(r){r?(e(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function e(r,s){r instanceof HTMLElement||n(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||n(TypeError,"The specified element is not a submit button"),r.form==s||n(DOMException,"The specified element is not owned by this form element","NotFoundError")}function n(r,s,o){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",o)}})(HTMLFormElement.prototype);var gr=new WeakMap;function Ds(t){let e=t instanceof Element?t:t instanceof Node?t.parentElement:null,n=e?e.closest("input, button"):null;return n?.type=="submit"?n:null}function Fs(t){let e=Ds(t.target);e&&e.form&&gr.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",Fs,!0),Object.defineProperty(t,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return gr.get(this.target)}})})();var Ne;(function(t){t.eager="eager",t.lazy="lazy"})(Ne||(Ne={}));var Re=class t extends HTMLElement{static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new t.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="complete"?this.delegate.completeChanged():e=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get loading(){return Ns(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var e,n;return(n=(e=this.ownerDocument)===null||e===void 0?void 0:e.documentElement)===null||n===void 0?void 0:n.hasAttribute("data-turbo-preview")}};function Ns(t){switch(t.toLowerCase()){case"lazy":return Ne.lazy;default:return Ne.eager}}function ce(t){return new URL(t.toString(),document.baseURI)}function Ye(t){let e;if(t.hash)return t.hash.slice(1);if(e=t.href.match(/#(.*)$/))return e[1]}function qi(t,e){let n=e?.getAttribute("formaction")||t.getAttribute("action")||t.action;return ce(n)}function Hs(t){return(Js(t).match(/\.[^.]*$/)||[])[0]||""}function Ws(t){return!!Hs(t).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function Vs(t,e){let n=Ys(e);return t.href===ce(n).href||t.href.startsWith(n)}function dt(t,e){return Vs(t,e)&&Ws(t)}function ei(t){let e=Ye(t);return e!=null?t.href.slice(0,-(e.length+1)):t.href}function gn(t){return ei(t)}function Us(t,e){return ce(t).href==ce(e).href}function zs(t){return t.pathname.split("/").slice(1)}function Js(t){return zs(t).slice(-1)[0]}function Ys(t){return Xs(t.origin+t.pathname)}function Xs(t){return t.endsWith("/")?t:t+"/"}var Tt=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return ce(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Rt(t){if(t.getAttribute("data-turbo-eval")=="false")return t;{let e=document.createElement("script"),n=_n("csp-nonce");return n&&(e.nonce=n),e.textContent=t.textContent,e.async=!1,Gs(e,t),e}}function Gs(t,e){for(let{name:n,value:r}of e.attributes)t.setAttribute(n,r)}function Ks(t){let e=document.createElement("template");return e.innerHTML=t,e.content}function ae(t,{target:e,cancelable:n,detail:r}={}){let s=new CustomEvent(t,{cancelable:n,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function vn(){return new Promise(t=>requestAnimationFrame(()=>t()))}function Qs(){return new Promise(t=>setTimeout(()=>t(),0))}function Zs(){return Promise.resolve()}function vr(t=""){return new DOMParser().parseFromString(t,"text/html")}function br(t,...e){let n=eo(t,e).replace(/^\n/,"").split(`
`),r=n[0].match(/^\s+/),s=r?r[0].length:0;return n.map(o=>o.slice(s)).join(`
`)}function eo(t,e){return t.reduce((n,r,s)=>{let o=e[s]==null?"":e[s];return n+r+o},"")}function ht(){return Array.from({length:36}).map((t,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function bn(t,...e){for(let n of e.map(r=>r?.getAttribute(t)))if(typeof n=="string")return n;return null}function to(t,...e){return e.some(n=>n&&n.hasAttribute(t))}function ti(...t){for(let e of t)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function ni(...t){for(let e of t)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function no(t,e=2e3){return new Promise(n=>{let r=()=>{t.removeEventListener("error",r),t.removeEventListener("load",r),n()};t.addEventListener("load",r,{once:!0}),t.addEventListener("error",r,{once:!0}),setTimeout(n,e)})}function _r(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function io(t){return t=="advance"||t=="replace"||t=="restore"}function An(...t){let e=bn("data-turbo-action",...t);return io(e)?e:null}function yr(t){return document.querySelector(`meta[name="${t}"]`)}function _n(t){let e=yr(t);return e&&e.content}function ro(t,e){let n=yr(t);return n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.setAttribute("content",e),n}function yn(t,e){var n;if(t instanceof Element)return t.closest(e)||yn(t.assignedSlot||((n=t.getRootNode())===null||n===void 0?void 0:n.host),e)}var fe;(function(t){t[t.get=0]="get",t[t.post=1]="post",t[t.put=2]="put",t[t.patch=3]="patch",t[t.delete=4]="delete"})(fe||(fe={}));function so(t){switch(t.toLowerCase()){case"get":return fe.get;case"post":return fe.post;case"put":return fe.put;case"patch":return fe.patch;case"delete":return fe.delete}}var It=class{constructor(e,n,r,s=new URLSearchParams,o=null){this.abortController=new AbortController,this.resolveRequestPromise=u=>{},this.delegate=e,this.method=n,this.headers=this.defaultHeaders,this.body=s,this.url=r,this.target=o}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this),await this.allowRequestToBeIntercepted(e);try{this.delegate.requestStarted(this);let n=await fetch(this.url.href,e);return await this.receive(n)}catch(n){if(n.name!=="AbortError")throw this.willDelegateErrorHandling(n)&&this.delegate.requestErrored(this,n),n}finally{this.delegate.requestFinished(this)}}async receive(e){let n=new Tt(e);return ae("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:n},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,n):n.succeeded?this.delegate.requestSucceededWithResponse(this,n):this.delegate.requestFailedWithResponse(this,n),n}get fetchOptions(){var e;return{method:fe[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isSafe?null:this.body,signal:this.abortSignal,referrer:(e=this.delegate.referrer)===null||e===void 0?void 0:e.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return this.method===fe.get}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(e){let n=new Promise(s=>this.resolveRequestPromise=s);ae("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.resolveRequestPromise},target:this.target}).defaultPrevented&&await n}willDelegateErrorHandling(e){return!ae("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}},ii=class{constructor(e,n){this.started=!1,this.intersect=r=>{let s=r.slice(-1)[0];s?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=e,this.element=n,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}},Ie=class{static wrap(e){return typeof e=="string"?new this(Ks(e)):e}constructor(e){this.fragment=oo(e)}};Ie.contentType="text/vnd.turbo-stream.html";function oo(t){for(let e of t.querySelectorAll("turbo-stream")){let n=document.importNode(e,!0);for(let r of n.templateElement.content.querySelectorAll("script"))r.replaceWith(Rt(r));e.replaceWith(n)}return t}var De;(function(t){t[t.initialized=0]="initialized",t[t.requesting=1]="requesting",t[t.waiting=2]="waiting",t[t.receiving=3]="receiving",t[t.stopping=4]="stopping",t[t.stopped=5]="stopped"})(De||(De={}));var Fe;(function(t){t.urlEncoded="application/x-www-form-urlencoded",t.multipart="multipart/form-data",t.plain="text/plain"})(Fe||(Fe={}));function ao(t){switch(t.toLowerCase()){case Fe.multipart:return Fe.multipart;case Fe.plain:return Fe.plain;default:return Fe.urlEncoded}}var Pt=class t{static confirmMethod(e,n,r){return Promise.resolve(confirm(e))}constructor(e,n,r,s=!1){this.state=De.initialized,this.delegate=e,this.formElement=n,this.submitter=r,this.formData=lo(n,r),this.location=ce(this.action),this.method==fe.get&&ho(this.location,[...this.body.entries()]),this.fetchRequest=new It(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=s}get method(){var e;let n=((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return so(n.toLowerCase())||fe.get}get action(){var e;let n=typeof this.formElement.action=="string"?this.formElement.action:null;return!((e=this.submitter)===null||e===void 0)&&e.hasAttribute("formaction")?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||n||""}get body(){return this.enctype==Fe.urlEncoded||this.method==fe.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var e;return ao(((e=this.submitter)===null||e===void 0?void 0:e.getAttribute("formenctype"))||this.formElement.enctype)}get isSafe(){return this.fetchRequest.isSafe}get stringFormData(){return[...this.formData].reduce((e,[n,r])=>e.concat(typeof r=="string"?[[n,r]]:[]),[])}async start(){let{initialized:e,requesting:n}=De,r=bn("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await t.confirmMethod(r,this.formElement,this.submitter))&&this.state==e)return this.state=n,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:n}=De;if(this.state!=e&&this.state!=n)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let n=co(_n("csrf-param"))||_n("csrf-token");n&&(e.headers["X-CSRF-Token"]=n)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ie.contentType)}requestStarted(e){var n;this.state=De.waiting,(n=this.submitter)===null||n===void 0||n.setAttribute("disabled",""),this.setSubmitsWith(),ae("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,n){this.result={success:n.succeeded,fetchResponse:n}}requestSucceededWithResponse(e,n){if(n.clientError||n.serverError)this.delegate.formSubmissionFailedWithResponse(this,n);else if(this.requestMustRedirect(e)&&uo(n)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=De.receiving,this.result={success:!0,fetchResponse:n},this.delegate.formSubmissionSucceededWithResponse(this,n)}requestFailedWithResponse(e,n){this.result={success:!1,fetchResponse:n},this.delegate.formSubmissionFailedWithResponse(this,n)}requestErrored(e,n){this.result={success:!1,error:n},this.delegate.formSubmissionErrored(this,n)}requestFinished(e){var n;this.state=De.stopped,(n=this.submitter)===null||n===void 0||n.removeAttribute("disabled"),this.resetSubmitterText(),ae("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||to("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)===null||e===void 0?void 0:e.getAttribute("data-turbo-submits-with")}};function lo(t,e){let n=new FormData(t),r=e?.getAttribute("name"),s=e?.getAttribute("value");return r&&n.append(r,s||""),n}function co(t){if(t!=null){let n=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(t));if(n){let r=n.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function uo(t){return t.statusCode==200&&!t.redirected}function ho(t,e){let n=new URLSearchParams;for(let[r,s]of e)s instanceof File||n.append(r,s);return t.search=n.toString(),t}var ft=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){let e="[inert], :disabled, [hidden], details:not([open]), dialog:not([open])";for(let n of this.element.querySelectorAll("[autofocus]"))if(n.closest(e)==null)return n;return null}get permanentElements(){return Sr(this.element)}getPermanentElementById(e){return wr(this.element,e)}getPermanentElementMapForSnapshot(e){let n={};for(let r of this.permanentElements){let{id:s}=r,o=e.getPermanentElementById(s);o&&(n[s]=[r,o])}return n}};function wr(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function Sr(t){return t.querySelectorAll("[id][data-turbo-permanent]")}var jt=class{constructor(e,n){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=r=>{if(!r.defaultPrevented){let s=r.target instanceof HTMLFormElement?r.target:void 0,o=r.submitter||void 0;s&&fo(s,o)&&po(s,o)&&this.delegate.willSubmitForm(s,o)&&(r.preventDefault(),r.stopImmediatePropagation(),this.delegate.formSubmitted(s,o))}},this.delegate=e,this.eventTarget=n}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}};function fo(t,e){return(e?.getAttribute("formmethod")||t.getAttribute("method"))!="dialog"}function po(t,e){if(e?.hasAttribute("formtarget")||t.hasAttribute("target")){let n=e?.getAttribute("formtarget")||t.target;for(let r of document.getElementsByName(n))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}var wn=class{constructor(e,n){this.resolveRenderPromise=r=>{},this.resolveInterceptionPromise=r=>{},this.delegate=e,this.element=n}scrollToAnchor(e){let n=this.snapshot.getElementForAnchor(e);n?(this.scrollToElement(n),this.focusElement(n)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(Ye(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:n}){this.scrollRoot.scrollTo(e,n)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:n,shouldRender:r,newSnapshot:s}=e;if(r)try{this.renderPromise=new Promise(a=>this.resolveRenderPromise=a),this.renderer=e,await this.prepareToRenderSnapshot(e);let o=new Promise(a=>this.resolveInterceptionPromise=a),u={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement};this.delegate.allowsImmediateRender(s,u)||await o,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(s,n),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},ri=class extends wn{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new ft(this.element)}},Sn=class{constructor(e,n){this.clickBubbled=r=>{this.respondsToEventTarget(r.target)?this.clickEvent=r:delete this.clickEvent},this.linkClicked=r=>{this.clickEvent&&this.respondsToEventTarget(r.target)&&r.target instanceof Element&&this.delegate.shouldInterceptLinkClick(r.target,r.detail.url,r.detail.originalEvent)&&(this.clickEvent.preventDefault(),r.preventDefault(),this.delegate.linkClickIntercepted(r.target,r.detail.url,r.detail.originalEvent)),delete this.clickEvent},this.willVisit=r=>{delete this.clickEvent},this.delegate=e,this.element=n}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}respondsToEventTarget(e){let n=e instanceof Element?e:e instanceof Node?e.parentElement:null;return n&&n.closest("turbo-frame, html")==this.element}},En=class{constructor(e,n){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=r=>{if(r instanceof MouseEvent&&this.clickEventIsSignificant(r)){let s=r.composedPath&&r.composedPath()[0]||r.target,o=this.findLinkFromClickTarget(s);if(o&&mo(o)){let u=this.getLocationForLink(o);this.delegate.willFollowLinkToLocation(o,u,r)&&(r.preventDefault(),this.delegate.followedLinkToLocation(o,u))}}},this.delegate=e,this.eventTarget=n}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}findLinkFromClickTarget(e){return yn(e,"a[href]:not([target^=_]):not([download])")}getLocationForLink(e){return ce(e.getAttribute("href")||"")}};function mo(t){if(t.hasAttribute("target")){for(let e of document.getElementsByName(t.target))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}var Ln=class{constructor(e,n){this.delegate=e,this.linkInterceptor=new En(this,n)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}willFollowLinkToLocation(e,n,r){return this.delegate.willSubmitFormLinkToLocation(e,n,r)&&e.hasAttribute("data-turbo-method")}followedLinkToLocation(e,n){let r=document.createElement("form"),s="hidden";for(let[f,m]of n.searchParams)r.append(Object.assign(document.createElement("input"),{type:s,name:f,value:m}));let o=Object.assign(n,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",o.href),r.setAttribute("hidden","");let u=e.getAttribute("data-turbo-method");u&&r.setAttribute("method",u);let l=e.getAttribute("data-turbo-frame");l&&r.setAttribute("data-turbo-frame",l);let a=An(e);a&&r.setAttribute("data-turbo-action",a);let c=e.getAttribute("data-turbo-confirm");c&&r.setAttribute("data-turbo-confirm",c),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,n,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},qn=class{static async preservingPermanentElements(e,n,r){let s=new this(e,n);s.enter(),await r(),s.leave()}constructor(e,n){this.delegate=e,this.permanentElementMap=n}enter(){for(let e in this.permanentElementMap){let[n,r]=this.permanentElementMap[e];this.delegate.enteringBardo(n,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let e in this.permanentElementMap){let[n]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(n),this.replacePlaceholderWithPermanentElement(n),this.delegate.leavingBardo(n)}}replaceNewPermanentElementWithPlaceholder(e){let n=go(e);e.replaceWith(n)}replaceCurrentPermanentElementWithClone(e){let n=e.cloneNode(!0);e.replaceWith(n)}replacePlaceholderWithPermanentElement(e){let n=this.getPlaceholderById(e.id);n?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(n=>n.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function go(t){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}var Mt=class{constructor(e,n,r,s,o=!0){this.activeElement=null,this.currentSnapshot=e,this.newSnapshot=n,this.isPreview=s,this.willRender=o,this.renderElement=r,this.promise=new Promise((u,l)=>this.resolvingFunctions={resolve:u,reject:l})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await qn.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;vo(e)&&e.focus()}enteringBardo(e){this.activeElement||e.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}};function vo(t){return t&&typeof t.focus=="function"}var Bt=class extends Mt{static renderElement(e,n){var r;let s=document.createRange();s.selectNodeContents(e),s.deleteContents();let o=n,u=(r=o.ownerDocument)===null||r===void 0?void 0:r.createRange();u&&(u.selectNodeContents(o),e.appendChild(u.extractContents()))}constructor(e,n,r,s,o,u=!0){super(n,r,s,o,u),this.delegate=e}get shouldRender(){return!0}async render(){await vn(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await vn(),this.focusFirstAutofocusableElement(),await vn(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,n=bo(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=_o(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:n,behavior:r}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let n=Rt(e);e.replaceWith(n)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function bo(t,e){return t=="end"||t=="start"||t=="center"||t=="nearest"?t:e}function _o(t,e){return t=="auto"||t=="smooth"?t:e}var kn=class t{static get defaultCSS(){return br`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${t.animationDuration}ms ease-out,
          opacity ${t.animationDuration/2}ms ${t.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,t.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,t.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=t.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return _n("csp-nonce")}};kn.animationDuration=300;var si=class extends ft{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(e=>!Eo(e)).map(e=>ko(e)).reduce((e,n)=>{let{outerHTML:r}=n,s=r in e?e[r]:{type:yo(n),tracked:wo(n),elements:[]};return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},s),{elements:[...s.elements,n]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,n){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in n.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==e).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,n)=>{let{type:r,tracked:s,elements:o}=this.detailsByOuterHTML[n];return r==null&&!s?[...e,...o]:o.length>1?[...e,...o.slice(1)]:e},[])}getMetaValue(e){let n=this.findMetaElementByName(e);return n?n.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((n,r)=>{let{elements:[s]}=this.detailsByOuterHTML[r];return qo(s,e)?s:n},void 0)}};function yo(t){if(So(t))return"script";if(Lo(t))return"stylesheet"}function wo(t){return t.getAttribute("data-turbo-track")=="reload"}function So(t){return t.localName=="script"}function Eo(t){return t.localName=="noscript"}function Lo(t){let e=t.localName;return e=="style"||e=="link"&&t.getAttribute("rel")=="stylesheet"}function qo(t,e){return t.localName=="meta"&&t.getAttribute("name")==e}function ko(t){return t.hasAttribute("nonce")&&t.setAttribute("nonce",""),t}var Se=class t extends ft{static fromHTMLString(e=""){return this.fromDocument(vr(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({head:e,body:n}){return new this(n,new si(e))}constructor(e,n){super(e),this.headSnapshot=n}clone(){let e=this.element.cloneNode(!0),n=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(let[s,o]of n.entries()){let u=r[s];for(let l of u.selectedOptions)l.selected=!1;for(let l of o.selectedOptions)u.options[l.index].selected=!0}for(let s of e.querySelectorAll('input[type="password"]'))s.value="";return new t(e,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var e;let n=(e=this.getSetting("root"))!==null&&e!==void 0?e:"/";return ce(n)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},ut;(function(t){t.visitStart="visitStart",t.requestStart="requestStart",t.requestEnd="requestEnd",t.visitEnd="visitEnd"})(ut||(ut={}));var we;(function(t){t.initialized="initialized",t.started="started",t.canceled="canceled",t.failed="failed",t.completed="completed"})(we||(we={}));var xo={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},He;(function(t){t[t.networkFailure=0]="networkFailure",t[t.timeoutFailure=-1]="timeoutFailure",t[t.contentTypeMismatch=-2]="contentTypeMismatch"})(He||(He={}));var oi=class{constructor(e,n,r,s={}){this.identifier=ht(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=we.initialized,this.delegate=e,this.location=n,this.restorationIdentifier=r||ht();let{action:o,historyChanged:u,referrer:l,snapshot:a,snapshotHTML:c,response:d,visitCachedSnapshot:f,willRender:m,updateHistory:g,shouldCacheSnapshot:b,acceptsStreamResponse:y}=Object.assign(Object.assign({},xo),s);this.action=o,this.historyChanged=u,this.referrer=l,this.snapshot=a,this.snapshotHTML=c,this.response=d,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=f,this.willRender=m,this.updateHistory=g,this.scrolled=!m,this.shouldCacheSnapshot=b,this.acceptsStreamResponse=y}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==we.initialized&&(this.recordTimingMetric(ut.visitStart),this.state=we.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==we.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=we.canceled)}complete(){this.state==we.started&&(this.recordTimingMetric(ut.visitEnd),this.state=we.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==we.started&&(this.state=we.failed,this.adapter.visitFailed(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){let n=this.location.href===((e=this.referrer)===null||e===void 0?void 0:e.href)?"replace":this.action,r=_r(n);this.history.update(r,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new It(this,fe.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ut.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:n}=e;hr(n)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,n)}}finishRequest(){this.recordTimingMetric(ut.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:n}=this.response;this.render(async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,hr(e)&&n!=null?(await this.view.renderPage(Se.fromHTMLString(n),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(Se.fromHTMLString(n),this),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!Ye(this.location)||e.hasAnchor(Ye(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Se.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let n=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(e,n,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),n||this.complete())})}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&(!((e=this.response)===null||e===void 0)&&e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ie.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,n){}async requestSucceededWithResponse(e,n){let r=await n.responseHTML,{redirected:s,statusCode:o}=n;r==null?this.recordResponse({statusCode:He.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=n.redirected?n.location:void 0,this.recordResponse({statusCode:o,responseHTML:r,redirected:s}))}async requestFailedWithResponse(e,n){let r=await n.responseHTML,{redirected:s,statusCode:o}=n;r==null?this.recordResponse({statusCode:He.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:o,responseHTML:r,redirected:s})}requestErrored(e,n){this.recordResponse({statusCode:He.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=Ye(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(n=>{this.frame=requestAnimationFrame(()=>n())}),await e(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function hr(t){return t>=200&&t<300}var ai=class{constructor(e){this.progressBar=new kn,this.showProgressBar=()=>{this.progressBar.show()},this.session=e}visitProposedToLocation(e,n){this.navigator.startVisit(e,n?.restorationIdentifier||ht(),n)}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,n){switch(n){case He.networkFailure:case He.timeoutFailure:case He.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:n}});default:return e.loadResponse()}}visitRequestFinished(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(e){}pageInvalidated(e){this.reload(e)}visitFailed(e){}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var n;ae("turbo:reload",{detail:e}),window.location.href=((n=this.location)===null||n===void 0?void 0:n.toString())||window.location.href}get navigator(){return this.session.navigator}},li=class{constructor(){this.selector="[data-turbo-temporary]",this.deprecatedSelector="[data-turbo-cache=false]",this.started=!1,this.removeTemporaryElements=e=>{for(let n of this.temporaryElements)n.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},ci=class{constructor(e,n){this.session=e,this.element=n,this.linkInterceptor=new Sn(this,n),this.formSubmitObserver=new jt(this,n)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,n,r){return this.shouldRedirect(e)}linkClickIntercepted(e,n,r){let s=this.findFrameElement(e);s&&s.delegate.linkClickIntercepted(e,n,r)}willSubmitForm(e,n){return e.closest("turbo-frame")==null&&this.shouldSubmit(e,n)&&this.shouldRedirect(e,n)}formSubmitted(e,n){let r=this.findFrameElement(e,n);r&&r.delegate.formSubmitted(e,n)}shouldSubmit(e,n){var r;let s=qi(e,n),o=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),u=ce((r=o?.content)!==null&&r!==void 0?r:"/");return this.shouldRedirect(e,n)&&dt(s,u)}shouldRedirect(e,n){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,n):this.session.elementIsNavigatable(e)){let s=this.findFrameElement(e,n);return s?s!=e.closest("turbo-frame"):!1}else return!1}findFrameElement(e,n){let r=n?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){let s=this.element.querySelector(`#${r}:not([disabled])`);if(s instanceof Re)return s}}},ui=class{constructor(e){this.restorationIdentifier=ht(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=n=>{if(this.shouldHandlePopState()){let{turbo:r}=n.state||{};if(r){this.location=new URL(window.location.href);let{restorationIdentifier:s}=r;this.restorationIdentifier=s,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,s)}}},this.onPageLoad=async n=>{await Zs(),this.pageLoaded=!0},this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,n){this.update(history.pushState,e,n)}replace(e,n){this.update(history.replaceState,e,n)}update(e,n,r=ht()){let s={turbo:{restorationIdentifier:r}};e.call(history,s,"",n.href),this.location=n,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:n}=this,r=this.restorationData[n];this.restorationData[n]=Object.assign(Object.assign({},r),e)}assumeControlOfScrollRestoration(){var e;this.previousScrollRestoration||(this.previousScrollRestoration=(e=history.scrollRestoration)!==null&&e!==void 0?e:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},di=class{constructor(e){this.delegate=e}proposeVisit(e,n={}){this.delegate.allowsVisitingLocationWithAction(e,n.action)&&(dt(e,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(e,n):window.location.href=e.toString())}startVisit(e,n,r={}){this.stop(),this.currentVisit=new oi(this,ce(e),n,Object.assign({referrer:this.location},r)),this.currentVisit.start()}submitForm(e,n){this.stop(),this.formSubmission=new Pt(this,e,n,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,n){if(e==this.formSubmission){let r=await n.responseHTML;if(r){let s=e.isSafe;s||this.view.clearSnapshotCache();let{statusCode:o,redirected:u}=n,a={action:this.getActionForFormSubmission(e),shouldCacheSnapshot:s,response:{statusCode:o,responseHTML:r,redirected:u}};this.proposeVisit(n.location,a)}}}async formSubmissionFailedWithResponse(e,n){let r=await n.responseHTML;if(r){let s=Se.fromHTMLString(r);n.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,n){console.error(n)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,n){let r=Ye(e),s=Ye(this.view.lastRenderedLocation),o=n==="restore"&&typeof r>"u";return n!=="replace"&&ei(e)===ei(this.view.lastRenderedLocation)&&(o||r!=null&&r!==s)}visitScrolledToSamePageLocation(e,n){this.delegate.visitScrolledToSamePageLocation(e,n)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission({submitter:e,formElement:n}){return An(e,n)||"advance"}},Te;(function(t){t[t.initial=0]="initial",t[t.loading=1]="loading",t[t.interactive=2]="interactive",t[t.complete=3]="complete"})(Te||(Te={}));var hi=class{constructor(e){this.stage=Te.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:n}=this;n=="interactive"?this.pageIsInteractive():n=="complete"&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=e}start(){this.started||(this.stage==Te.initial&&(this.stage=Te.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==Te.loading&&(this.stage=Te.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Te.interactive&&(this.stage=Te.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}},fi=class{constructor(e){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}},pi=class{render({fragment:e}){qn.preservingPermanentElements(this,Ao(e),()=>document.documentElement.appendChild(e))}enteringBardo(e,n){n.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function Ao(t){let e=Sr(document.documentElement),n={};for(let r of e){let{id:s}=r;for(let o of t.querySelectorAll("turbo-stream")){let u=wr(o.templateElement.content,s);u&&(n[s]=[r,u])}}return n}var mi=class{constructor(e){this.sources=new Set,this.started=!1,this.inspectFetchResponse=n=>{let r=Co(n);r&&$o(r)&&(n.preventDefault(),this.receiveMessageResponse(r))},this.receiveMessageEvent=n=>{this.started&&typeof n.data=="string"&&this.receiveMessageHTML(n.data)},this.delegate=e}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){let n=await e.responseHTML;n&&this.receiveMessageHTML(n)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ie.wrap(e))}};function Co(t){var e;let n=(e=t.detail)===null||e===void 0?void 0:e.fetchResponse;if(n instanceof Tt)return n}function $o(t){var e;return((e=t.contentType)!==null&&e!==void 0?e:"").startsWith(Ie.contentType)}var xn=class extends Mt{static renderElement(e,n){let{documentElement:r,body:s}=document;r.replaceChild(n,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:n}=document;e.replaceChild(this.newHead,n),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let n=e.parentNode;if(n){let r=Rt(e);n.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},Ot=class extends Mt{static renderElement(e,n){document.body&&n instanceof HTMLBodyElement?document.body.replaceWith(n):document.documentElement.appendChild(n)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){let e=this.mergeProvisionalElements(),n=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await n}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let n of this.newHeadStylesheetElements)e.push(no(n)),document.head.appendChild(n);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Rt(e))}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let n of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(n,e)||document.head.removeChild(n);for(let n of e)document.head.appendChild(n)}isCurrentElementInElementList(e,n){for(let[r,s]of n.entries()){if(e.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(e.innerHTML==s.innerHTML)return n.splice(r,1),!0}if(s.isEqualNode(e))return n.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let n=Rt(e);e.replaceWith(n)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},gi=class{constructor(e){this.keys=[],this.snapshots={},this.size=e}has(e){return gn(e)in this.snapshots}get(e){if(this.has(e)){let n=this.read(e);return this.touch(e),n}}put(e,n){return this.write(e,n),this.touch(e),n}clear(){this.snapshots={}}read(e){return this.snapshots[gn(e)]}write(e,n){this.snapshots[gn(e)]=n}touch(e){let n=gn(e),r=this.keys.indexOf(n);r>-1&&this.keys.splice(r,1),this.keys.unshift(n),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},vi=class extends wn{constructor(){super(...arguments),this.snapshotCache=new gi(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(e,n=!1,r=!0,s){let o=new Ot(this.snapshot,e,Ot.renderElement,n,r);return o.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(o)}renderError(e,n){n?.changeHistory();let r=new xn(this.snapshot,e,xn.renderElement,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:n}=this;await Qs();let r=e.clone();return this.snapshotCache.put(n,r),r}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}get snapshot(){return Se.fromElement(this.element)}},bi=class{constructor(e){this.selector="a[data-turbo-preload]",this.delegate=e}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if(document.readyState==="loading")return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(e){for(let n of e.querySelectorAll(this.selector))this.preloadURL(n)}async preloadURL(e){let n=new URL(e.href);if(!this.snapshotCache.has(n))try{let s=await(await fetch(n.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}})).text(),o=Se.fromHTMLString(s);this.snapshotCache.put(n,o)}catch{}}},_i=class{constructor(){this.navigator=new di(this),this.history=new ui(this),this.preloader=new bi(this),this.view=new vi(this,document.documentElement),this.adapter=new ai(this),this.pageObserver=new hi(this),this.cacheObserver=new li,this.linkClickObserver=new En(this,window),this.formSubmitObserver=new jt(this,document),this.scrollObserver=new fi(this),this.streamObserver=new mi(this),this.formLinkClickObserver=new Ln(this,document.documentElement),this.frameRedirector=new ci(this,document.documentElement),this.streamMessageRenderer=new pi,this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,n={}){let r=n.frame?document.getElementById(n.frame):null;r instanceof Re?(r.src=e.toString(),r.loaded):this.navigator.proposeVisit(ce(e),n)}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ie.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(e,n){this.enabled?this.navigator.startVisit(e,n,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,n){return this.elementIsNavigatable(e)&&dt(n,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(e,n,r){return this.elementIsNavigatable(e)&&dt(n,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,n,r)}followedLinkToLocation(e,n){let r=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(n.href,{action:r,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,n){return this.locationWithActionIsSamePage(e,n)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,n){fr(e),this.adapter.visitProposedToLocation(e,n)}visitStarted(e){e.acceptsStreamResponse||ti(document.documentElement),fr(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){ni(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,n){return this.navigator.locationWithActionIsSamePage(e,n)}visitScrolledToSamePageLocation(e,n){this.notifyApplicationAfterVisitingSamePageLocation(e,n)}willSubmitForm(e,n){let r=qi(e,n);return this.submissionIsNavigatable(e,n)&&dt(ce(r),this.snapshot.rootLocation)}formSubmitted(e,n){this.navigator.submitForm(e,n)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;!((e=this.navigator.currentVisit)===null||e===void 0)&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},n){let r=this.notifyApplicationBeforeRender(e,n),{defaultPrevented:s,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!s}viewRenderedSnapshot(e,n){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,n){this.notifyApplicationAfterFrameRender(e,n)}applicationAllowsFollowingLinkToLocation(e,n,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,n,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,n,r){return ae("turbo:click",{target:e,detail:{url:n.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return ae("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,n){return ae("turbo:visit",{detail:{url:e.href,action:n}})}notifyApplicationBeforeCachingSnapshot(){return ae("turbo:before-cache")}notifyApplicationBeforeRender(e,n){return ae("turbo:before-render",{detail:Object.assign({newBody:e},n),cancelable:!0})}notifyApplicationAfterRender(){return ae("turbo:render")}notifyApplicationAfterPageLoad(e={}){return ae("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,n){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:n.toString()}))}notifyApplicationAfterFrameLoad(e){return ae("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,n){return ae("turbo:frame-render",{detail:{fetchResponse:e},target:n,cancelable:!0})}submissionIsNavigatable(e,n){if(this.formMode=="off")return!1;{let r=n?this.elementIsNavigatable(n):!0;return this.formMode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let n=yn(e,"[data-turbo]"),r=yn(e,"turbo-frame");return this.drive||r?n?n.getAttribute("data-turbo")!="false":!0:n?n.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return An(e)||"advance"}get snapshot(){return this.view.snapshot}};function fr(t){Object.defineProperties(t,To)}var To={absoluteURL:{get(){return this.toString()}}},yi=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(e){ro("turbo-cache-control",e)}},Er={after(){this.targetElements.forEach(t=>{var e;return(e=t.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,t.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.append(this.templateContent))},before(){this.targetElements.forEach(t=>{var e;return(e=t.parentElement)===null||e===void 0?void 0:e.insertBefore(this.templateContent,t)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.prepend(this.templateContent))},remove(){this.targetElements.forEach(t=>t.remove())},replace(){this.targetElements.forEach(t=>t.replaceWith(this.templateContent))},update(){this.targetElements.forEach(t=>{t.innerHTML="",t.append(this.templateContent)})}},K=new _i,Ro=new yi(K),{navigator:Io}=K;function Lr(){K.start()}function Po(t){K.registerAdapter(t)}function jo(t,e){K.visit(t,e)}function Cn(t){K.connectStreamSource(t)}function $n(t){K.disconnectStreamSource(t)}function Mo(t){K.renderStreamMessage(t)}function Bo(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),K.clearCache()}function Oo(t){K.setProgressBarDelay(t)}function Do(t){Pt.confirmMethod=t}function Fo(t){K.setFormMode(t)}var No=Object.freeze({__proto__:null,navigator:Io,session:K,cache:Ro,PageRenderer:Ot,PageSnapshot:Se,FrameRenderer:Bt,start:Lr,registerAdapter:Po,visit:jo,connectStreamSource:Cn,disconnectStreamSource:$n,renderStreamMessage:Mo,clearCache:Bo,setProgressBarDelay:Oo,setConfirmMethod:Do,setFormMode:Fo,StreamActions:Er}),wi=class extends Error{},Si=class{constructor(e){this.fetchResponseLoaded=n=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:n})=>{let r=n.querySelector("#"+this.element.id);r&&this.previousFrameElement&&r.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=e,this.view=new ri(this,this.element),this.appearanceObserver=new ii(this,this.element),this.formLinkClickObserver=new Ln(this,this.element),this.linkInterceptor=new Sn(this,this.element),this.restorationIdentifier=ht(),this.formSubmitObserver=new jt(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==Ne.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Ne.eager&&this.loadSourceURL()}sourceURLChanged(){this.isIgnoringChangesTo("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Ne.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){let{src:e}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=e,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==Ne.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(ce(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let n=await e.responseHTML;if(n){let r=vr(n);Se.fromDocument(r).isVisitable?await this.loadFrameResponse(e,r):await this.handleUnvisitableFrameResponse(e)}}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,e),this.loadSourceURL()}willSubmitFormLinkToLocation(e){return this.shouldInterceptNavigation(e)}submittedFormLinkToLocation(e,n,r){let s=this.findFrameElement(e);s&&r.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,n,r){return this.shouldInterceptNavigation(e)}linkClickIntercepted(e,n){this.navigateFrame(e,n)}willSubmitForm(e,n){return e.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(e,n)}formSubmitted(e,n){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Pt(this,e,n);let{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(e){var n;e.headers["Turbo-Frame"]=this.id,!((n=this.currentNavigationElement)===null||n===void 0)&&n.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ie.contentType)}requestStarted(e){ti(this.element)}requestPreventedHandlingResponse(e,n){this.resolveVisitPromise()}async requestSucceededWithResponse(e,n){await this.loadResponse(n),this.resolveVisitPromise()}async requestFailedWithResponse(e,n){await this.loadResponse(n),this.resolveVisitPromise()}requestErrored(e,n){console.error(n),this.resolveVisitPromise()}requestFinished(e){ni(this.element)}formSubmissionStarted({formElement:e}){ti(e,this.findFrameElement(e))}formSubmissionSucceededWithResponse(e,n){let r=this.findFrameElement(e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,e.formElement,e.submitter),r.delegate.loadResponse(n),e.isSafe||K.clearCache()}formSubmissionFailedWithResponse(e,n){this.element.delegate.loadResponse(n),K.clearCache()}formSubmissionErrored(e,n){console.error(n)}formSubmissionFinished({formElement:e}){ni(e,this.findFrameElement(e))}allowsImmediateRender({element:e},n){let r=ae("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:e},n),cancelable:!0}),{defaultPrevented:s,detail:{render:o}}=r;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!s}viewRenderedSnapshot(e,n){}preloadOnLoadLinksForView(e){K.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,n){this.previousFrameElement=e.cloneNode(!0)}async loadFrameResponse(e,n){let r=await this.extractForeignFrameElement(n.body);if(r){let s=new ft(r),o=new Bt(this,this.view.snapshot,s,Bt.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,K.frameRendered(e,this.element),K.frameLoaded(this.element),this.fetchResponseLoaded(e)}else this.willHandleFrameMissingFromResponse(e)&&this.handleFrameMissingFromResponse(e)}async visit(e){var n;let r=new It(this,fe.get,e,new URLSearchParams,this.element);return(n=this.currentFetchRequest)===null||n===void 0||n.cancel(),this.currentFetchRequest=r,new Promise(s=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,s()},r.perform()})}navigateFrame(e,n,r){let s=this.findFrameElement(e,r);s.delegate.proposeVisitIfNavigatedWithAction(s,e,r),this.withCurrentNavigationElement(e,()=>{s.src=n})}proposeVisitIfNavigatedWithAction(e,n,r){if(this.action=An(r,n,e),this.action){let s=Se.fromElement(e).clone(),{visitCachedSnapshot:o}=e.delegate;e.delegate.fetchResponseLoaded=u=>{if(e.src){let{statusCode:l,redirected:a}=u,c=e.ownerDocument.documentElement.outerHTML,f={response:{statusCode:l,redirected:a,responseHTML:c},visitCachedSnapshot:o,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:s};this.action&&(f.action=this.action),K.visit(e.src,f)}}}}changeHistory(){if(this.action){let e=_r(this.action);K.history.update(e,ce(this.element.src||""),this.restorationIdentifier)}}async handleUnvisitableFrameResponse(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.visitResponse(e.response)}willHandleFrameMissingFromResponse(e){this.element.setAttribute("complete","");let n=e.response,r=async(o,u={})=>{o instanceof Response?this.visitResponse(o):K.visit(o,u)};return!ae("turbo:frame-missing",{target:this.element,detail:{response:n,visit:r},cancelable:!0}).defaultPrevented}handleFrameMissingFromResponse(e){this.view.missing(),this.throwFrameMissingError(e)}throwFrameMissingError(e){let n=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new wi(n)}async visitResponse(e){let n=new Tt(e),r=await n.responseHTML,{location:s,redirected:o,statusCode:u}=n;return K.visit(s,{response:{redirected:o,statusCode:u,responseHTML:r}})}findFrameElement(e,n){var r;let s=bn("data-turbo-frame",n,e)||this.element.getAttribute("target");return(r=pr(s))!==null&&r!==void 0?r:this.element}async extractForeignFrameElement(e){let n,r=CSS.escape(this.id);try{if(n=mr(e.querySelector(`turbo-frame#${r}`),this.sourceURL),n)return n;if(n=mr(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),n)return await n.loaded,await this.extractForeignFrameElement(n)}catch(s){return console.error(s),new Re}return null}formActionIsVisitable(e,n){let r=qi(e,n);return dt(ce(r),this.rootLocation)}shouldInterceptNavigation(e,n){let r=bn("data-turbo-frame",n,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.formActionIsVisitable(e,n)||!this.enabled||r=="_top")return!1;if(r){let s=pr(r);if(s)return!s.disabled}return!(!K.elementIsNavigatable(e)||n&&!K.elementIsNavigatable(n))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.ignoringChangesToAttribute("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.resolveVisitPromise()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){this.ignoringChangesToAttribute("complete",()=>{e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var e;let n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=(e=n?.content)!==null&&e!==void 0?e:"/";return ce(r)}isIgnoringChangesTo(e){return this.ignoredAttributes.has(e)}ignoringChangesToAttribute(e,n){this.ignoredAttributes.add(e),n(),this.ignoredAttributes.delete(e)}withCurrentNavigationElement(e,n){this.currentNavigationElement=e,n(),delete this.currentNavigationElement}};function pr(t){if(t!=null){let e=document.getElementById(t);if(e instanceof Re)return e}}function mr(t,e){if(t){let n=t.getAttribute("src");if(n!=null&&e!=null&&Us(n,e))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof Re)return t.connectedCallback(),t.disconnectedCallback(),t}}var Ei=class t extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){var e;return(e=this.renderPromise)!==null&&e!==void 0?e:this.renderPromise=(async()=>{let n=this.beforeRenderEvent;this.dispatchEvent(n)&&(await vn(),await n.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){var e;let n=this.targetElements.flatMap(s=>[...s.children]).filter(s=>!!s.id),r=[...((e=this.templateContent)===null||e===void 0?void 0:e.children)||[]].filter(s=>!!s.id).map(s=>s.id);return n.filter(s=>r.includes(s.id))}get performAction(){if(this.action){let e=Er[this.action];if(e)return e;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(e){throw new Error(`${this.description}: ${e}`)}get description(){var e,n;return(n=((e=this.outerHTML.match(/<[^>]+>/))!==null&&e!==void 0?e:[])[0])!==null&&n!==void 0?n:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:t.renderElement}})}get targetElementsById(){var e;let n=(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.target);return n!==null?[n]:[]}get targetElementsByQuery(){var e;let n=(e=this.ownerDocument)===null||e===void 0?void 0:e.querySelectorAll(this.targets);return n.length!==0?Array.prototype.slice.call(n):[]}},Li=class extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Cn(this.streamSource)}disconnectedCallback(){this.streamSource&&$n(this.streamSource)}get src(){return this.getAttribute("src")||""}};Re.delegateConstructor=Si;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Re);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",Ei);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",Li);(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(br`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})();window.Turbo=No;Lr();var Tr;async function zo(){return Tr||$r(Jo().then($r))}function $r(t){return Tr=t}async function Jo(){let{createConsumer:t}=await Promise.resolve().then(()=>(Cr(),Ar));return t()}async function Rr(t,e){let{subscriptions:n}=await zo();return n.create(t,e)}function Vt(t){return!t||typeof t!="object"||t instanceof Date||t instanceof RegExp?t:Array.isArray(t)?t.map(Vt):Object.keys(t).reduce(function(e,n){var r=n[0].toLowerCase()+n.slice(1).replace(/([A-Z]+)/g,function(s,o){return"_"+o.toLowerCase()});return e[r]=Vt(t[n]),e},{})}var ji=class extends HTMLElement{async connectedCallback(){Cn(this),this.subscription=await Rr(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){$n(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let n=new MessageEvent("message",{data:e});return this.dispatchEvent(n)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),n=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:n,...Vt({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",ji);function Ir(t){if(t.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:n}}=t;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:r}}})=>{let s=Ko(n.body)?n.body:new URLSearchParams,o=Xo(r,s,e);/get/i.test(o)||(/post/i.test(o)?s.delete("_method"):s.set("_method",o),n.method="post")},{once:!0})}}function Xo(t,e,n){let r=Go(t),s=e.get("_method"),o=n.getAttribute("method")||"get";return typeof r=="string"?r:typeof s=="string"?s:o}function Go(t){return(t instanceof HTMLButtonElement||t instanceof HTMLInputElement)&&t.hasAttribute("formmethod")?t.formMethod:null}function Ko(t){return t instanceof FormData||t instanceof URLSearchParams}addEventListener("turbo:before-fetch-request",Ir);ql.adminClassroomView=function(){let t="",e="";function n(s){t=s,e=document.querySelector(".js-classroom-focuses"),r()}function r(){ql.getJson(t).then(s=>e.innerHTML=s.focuses).then(()=>setTimeout(r,1e4)).catch(s=>console.error(s.message))}return{init:n}}();ql.adminUser=function(){function t(){let e=document.getElementById("admin-user-blocked-checkbox"),n=document.getElementById("admin-user-blocked-reason-wrapper"),r=document.getElementById("admin-user-blocked-reason");e.addEventListener("change",()=>{n.classList.remove("not-visible"),r.value=""})}return{init:t}}();ql.adminLabInstances=function(){function t(){$(".admin_labs_container .lab_instance_duration_link").click(function(e){e.preventDefault();let n=$("#lab_instance_duration_form");n.find("#id").attr("value",$(this).data("lab_instance_id")),n.find("#duration_minutes").val(Math.floor($(this).data("duration")/60)),n.find("input[type=submit]").unbind("click").click(()=>{n.find("form").valid()&&n.find("form").on("ajax:success",(r,s,o,u)=>{n.modal("hide");let l=$("#lab_instance_"+s.id);return s.elapsed_seconds===null?l.find(".display_duration").text("| "+s.duration):l.find(".display_duration").text(s.elapsed_seconds+" | "+s.duration),l.find(".lab_instance_duration_link").data("duration",s.duration),!1}).on("ajax:error",(r,s,o,u)=>{n.find(".error_explanation").find("ul").html("<li>"+s.responseText+"</li>")}).submit()}),n.modal()}),document.querySelectorAll(".js-end-lab").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();let r=n.target.dataset.labInstanceId;ql.labData.setLabInstanceId(r),confirm(n.target.dataset.jsConfirm)&&(ql.labXhr.stopLab(),location.reload())})})}return{init:t}}();ql.affiliateAutocomplete=function(){function t(){$(".js-affiliate-user-autocomplete").userAutocomplete({source:function(n,r){let s=`?q[${this.element[0].dataset.query}]=${n.term}`;ql.getJson(this.element[0].dataset.autocomplete+s).then(o=>{r(o.map(u=>({label:u,value:u.email})))})},open:function(n,r){$(".js-add-new-user").click(e)}})}function e(n){let r=$(".js-affiliate-user-autocomplete").val();$('.js-new-user input[type="email"]').val(r),$(".js-new-user").removeClass("is-hidden"),$(".js-existing-user").addClass("is-hidden")}return{init:t}}();ql.analytics=function(){function t(){function n(r){for(let s of r.querySelectorAll("*"))s.dataset&&s.dataset.analyticsAction!=null&&s.addEventListener("click",e,!1),s.shadowRoot&&n(s.shadowRoot)}n(document)}function e(n){ql.track(this.dataset.analyticsAction,{category:this.dataset.analyticsCategory,label:this.dataset.analyticsLabel,...this.dataset})}return{init:t}}();ql.announcements=function(){return{switchPhase(t){let e=document.querySelectorAll(".announcement-phase");for(let[o,u]of e.entries())t===o?u.classList.remove("hidden"):u.classList.add("hidden");let n=document.querySelector(".view-message-audience");n?.classList.toggle("hidden",t===0);let r=`<strong>Subject:</strong> ${document.getElementById("announcement_title").value}`,s=`<strong>Message:</strong> ${document.getElementById("announcement_message").value}`;document.getElementById("announcement_preview_message").value=`${r}<br><br>${s}`},checkAllRecipients(){let t=document.getElementsByName("checkAll")[0].checked,e=document.getElementsByName("selected_memberships[]");for(let n of e)n.checked=t},checkSingleRecipient(){document.getElementsByName("checkAll")[0].checked&&(document.getElementsByName("checkAll")[0].checked=!1)},checkAcknowledgement(){let t=document.getElementById("send_button").disabled;document.getElementById("send_button").disabled=!t}}}();ql.assessmentTimer=function(){let n={RETAKE:"retake",SUBMIT:"submit"};function r(){let s=document.querySelector("ql-quiz"),o=document.querySelector("ql-exam-timer"),u=document.querySelector(".assessment-timer"),l=document.querySelector(".timer-toggle"),a=()=>{o.getAttribute("open")==null&&(o.setAttribute("open","true"),setTimeout(()=>o.removeAttribute("open"),5*1e3))},c=f=>{let m=f.detail,g=o.classList;m<=0&&!g.contains("expired")?(s.dispatchEvent(new Event("timeElapsed")),g.add("expired"),o.setAttribute("open","true")):m<=30&&!g.contains("critical")?(g.add("critical"),a()):m<15*60&&!g.contains("warning")&&(g.add("warning"),a())},d=f=>{switch(f.type){case n.RETAKE:o.resetForRetake(f.detail),o.classList.remove("expired","critical","warning"),u.classList.remove("hidden");break;case n.SUBMIT:o.startedAt=null,o.secondsRemaining=null,u.classList.add("hidden");break}};s&&o&&l&&(o.addEventListener("secondsRemainingChanged",c),s.addEventListener(n.SUBMIT,d),s.addEventListener(n.RETAKE,d))}return{init:r}}();ql.barkerLeaderboard=function(){function t(){document.addEventListener("avatarSelected",e=>{let{option:n}=e.detail;for(let r of document.querySelectorAll(".js-current-avatar"))r.src=n.src;$.post("select_avatar",{barker_avatar_slug:n.slug})})}return{init:t}}();CampaignCodeModalSubmitEnable=function(){$("#campaign-code-modal-submit").prop("disabled",!1)};CampaignCodeModalSubmitDisable=function(){$("#campaign-code-modal-submit").prop("disabled",!0)};ql.campaigns=function(){function t(){$("#campaign_wizard").length>0&&n(),$("#campaign_target_type").change(function(){n()}),$("input#campaign_events").change(()=>{e()}),$(".campaign_actions_form").on("nested:fieldAdded",r=>{r.target.className==="fields"&&e()})}function e(){$(document).find(".campaign_campaign_actions_event select").empty().append($("input#campaign_events").val().split(",").map(r=>`<option>${$.trim(r)}</option>`).join())}function n(){$("#campaign_target_lab_id").closest(".control-group").hide(),$("#campaign_target_learningpath_id").closest(".control-group").hide(),$("#campaign_target_coursetemplate_id").closest(".control-group").hide(),$("#campaign_target_type").val()=="LearningPath"?$("#campaign_target_learningpath_id").closest(".control-group").show():$("#campaign_target_type").val()=="Lab"?$("#campaign_target_lab_id").closest(".control-group").show():$("#campaign_target_type").val()=="CourseTemplate"&&$("#campaign_target_coursetemplate_id").closest(".control-group").show()}return{init:t}}();ql.catalogAccessBulkRemoval=function(t){let e="received-dry-run-status",n="received-removal-status",r,s;function o(){document.querySelector(".js-start-dry-run").addEventListener("click",y),ql.subscribe(e,d),ql.subscribe(n,f)}function u(A){p(),l(A)}function l(A){r=new ql.Poller(A,t,D=>{ql.publish(e,D)}),r.start()}function a(A){w(),c(A)}function c(A){s===void 0&&(s=new ql.Poller(A,t,D=>{ql.publish(n,D)}),s.start())}function d(A){if(A&&A.dry_run_operation===null){window.location=A.redirect_path;return}A&&A.dry_run_operation.status==="finished"&&(r.stop(),T(),A.dry_run_operation.succeeded?g(A):V())}function f(A){if(A&&A.removal_operation===null){window.location=A.redirect_path;return}A&&A.removal_operation.status==="finished"&&(s.stop(),M(),A.removal_operation.succeeded?window.location=A.redirect_path:m())}function m(){document.querySelector(".removal-dry-run-summary").classList.contains("is-active")?F():V()}function g(A){let D=document.querySelector(".removal-dry-run-summary");D.innerHTML=A.rendered,b(),document.querySelector(".removal-dry-run-summary").classList.add("is-active"),B()}function b(){document.querySelector(".js-confirm-removal-button").addEventListener("click",L),document.querySelector(".js-cancel-bulk-removal").addEventListener("click",j),$confirmButtonForm=$(".js-confirm-removal-form"),$confirmButtonForm.on("ajax:success",(J,Y)=>{C(),c(`${Y.removal_status_path}?removal_operation_id=${Y.removal_operation_id}`)}),$confirmButtonForm.on("ajax:error",(J,Y)=>(window.location=Y.responseJSON.redirect_path,!1))}function y(){p(),P()}function L(A){U(),W()}function j(){z(),P(),C()}function P(){r&&(r.stop(),r=void 0)}function C(){s&&(s.stop(),s=void 0)}function p(){document.querySelector(".dry-run-loader").classList.add("is-active"),document.querySelector(".removal-general-error").classList.remove("is-active"),B()}function T(){document.querySelector(".dry-run-loader").classList.remove("is-active")}function w(){document.querySelector(".removal-loader").classList.add("is-active"),B()}function M(){document.querySelector(".removal-loader").classList.remove("is-active")}function z(){document.querySelector(".removal-dry-run-summary").classList.remove("is-active"),te()}function U(){document.querySelector(".removal-spinner").classList.add("is-active"),document.querySelector(".removal-actions").classList.add("disabled")}function F(){document.querySelector(".removal-confirmation-error").classList.add("is-active"),document.querySelector(".removal-spinner").classList.remove("is-active"),document.querySelector(".removal-actions").classList.remove("disabled")}function W(){document.querySelector(".removal-confirmation-error").classList.remove("is-active")}function V(){document.querySelector(".removal-general-error").classList.add("is-active"),te()}function B(){document.querySelector(".removal-upload-form").classList.add("disabled")}function te(){document.querySelector(".removal-upload-form").classList.remove("disabled")}return{init:o,pollDryRunOnPageLoad:u,pollRemovalOnPageLoad:a}};ql.catalogs={tracking:function(){function t(){document.querySelectorAll(".js-catalog-item-title a").forEach(n=>n.addEventListener("click",r=>{ql.track("clicked_catalog_list_item",{label:r.target.innerText,type:r.target.dataset.type})},!1))}return{init:t}}(),addItems:function(){$addButtons=[],$catalogItems={};function t(){$catalogItems=document.querySelector(".js-catalog-items"),$addButtons=document.querySelectorAll(".js-add-button"),$addButtons.forEach(s=>{s.addEventListener("click",e,!1)}),ql.subscribe("itemAdded",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),$("#add_item_with_children").modal("hide"),n(this.href)}function n(s){fetch(s,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(me).then(ye).then(o=>ql.publish("itemAdded",o)).catch(o=>console.log(o))}function r(s){$firstCatalogItem=$catalogItems.querySelectorAll(".js-catalog-item")[0],$firstCatalogItem?$firstCatalogItem.insertAdjacentHTML("beforebegin",s.html):$catalogItems.insertAdjacentHTML("beforeend",s.html),$visiblebuttons=$catalogItems.querySelectorAll(".js-item-visible"),$visiblebuttons.forEach(o=>{o.hasAttribute("data-listening")||ql.catalogs.editItems.upgradeVisibleButton(o)}),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(o=>{o.hasAttribute("data-listening")||ql.catalogs.editItems.upgradePriceField(o)}),$oldItem=document.querySelector(`.js-add-item[data-item="${s.catalogableType}_${s.catalogableId}"]`),$($oldItem).animate({height:0},200,()=>{$oldItem.remove()})}return{init:t,addItem:n}}(),searchItems:function(){function t(){$active=window.localStorage.getItem("searchTab")?window.localStorage.getItem("searchTab"):"Labs",e(".js-tab"),e(".js-tab-content"),n(),$tabsContainer=document.querySelector(".js-catalogable-types"),$tabsContainer.addEventListener("click",r)}function e(s){$tabs=document.querySelectorAll(s),$tabs.forEach(o=>{o&&(o.dataset.tab==$active?o.classList.add("is-active"):o.classList.remove("is-active"))})}function n(){$paginationContainers=document.querySelectorAll(".pagination"),$paginationContainers.forEach(s=>{s&&(s.id!=$active.toLowerCase()?s.style.display="none":s.style.display="inline")})}function r(s){$active=document.querySelector(".js-tab.is-active").dataset.tab,window.localStorage.setItem("searchTab",$active),n()}return{init:t}}(),dragAndDrop:function(){$addItems={},$modal={},$name={},$type={},$count={},$with_button={},$without_button={};function t(){$modal=document.querySelector("#add_item_with_children"),$name=$modal.querySelector(".js-add-item-name"),$type=$modal.querySelector(".js-add-item-type"),$count=$modal.querySelector(".js-add-item-children-count"),$with_button=$modal.querySelector(".js-with-children"),$without_button=$modal.querySelector(".js-without-children"),$(".js-add-item").draggable({helper:"clone",appendTo:"body"}),$(".js-catalog-table").droppable({drop:e,activeClass:"is-droppable",hoverClass:"is-active"})}function e(n,r){let s=r.draggable[0];if(s.dataset.hasChildren){let o=s.dataset.name,u=s.dataset.type,l=s.dataset.children,a=s.querySelector(".js-add-with-children").href,c=s.querySelector(".js-add-without-children").href;$name.innerHTML=o,$type.innerHTML=u,$count.innerHTML=l,$with_button.href=a,$without_button.href=c,$("#add_item_with_children").modal("show")}else $addButton=s.querySelector(".js-add-button"),ql.catalogs.addItems.addItem($addButton.href)}return{init:t}}(),editItems:function(){$catalogItems={},$visibleButtons={},$priceFields={};function t(){$catalogItems=document.querySelector(".js-catalog-items"),$visibleButtons=$catalogItems.querySelectorAll(".js-item-visible"),$visibleButtons.forEach(e),$priceFields=$catalogItems.querySelectorAll(".js-item-price"),$priceFields.forEach(n),ql.subscribe("itemUpdated",u)}function e(l){l.addEventListener("click",r,!1),l.dataset.listening="true"}function n(l){l.addEventListener("change",s,!1),l.dataset.listening="true"}function r(l){l.preventDefault(),l.stopImmediatePropagation(),o(this.href)}function s(l){let a=this.dataset.path.replace(/=.*/i,`=${this.value}`);o(a)}function o(l){fetch(l,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(me).then(ye).then(a=>ql.publish("itemUpdated",a)).catch(a=>console.log(a))}function u(l){$item=$catalogItems.querySelector(`[data-item = "${l.id}"]`),$visibleButton=$item.querySelector(".js-item-visible");let a=l.visible?"0":"1",c=l.visible?"text--success":"text--light",d=$visibleButton.href.replace(/=\d/i,`=${a}`);$visibleButton.href=d,$visibleButton.classList.remove("text--success"),$visibleButton.classList.remove("text--light"),$visibleButton.classList.add(c),l.price&&($priceField=$item.querySelector(".js-item-price"),$priceField.value=l.price)}return{init:t,upgradeVisibleButton:e,upgradePriceField:n}}(),edit:function(){$enableButton={},$enableIcon={},$fraudButton={},$fraudIcon={};function t(){$enableButton=document.querySelector(".js-enable-catalog"),$enableIcon=$enableButton.querySelector(".material-icons"),$enableButton.addEventListener("click",e,!1),$fraudButton=document.querySelector(".js-fraud-catalog"),$fraudIcon=$fraudButton.querySelector(".material-icons"),$fraudButton.addEventListener("click",e,!1),ql.subscribe("catalogUpdated",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),n(this.href)}function n(s){fetch(s,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]')?.content,Accept:"application/json","Content-Type":"application/json"})}).then(me).then(ye).then(o=>ql.publish("catalogUpdated",o)).catch(o=>console.log(o))}function r(s){let o=s.enabled_at?"0":"1",u=s.enabled_at?"check_box":"check_box_outline_blank",l=$enableButton.href.replace(/=\d/i,`=${o}`);$enableButton.href=l,$enableIcon.innerHTML=u;let a=s.fraud_protection?"0":"1",c=s.fraud_protection?"check_box":"check_box_outline_blank",d=$fraudButton.href.replace(/=\d/i,`=${a}`);$fraudButton.href=d,$fraudIcon.innerHTML=c}return{init:t}}(),description:function(){function t(e,n,r){document.getElementById(e).checked?document.getElementById(`label_${e}`).innerHTML=n:document.getElementById(`label_${e}`).innerHTML=r}return{checkboxState:t}}()};ql.chat=function(){function t(){s(),zE("messenger:on","close",n)}function e(){r(),zE("messenger","open")}function n(){zE("messenger","close"),s()}function r(){zE("messenger","show")}function s(){zE("messenger","hide")}return{init:t,open:e,close:n,show:r,hide:s}}();ql.processCheckout=function(){$toast="",$toastMessage="",$toastLoader="",$redirectPath="",poller={};function t(s){$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),$redirectPath=s,ql.subscribe("received-checkout-status",r)}function e(s){poller=new ql.Poller(s,1e3,n),poller.start()}function n(s){ql.publish("received-checkout-status",s)}function r(s){let o=JSON.parse(s.result);s.status==="finished"?(poller.stop(),$toastLoader.classList.remove("is-visible"),!s.succeeded||o&&o.error?($toast.classList.remove("is-visible"),ql.showFlash("warn",o.error)):window.location.replace($redirectPath)):$toastLoader.classList.contains("is-visible")||$toastLoader.classList.add("is-visible")}return{init:t,poll:e}}();initChosenListener=function(){$(".js-chosen").chosen({disable_search_threshold:20})};initChosen=function(){initChosenListener()};ql.focusDataPath="";ql.initStudentCheckBoxListeners=function(){[...document.querySelectorAll(".js-select-student")].map(e=>{e.addEventListener("click",ql.handleStudentCheckBox)})};ql.handleStudentCheckBox=function(){ql.toggleStudentRow(this.closest("[data-student]")),ql.toggleStudentCheckBox(this),ql.toggleActionButtons()};ql.toggleStudentRow=function(t){t.classList.toggle("is-selected")};ql.toggleStudentCheckBox=function(t){t.innerHTML=t.innerHTML.includes("blank")?"check_box":"check_box_outline_blank"};ql.toggleActionButtons=function(){let t=ql.getSelectedStudentRows(),e=t.filter(o=>o.dataset.running=="true"),n=document.querySelector(".js-student-table-title"),r=document.querySelector(".js-student-actions-container"),s=r.querySelectorAll(".mdl-button");t.length?(n.style.display="none",r.style.display="block",e.length==0?s.forEach(o=>o.classList.add("mdl-button--disabled")):s.forEach(o=>o.classList.remove("mdl-button--disabled"))):(n.style.display="flex",r.style.display="none")};ql.getSelectedStudentRows=function(){return[...document.querySelectorAll("[data-student]")].filter(e=>e.classList.contains("is-selected"))};ql.initAddTimeListener=function(){document.querySelector(".js-add-time").addEventListener("click",ql.handleAddTime)};ql.handleAddTime=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.addTimePath).map(n=>{let r=new Request(n,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(r).then(status).then(json).then(()=>ql.getJson(ql.focusDataPath).then(s=>ql.publish("received-focus-data",s))).catch(s=>console.log("Request failed",s))})};ql.initEndLabListener=function(){document.querySelector(".js-end-lab").addEventListener("click",ql.handleEndLab)};ql.handleEndLab=function(){ql.getSelectedStudentRows().filter(n=>n.dataset.running=="true").map(n=>n.dataset.endLabPath).map(n=>{fetch(n,{credentials:"include",method:"POST",headers:{"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content}}).then(status).then(json).then(()=>ql.getJson(ql.focusDataPath).then(r=>ql.publish("received-focus-data",r))).catch(r=>console.log("Request failed",r))})};ql.trainerClassroomView=function(){let t={},e={};function n(l){l.students.forEach(a=>{let c=document.querySelector(`[data-student="${a.id}"]`);c.dataset.labInstance=a.lab_instance.id,c.dataset.labState=a.lab_instance.lab_state,c.dataset.running=a.lab_instance.running,c.dataset.addTimePath=a.lab_instance.add_time_path,c.dataset.endLabPath=a.lab_instance.end_lab_path;let d=c.querySelector(".js-status");if(d.innerHTML=a.lab_instance.status_html,a.lab_instance.score_html){let f=c.querySelector(".js-score");f.innerHTML=a.lab_instance.score_html}})}function r(l){l.running_hotlabs&&l.running_hotlabs.forEach(a=>{let d=document.querySelector(`#focus_${a.id}`).querySelector(".js-lab-details");a.hotlabs_running_count>0?d.innerHTML=`${a.hotlabs_running_count} labs pre-warmed.`:d.innerHTML=""})}function s(l){t&&(t.innerHTML=l.hotlabs_status)}function o(l){if(e){e.innerHTML=l.hotlabs_button;let a=e.querySelectorAll(".mdl-button");for(let d of a)componentHandler.upgradeElement(d);let c=e.querySelectorAll(".mdl-tooltip");for(let d of c)componentHandler.upgradeElement(d)}}function u(){ql.getJson(ql.focusDataPath).then(l=>ql.publish("received-focus-data",l)).then(()=>setTimeout(u,5e3)).catch(l=>console.log("Request failed",l))}return{init:function(l){ql.focusDataPath=l,t=document.querySelector(".js-hotlabs"),e=document.querySelector(".js-hotlabs-button"),ql.subscribe("received-focus-data",s),ql.subscribe("received-focus-data",o),ql.subscribe("received-focus-data",r),ql.subscribe("received-focus-data",n),u(),document.querySelector("a.classroom__index-item.active").scrollIntoView()}}}();ql.trainerLabDragDrop=function(){function t(){$("#js-sortable").sortable({axis:"y",handle:".handle",update:function(){if($.post($(this).data("update-url"),$(this).sortable("serialize")),document.querySelectorAll(".classroom_section.visible").length>0)for(var e=document.querySelectorAll(".classroom_section.visible #classroom-table tr.focus.classroom-tr .number_field"),n=0;n<e.length;n++)e[n].innerText=n+1+"."}})}return{init:t}}();ql.classroomStudentView=function(){let t="",e="";function n(o){t=o,e=document.querySelectorAll(".js-focus-row"),ql.subscribe("received-student-data",s),r()}function r(){ql.getJson(t).then(o=>ql.publish("received-student-data",o)).then(()=>setTimeout(r,5e3)).catch(o=>console.log("Request failed",o))}function s(o){o.focuses.forEach(u=>{let l=[...e].filter(a=>a.dataset.focus==u.id).shift();l.innerHTML=u.html})}return{init:n}}();ql.classrooms=function(){return{choose_classroom_template(){let t=0,e=document.getElementById("classroom_wizard"),n={};if(e!=null)n=JSON.parse(e.getAttribute("data-translation"));else return;let r=document.getElementsByName("classroom[classroom_template_id]"),s=null;for(let u of r)if(u.checked){s=u.value;break}let o=document.querySelector(".classroom_templates").dataset.initialClassroomTemplateId;s=s||o,s!=null&&fetch("/authoring/classroom_templates/"+s+".json").then(u=>u.json()).then(u=>{if(u.duration==null||u.duration==0){t=0;let l=n.no_expected_duration;document.querySelector("#classroom_daterange .help-block").innerHTML=l}else{t=parseInt(u.duration);let l=Math.floor(t/(3600*24)),a=Math.floor(t%(3600*24)/3600),c=n.expected_duration+l+n.days+a+n.hours;document.querySelector("#classroom_daterange .help-block").innerHTML=c}ql.classrooms.init_classroom_daterangepicker(t,n),document.getElementById("classroom_template_name").innerHTML=u.name})},init_classroom_daterangepicker(t,e){if(document.getElementById("classroom_daterange")!=null){let n="";document.getElementById("start_date_in_time_zone").value!=""&&(n=document.getElementById("start_date_in_time_zone").value);let r="";document.getElementById("stop_date_in_time_zone").value!=""&&(r=document.getElementById("stop_date_in_time_zone").value),$("#classroom_daterange #start_date").flatpickr({enableTime:!0,dateFormat:"Y-m-d h:i K",defaultDate:n,defaultHour:9,minuteIncrement:15,onChange:function(s,o){document.getElementById("start_date_in_time_zone").value=o}}),$("#classroom_daterange #end_date").flatpickr({enableTime:!0,dateFormat:"Y-m-d G:i K",defaultDate:r,defaultHour:9,minuteIncrement:15,onChange:function(s,o){document.getElementById("stop_date_in_time_zone").value=o}})}},clear_search_fields(){let t=document.querySelectorAll(".classroom_edit_inputs input");for(let e of t)e.value=""}}}();ql.cloudTerminal=function(){function t(e){let n=document.querySelector("#embedded-resource");n!==null&&n.src!==e&&(n.src=e)}return{update(e){if(e===null)return;if(new URL(e).host.endsWith(".qwiklabs.com"))t(e);else throw"studentUrl must be on a subdomain of qwiklabs.com: "+e},reset(){t("about:blank")},isTerminalActive(){let e=document.querySelector("#embedded-resource");return e!==null&&e.src!==""&&e.src!=="about:blank"}}}();ql.collaboratorsEdit=function(){$collaboratorList="",$errorFeedback="";function t(){$collaboratorList=$(".js-collaborator-list"),$errorFeedback=$(".js-add-collaborator-error"),e(),n()}function e(){$(".js-add-collaborator-form").on("ajax:before",function(){$errorFeedback.empty()}).on("ajax:success",function(o,u,l,a){r(u.rendered)}).on("ajax:error",function(o,u,l,a){s(u.responseJSON)})}function n(){$(document).on("ajax:success",".js-collaborator-item",function(o,u,l,a){o.currentTarget.remove(),o.preventDefault()}).on("ajax:error",".js-delete-permission",function(o,u,l,a){s(u.responseJSON)})}function r(o){$collaboratorList.append(o),$collaboratorList.scrollTop($collaboratorList[0].scrollHeight),$collaboratorList.find(".mdl-list__item").last().addClass("is-new")}function s(o){errors=o.errors,errors.forEach(function(u){$errorFeedback.append("<p>"+u+"</p>")})}return{init:t}}();ql.course={schedule:function(){let t,e;function n(){t=document.querySelectorAll(".js-more-details"),e=document.querySelectorAll(".js-less-details"),t.forEach(o=>{o.addEventListener("click",r,!1)}),e.forEach(o=>{o.addEventListener("click",s,!1)})}function r(o){o.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-less-details").style.display="block"}function s(o){o.preventDefault(),this.style.display="none",this.parentElement.querySelector(".js-more-details").style.display="block"}return{init:n}}()};ql.course_resize_layout=function(){let e;function n(r,s,o=null,u=null,l=null){let a=document.getElementById("path_name"),c=document.getElementById("course_name"),d=document.getElementById("module_name");function f(){if(a&&(window.innerWidth>=965&&r!==null&&r!==""?a.textContent=r:a.textContent=s),c&&(window.innerWidth>=965?c.textContent=o:c.textContent=u),d)if(window.innerWidth>=965&&l!==null&&l!=="")d.textContent=l;else{let b=o;o.split(" ").length>2&&(b=o.split(" ").slice(0,2).join(" ")+"..."),d.textContent=b,d.title=o}}f();function m(){clearTimeout(e),e=setTimeout(f,250)}window.addEventListener("resize",m)}return{init:n}}();ql.initDocument=function(){function t(){let n=document.querySelector(".document-link > p > a"),r=document.querySelector(".document-iframe");n?n.addEventListener("click",e):r&&e()}function e(){fetch(`${window.location.pathname}/complete`,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).catch(n=>console.log(`Error marking document as complete: ${n}`))}return{init:t}}();ql.course_navigation=function(){function t(e){let n=document.querySelector("ql-course-outline"),r=document.querySelector("ql-progress-bar"),s=document.querySelector(".course-progress__metadata__completed"),o=document.querySelector(".course-progress__metadata__in_progress"),u=document.querySelector(".course-progress__percentage"),l=document.querySelector(".next-button");App.cable.subscriptions.create({channel:"CourseChannel",courseEnrollmentId:e},{received(a){let c=a.modules,d=a.completed,f=a.progress;n&&n.setAttribute("modules",c),r&&u&&f>0&&!d&&(r.setAttribute("progress",f),r.removeAttribute("hidden"),u.innerHTML=`${Math.floor(100*f)}%`),d&&(s&&o&&r&&(s.removeAttribute("hidden"),o.setAttribute("hidden",!0),r.setAttribute("hidden",!0)),l&&(l.disabled=!1))}})}return{init:t}}();ql.toggleAppNav=function(t=!0){let e=document.querySelector("#app-nav"),n=document.querySelector("#outline-drawer");n&&n.toggle(),e&&(t?e.show():e.hide())};ql.course_builder=function(){poller={},$progress_bar={},$error_message={},$success_message={},$course_template_link={};function t(){$progress_bar=document.getElementById("course_import_progress_bar"),$error_message=document.getElementById("error_message"),$success_message=document.getElementById("success_message"),$course_template_link=document.getElementById("course_template_link"),ql.subscribe("received-import-operation-status",o)}function e(c){poller=new ql.Poller(c,5e3,r,s),poller.start()}function n(c){c.loading="true"}function r(c){ql.publish("received-import-operation-status",c)}function s(c){console.log("Request failed",c)}function o(c){c.operation.status==="finished"&&poller.stop(),$progress_bar.progress=c.progress,c.has_errors&&$error_message.classList.add("found"),!c.has_errors&&c.progress===1&&c.path&&($success_message.classList.add("found"),$course_template_link.href=c.path)}function u(c,d,f){c.preventDefault();let m=document.getElementById("preview_url"),g="https://docs.google.com/spreadsheets/d/";f==="doc"&&(g="https://docs.google.com/document/d/"),m.href=d.value,(d.value||"").startsWith(g)?m.disabled=!1:m.disabled=!0}function l(c){let d=document.querySelector(`#${c}`);d.checkValidity()?d.submit():d.reportValidity()}function a(){document.querySelector(".sort").click()}return{init:t,poll:e,set_preview:u,submit_form:l,loading_button:n,sort:a}}();ql.course_survey=function(){window.addEventListener("keydown",function(t){["ArrowUp","ArrowDown"].indexOf(t.code)>-1&&t.view.event.preventDefault()},!1)};ql.course_survey_item_label=(()=>{let t,e;function n(){document.querySelectorAll(".js-new-item-label").forEach(o=>{o.dataset.initialized||(o.dataset.initialized="true",o.addEventListener("click",u=>{u.preventDefault();let l=o.dataset.itemId;t=document.getElementById("item-labels-"+l),e=t.firstElementChild.cloneNode(!0),r()}))})}function r(){let o=e.cloneNode(!0),u=new Date().getTime();o.id=`item-label-${u}`,o.firstElementChild.children[1].value="",o.firstElementChild.children[1].id=`item-label-value-${u}`,o.firstElementChild.children[1].setAttribute("aria-label",`item-label-value-${u}`),o.firstElementChild.children[2].setAttribute("onclick",`ql.course_survey_item_label.removeItemLabel('${o.id}')`),t.appendChild(o)}function s(o){let u=document.getElementById(o);u.parentNode.removeChild(u)}return{init:n,removeItemLabel:s}})();ql.course_survey_item_initialize=function(){document.addEventListener("click",function(){ql.course_survey_item_label.init()})};ql.credly=function(){function t(){let e=document.getElementById("credly-confirmation-form"),n=document.getElementById("href");if(e==null)return;function r(s){s.preventDefault(),$.post(e.action).done(o=>{href=o.url,n&&href&&href!=""&&(n.href=href,n.click()),window.location.href=window.location.href}).fail(o=>{window.location.href=window.location.href,console.log(o)})}e.addEventListener("submit",r)}return{init:t}}();ql.dashboardable=function(t){$.each(t,function(e,n){let r=e+"_spinner";$("#"+r).show(),$.get(window.location.href+n).done(function(s){$("#"+e).attr("data",JSON.stringify(s))}).fail(function(s){console.error("Failed to fetch popular data",s)}).always(function(){$("#"+r).hide()})})};ql.datePicker=function(){function t(e){let n=e.split("_")[0];$(".date-picker").flatpickr({locale:n}),$(".date-picker-clear").click(function(r){let s=document.getElementById(r.target.dataset.target);s&&s._flatpickr&&s._flatpickr.clear()})}return{init:t}}();ql.discovery=function(){function t(){e(".in-progress-cards .js-content-card","in-progress"),e(".favorite-cards .js-content-card","favorite"),e(".curated-cards .js-content-card","curated"),e(".featured-cards .js-content-card","featured"),e(".upcoming-cards .js-content-card","upcoming"),e(".popular-cards .js-content-card","popular")}function e(n,r){document.querySelectorAll(n).forEach(s=>{s.addEventListener("click",()=>{let{id:o,name:u,type:l,level:a,path:c}=s.dataset;ql.track("discover_catalog_item",{label:r,id:o,name:u,type:l,level:a,path:c})})})}return{init:t}}();ql.editV2Lab=function(){return{gdoc_or_markdown(t){t=="Google Doc"?(document.querySelector(".instructions_google_doc").style.display="block",document.querySelector(".instructions_markdown").style.display="none"):(document.querySelector(".instructions_google_doc").style.display="none",document.querySelector(".instructions_markdown").style.display="block")},switch_resource(t){t=="video"||t=="link"?(document.querySelector(".resource_video_link").style.display="block",document.querySelector(".resource_file").style.display="none"):(document.querySelector(".resource_video_link").style.display="none",document.querySelector(".resource_file").style.display="block")},switch_lab_resource(t,e){let n=document.getElementById("lab_lab_resources_attributes_0_resource_type"),r=document.querySelector("#lab_resource_variant"),s=r.options;if(Array.from(s).forEach(l=>l.remove(r)),JSON.parse(n.getAttribute("data-variants"))[t].forEach((l,a)=>{if(!(t=="gcp_project"&&(l=="gcpedu"||l=="gcpasl"))){let c=document.createElement("option");c.text=l,r.options.add(c),(l==e||e=="nil"&&a==0)&&(c.selected=!0)}}),t=="gcp_project"||t=="aws_account"){let l=document.querySelector("#resource_config_allowed_locations"),a=l.options;if(l.tagName=="SELECT"){Array.from(a).forEach(f=>f.remove(l));let c=JSON.parse(n.getAttribute("data-allowed-locations"));JSON.parse(n.getAttribute("data-all-allowed-locations"))[t].forEach(f=>{let m=document.createElement("option");m.text=f,l.options.add(m)}),$(document).find("#resource_config_allowed_locations").val(c).trigger("chosen:updated")}}resource_display_settings={gcp_project:{show_script:!0,show_script_custom_properties:!0,show_custom_ssh:!0,show_allow:!0,show_constraint:!0},linux_terminal:{show_script:!0},windows_vm:{show_script:!0},ide:{show_script:!0,show_student:!0},gcp_user:{show_roles_projects:!0},aws_account:{show_script:!0,show_policy:!0,show_allow:!0},google_workspace_domain:{},looker_instance:{show_script:!0,show_looker_cloud_roles:!0},cloud_terminal:{show_script:!0,show_looker_cloud_roles:!0},azure_resource_group:{show_script:!0,show_script_custom_properties:!0},azure_user:{show_roles_resource_groups:!0},jupyter_notebook:{show_script:!0,show_student:!0}},u(resource_display_settings[t]);function u({show_script:l=!1,show_script_custom_properties:a=!1,show_student:c=!1,show_custom_ssh:d=!1,show_roles_projects:f=!1,show_roles_resource_groups:m=!1,show_looker_cloud_roles:g=!1,show_policy:b=!1,show_allow:y=!1,show_constraint:L=!1}={}){let j=document.querySelector(".script_fields"),P=j.querySelectorAll("input"),C=document.querySelector(".student_files_fields"),p=C.querySelectorAll("input"),T=document.querySelectorAll(".custom_fields"),w=Array.from(T).reduce((_,S)=>_.concat(Array.from(S.querySelectorAll("input")),Array.from(S.querySelectorAll("select"))),[]),M=document.querySelector(".ssh_key_user"),z=M.querySelector("select"),U=document.querySelector(".allowed_locations"),F=U.querySelector("select"),W=document.querySelector(".allowed_locations_constraint"),V=W.querySelector("select"),B=document.querySelector("#roles_fields_project"),te=[].concat(Array.from(B.querySelectorAll("input")),Array.from(B.querySelectorAll("select"))),A=document.querySelector("#roles_fields_resource_group"),D=[].concat(Array.from(A.querySelectorAll("input")),Array.from(A.querySelectorAll("select"))),J=document.querySelector(".looker_cloud_roles_fields"),Y=[].concat(Array.from(J.querySelectorAll("input")),Array.from(J.querySelectorAll("select"))),ue=document.querySelectorAll(".policy_fields"),q=Array.from(ue).reduce((_,S)=>_.concat(Array.from(S.querySelectorAll("input")),Array.from(S.querySelectorAll("textarea"))),[]);j.style.display=l?"block":"none",P.forEach(_=>_.disabled=!l),C.style.display=c?"block":"none",p.forEach(_=>_.disabled=!c),T.forEach(_=>_.style.display=a?"block":"none"),w.forEach(_=>_.disabled=!a),M.style.display=d?"block":"none",z.disabled=!d,B.style.display=f?"block":"none",te.forEach(_=>_.disabled=!f),A.style.display=m?"block":"none",D.forEach(_=>_.disabled=!m),J.style.display=g?"block":"none",Y.forEach(_=>_.disabled=!g),ue.forEach(_=>_.style.display=b?"block":"none"),q.forEach(_=>_.disabled=!b),U.style.display=y?"block":"none",F&&(F.disabled=!y),W.style.display=L?"block":"none"}},hide_document(t){script=document.getElementById(t),script&&(script.style.display="none")},update_script_state(t,e,n){let r=document.getElementById(t);if(r.value=e,ql.editV2Lab.hide_document(n),t.includes("student_files_")&&!document.getElementById("lab_lab_resources_attributes_0_student_files").value){let o=Array.from(document.getElementById("student_files").children).filter(u=>u.type=="hidden");document.getElementById("resource_config_student_files_all").value=o.reduce((u,l)=>u||l.value=="true",!1)}},add_custom_properties(t){let e=document.createElement("div");e.className="form-row";let n=Date.now(),r=`${t}_custom_property_${n}`;e.setAttribute("id",r);let s=document.createElement("div");s.classList.add("control-group","text");let o=document.createElement("Label");o.className="label",o.setAttribute("for","key"),o.innerHTML="Key";let u=document.createElement("input");u.className="input",u.setAttribute("id","key"),u.setAttribute("required",!0),u.setAttribute("name",`resource_config[${t}_custom_properties][${n}][key]`),s.appendChild(o),s.appendChild(u);let l=document.createElement("div");l.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for",`resource_config_${t}_custom_properties_${n}_value`),a.innerHTML="Reference / Value";let c=document.createElement("Select"),d=document.getElementById("lab_lab_resources_attributes_0_start_script");JSON.parse(d.getAttribute("data-options")).forEach(T=>{let w=document.createElement("option");w.text=T,c.appendChild(w)});let m=`resource_config[${t}_custom_properties][${n}][value]`,g=`resource_config_${t}_custom_properties_${n}_value`;c.className="input",c.setAttribute("id",g),c.setAttribute("required",!0),c.setAttribute("name",m),l.appendChild(a),l.appendChild(c);let b=document.createElement("div");b.classList.add("control-group","text");let y=document.createElement("Label");y.className="label",y.setAttribute("for","property_type"),y.innerHTML="Type";let L=document.createElement("Select");L.className="input",L.setAttribute("id","property_type"),L.setAttribute("name",`resource_config[${t}_custom_properties][${n}][type]`),L.setAttribute("onchange",`ql.editV2Lab.switch_custom_property_type('${g}', '${m}', this.value)`);let j=document.createElement("option");j.text="reference",L.appendChild(j);let P=document.createElement("option");P.text="value",L.appendChild(P),b.appendChild(y),b.appendChild(L);let C=document.createElement("ql-icon-button");C.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),C.setAttribute("icon","delete"),C.classList.add("link--danger"),e.appendChild(s),e.appendChild(l),e.appendChild(b),e.appendChild(C),document.getElementById(`${t}_add_custom_property`).before(e)},delete_element(t){let e=document.getElementById(t);e.parentNode.removeChild(e)},set_duration(t,e,n){let r=document.getElementById(t),s=document.getElementById(e),o=document.getElementById(n);o.value=s.value*60||r.value*60*1.5},switch_positions(t,e){let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields");r.forEach((s,o)=>s.children[2].value=o);for(let s=0;s<r.length;s+=1)if(r[s].querySelector(`#lab_environment_outputs_attributes_${t}_position`)!=null){if(s==0&&e==-1||s==r.length-1&&e==1)break;r[s].children[2].value=s+e,r[s+e].children[2].value=s,e==-1?r[s].parentNode.insertBefore(r[s],r[s+e]):e==1&&r[s].parentNode.insertBefore(r[s+e],r[s]);break}},add_output(t){document.getElementById("add_output_button").click();let r=document.querySelector(".edit_lab").querySelectorAll("form > .fields"),s=r[r.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");s.value=t},switch_step_positions(t,e){let r=document.querySelector(".edit_assessment_manual").getElementsByClassName("fields"),o=document.querySelector("table").querySelectorAll("tr");for(let u=0;u<r.length;u+=1)if(r[u].querySelector(`#assessment_manual_steps_attributes_${t}_step_no`)!=null){if(u==0&&e==-1||u==r.length-1&&e==1)break;r[u].children[1].value=u+1+e,r[u+e].children[1].value=u+1,o[u+1].children[0].innerHTML=u+1+e,o[u+1+e].children[0].innerHTML=u+1,e==-1?(r[u].parentNode.insertBefore(r[u],r[u+e]),o[u+1].parentNode.insertBefore(o[u+1],o[u+1+e])):e==1&&(r[u].parentNode.insertBefore(r[u+e],r[u]),o[u+1].parentNode.insertBefore(o[u+1+e],o[u+1]));break}},add_student_message(t){let e=document.createElement("div");e.classList.add("form-row","form-row--max_width");let n=Date.now(),r=`student_message_${n}`;e.setAttribute("id",r);let s=document.createElement("div");s.classList.add("control-group","text");let o=document.createElement("Label");o.className="label",o.setAttribute("for",`locales[${t}][${n}][message_id]`),o.innerHTML="Message Id",s.appendChild(o);let u=document.createElement("Input");u.className="input",u.setAttribute("id",`locales[${t}][${n}][message_id]`),u.setAttribute("name",`locales[${t}][${n}][message_id]`),u.setAttribute("required",!0),s.appendChild(u),e.appendChild(s);let l=document.createElement("div");l.classList.add("control-group","text");let a=document.createElement("Label");a.className="label",a.setAttribute("for",`locales[${t}][${n}][message]`),a.innerHTML="Message",l.appendChild(a);let c=document.createElement("Input");c.className="input",c.setAttribute("id",`locales[${t}][${n}][message]`),c.setAttribute("name",`locales[${t}][${n}][message]`),c.setAttribute("required",!0),l.appendChild(c),e.appendChild(l);let d=document.createElement("ql-icon-button");d.setAttribute("onclick",`ql.editV2Lab.delete_element('${r}')`),d.setAttribute("icon","delete"),d.classList.add("text--error"),e.appendChild(d),document.getElementById("add-student-message").before(e)},add_default_outputs(){let t=document.getElementById("default_button"),e=document.getElementById("add_output_button"),n={console_url:1,username:2,password:3,project_id:4},r={console_url:console_url_label,username:username_label,password:password_label,project_id:project_id_label},s=JSON.parse(t.getAttribute("data-options"));s.sort((o,u)=>{let l=o.split(".")[1],a=u.split(".")[1],c=n[l]||5,d=n[a]||5;return c-d}),s.forEach(o=>{let u=o.split(".")[1];if(Object.keys(n).includes(u)){e.click();let l=document.querySelector(".edit_lab"),a=l.querySelectorAll("form > .fields"),c=l.querySelectorAll("textarea"),d=a[a.length-1].querySelector(".lab_environment_outputs_reference").querySelector("input");d.value=o;let f=c[c.length-1];f.value=r[u]}})},switch_custom_property_type(t,e,n){let r=document.getElementById(t),s=null;if(n=="value")s=document.createElement("input");else if(n=="reference"){let o=document.getElementById("lab_lab_resources_attributes_0_start_script"),u=JSON.parse(o.getAttribute("data-options"));s=document.createElement("Select"),u.forEach(l=>{let a=document.createElement("option");a.text=l,s.appendChild(a)})}s!=null&&(s.className="input",s.setAttribute("id",t),s.setAttribute("required",!0),s.setAttribute("name",e),r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r))}}}();ql.exam=function(){function t(){setInterval(()=>{$.get(`${window.location.pathname}/status`).fail(()=>window.location.reload())},5e3),document.querySelector("ql-quiz").addEventListener("submit",()=>window.location.reload())}return{init:t}}();ql.favoriting=function(){function t(){document.querySelectorAll(".js-favorite-button").forEach(u=>{u.addEventListener("click",e,!1)})}function e(o){o.preventDefault(),o.stopImmediatePropagation(),n.call(this),s.call(this)}function n(){let o=r(this.dataset.type),u=this.dataset.name;this.href.includes("unfavorite")?ql.track("clicked_unfavorite_button",{type:o,label:u}):ql.track("clicked_favorite_button",{type:o,label:u})}function r(o){let u;switch(o){case"CatalogItem":u="Lab";break;case"ClassroomTemplate":u="Course";break;default:u=o}return u}function s(){let o=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(o).then(me).then(ye).then(u=>{if(console.log(u),u.alert)console.error(u.alert);else{this.setAttribute("href",u.path),this.setAttribute("tip",u.tooltip),this.setAttribute("aria-label",u.tooltip),this.innerHTML=u.icon;let l=document.getElementById(this.for);l&&(this.tip.toLowerCase().includes("add")?l.style.display="none":l.style.display="inline-block"),$card=this.closest(".js-content-card"),$card&&$card.classList.toggle("is-unfavorited")}})}return{init:t}}();ql.filter={filter:function(){$form={};function t(){$form=document.querySelector(".js-filter-form"),$form&&($inputs=$form.querySelectorAll("input"),$inputs.forEach(o=>o.addEventListener("click",e)))}function e(o){let u="any",l=o.currentTarget.closest(".js-list-item"),a=l.querySelector(`input[value="${u}"]`);o.currentTarget.value===u?l.querySelectorAll(`input:checked:not([value="${u}"])`).forEach(d=>{s(d)}):a.checked&&s(a),l.querySelectorAll("input:checked").length||r(a),numActive=l.querySelectorAll(`input:checked:not([value="${u}"])`).length;let c=numActive?`(${numActive})`:"";l.querySelector(".active-filter-number").textContent=c,ql.track(this.checked?"checked_filter":"unchecked_filter",{label:this.id}),ql.searchFilter()}function n(o){return o.closest(".mdl-checkbox")}function r(o){n(o).classList.add("is-checked"),o.checked=!0}function s(o){n(o).classList.remove("is-checked"),o.checked=!1}return{init:t}}()};ql.searchFilter=function(){let t=document.querySelector(".js-filter-form"),e=document.querySelector(".js-search-form");return t?(e&&(t.querySelector("input[name='keywords']").value=e.querySelector("input[name='keywords']").value,t.querySelector("input[name='locale']").value=e.querySelector("input[name='locale']").value),document.querySelector(".js-custom-filter-form")||t.submit()):e&&e.submit(),!1};ql.filterOptions=function(){function t(n,{type:r="gteq",clearOtherDateField:s=!0,hideCustomDateRange:o=!0}={}){o&&e(!1);let u=document.querySelector("#query_gteq"),l=document.querySelector("#query_lteq");r==="gteq"?(u.value=n,s&&(l.value="")):(l.value=n,s&&(u.value="")),u.form.submit()}function e(n){let r=document.querySelector("#filters_date_range");r.style.display=n?"flex":"none"}return{selectDateAndSubmit:t,showCustomDateRange:()=>e(!0)}}();ql.updateStepNumbers=function(t){var e=1;$(".step_fields").each(function(n){$(this).is(":visible")&&($(this).find(".steps").attr("value",e),e=e+1)})};ql.switchPositions=function(t,e){var n=0,r=-1;if($(".fields:not(.fields[style=display\\:\\ none\\;])").each(function(u){t==$(this).find("button").first().attr("step_index")&&(r=n),n++}),r+e>=0&&r+e<n){var s=$(".fields:not(.fields[style=display\\:\\ none\\;]):eq("+r+")"),o=$(".fields:not(.fields[style=display\\:\\ none\\;]):eq("+(r+e)+")");e==-1?s.insertBefore(o):e==1&&o.insertBefore(s),ql.updateStepNumbers(!1)}};ql.switchPositionsAT=function(t,e){var n=0,r=-1;let s=$(".fields:not(.fields[style=display\\:\\ none\\;])");if(s=s.filter((l,a)=>$(a).children().attr("class")!="locales_fields"),s.each(function(l){t==$(this).find("button").first().attr("step_index")&&(r=n),n++}),r+e>=0&&r+e<n){var o=$(s[r]),u=$(s[r+e]);e==-1?o.insertBefore(u):e==1&&u.insertBefore(o),ql.updateStepNumbers(!1)}};ql.resetDestroys=function(){var t=$("[name*=\\[_destroy\\]]");t.each(function(e){this.value=!1})};ql.updateStudentMessages=function(t,e,n,r){let s=t.split("_")[2],o=$(t),l=$(e).find("#add-student-message");o.val()==""&&o.val([]);let a=JSON.parse(o.val()),c="";if(n.endsWith("new")){let f=Date.now();update_0="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'update_0')",update_1="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'update_1')",remove="ql.updateStudentMessages('#sm_step_"+s+"', '#sm_tables_"+s+"', '#sm_table_"+s+"_"+f+"', 'delete')",tr_one="<td>Message ID</td><td>Message</td><td></td>",td_one="<td><input type='text' id='message_id'/></td>",td_two="<td><textarea rows=1 id='message'></textarea></td>",td_three="<td><button class='btn btn-link btn-link-qwiklab' type='button'><i class='icon-trash'></i></button></td>",tr_two=td_one+td_two+td_three,c=$("<table id='sm_table_"+s+"_"+f+"'><tr>"+tr_one+"</tr><tr>"+tr_two+"</tr></table>"),c.find("#message_id").attr("onchange",update_0),c.find("#message").attr("onchange",update_1),c.find("button").attr("onclick",remove),c.insertBefore(l)}else c=$(n);let d=c.index();switch(r){case"delete":c.remove(),a.splice(d,1);break;case"add":a.push(["",""]);break;case"update_0":a[d][0]=c.find("#message_id").val();break;case"update_1":a[d][1]=c.find("#message").val();break;default:}o.val(JSON.stringify(a))};ql.game=(()=>{function t(e){let n=document.querySelector(".js-lab-leaderboard");e==null||n==null||(n.players=JSON.parse(e))}return{updateLabLeaderboard:t}})();ql.inviteMembers=function(){$toast="",$toastMessage="",$toastLoader="",poller={};function t(){$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-operation-status",r)}function e(s){poller=new ql.Poller(s,1e4,n),poller.start()}function n(s){ql.publish("received-operation-status",s)}function r(s){if(s.status==="finished")if(poller.stop(),$toastLoader.classList.remove("is-visible"),s.succeeded)window.location.reload();else{let o=JSON.parse(s.result);ql.showFlash("warn",o.message),$toast.classList.remove("is-visible")}else $toastLoader.classList.contains("is-visible")||$toastLoader.classList.add("is-visible")}return{init:t,poll:e}}();ql.customFilter=function(){$enableCheckbox="";function t(){$enableCheckbox=document.querySelector(".js-enable-custom-filter"),$enableCheckbox.addEventListener("click",e)}function e(){enable=$enableCheckbox.checked===!0,$.post(`${window.location.pathname}/toggle_enable`,{enable})}return{init:t}}();ql.groupForm=function(){function t(e,n){let r=document.getElementById(e),s=document.getElementById(n);if(r&&s){let o=!1;r.addEventListener("change",u=>{if(s.value===""||!o){let l=u.currentTarget.value;s.value=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}),s.addEventListener("change",u=>{o=!0})}}return{init:t}}();ql.resourcesForm=function(){function t(){let n=document.getElementById("add-translations-button");n&&n.addEventListener("click",r=>{n.classList.toggle("hidden",!0),document.querySelectorAll(".non-default-locale-form").forEach(o=>o.classList.toggle("hidden",!1))})}function e(n,r){let s=document.getElementById(`${n}-link-button`),o=document.getElementById(`${n}-link-input-div`),u=document.getElementById(`${n}-link-input`),l=document.getElementById(`${n}-file-button`),a=document.getElementById(`${n}-file-input-div`),c=document.getElementById(`${n}-file-input`),d=document.getElementById(`${n}-file-delete-button`),f=document.getElementById(`${n}-file-preview`),m=document.getElementById(`${n}-destroy`);s&&o&&a&&c&&s.addEventListener("click",g=>{a.classList.toggle("hidden",!0),c.value=null,c.required=!1,o.classList.toggle("hidden",!1),u.required=r,m.value=!0}),l&&a&&o&&u&&l.addEventListener("click",g=>{o.classList.toggle("hidden",!0),u.value=null,u.required=!1,a.classList.toggle("hidden",!1),c.required=r,m.value=!0}),d&&f&&c&&m&&d.addEventListener("click",g=>{f.classList.toggle("hidden",!0),c.value=null,c.required=r,c.classList.toggle("hidden",!1),m.value=!0}),u&&m&&u.addEventListener("change",g=>{m.value=u.value==""}),c&&m&&c.addEventListener("change",g=>{m.value=c.value==""})}return{init:t,initLocale:e}}();ql.reorderResources=function(){function t(){let l=document.getElementById("reorder-resources-button"),a=document.getElementById("reorder-save-button"),c=document.getElementById("reorder-cancel-button");l&&a&&c&&(ql.sortable.init(".resource-position-field",e),$(".js-sortable").sortable("disable"),l.addEventListener("click",d=>{n(),u(),r()}),a.addEventListener("click",d=>{n(),u(),s()}),c.addEventListener("click",d=>{n(),u(),s(!0)}))}function e(){o(!1)}function n(){let l=document.querySelectorAll(".resources-page-action");l&&l.forEach(a=>a.toggleAttribute("disabled"))}function r(){document.querySelectorAll(".resource-drag-icon").forEach(l=>l.classList.toggle("hidden",!1)),$(".js-sortable").sortable("enable")}function s(l=!1){document.querySelectorAll(".resource-drag-icon").forEach(a=>a.classList.toggle("hidden",!0)),$(".js-sortable").sortable("disable"),l&&($(".js-sortable").sortable("cancel"),o(!0))}function o(l){let a=document.getElementById("reorder-save-button");a&&a.toggleAttribute("disabled",l)}function u(){let l=document.getElementById("reorder-save-button"),a=document.getElementById("reorder-cancel-button");l&&a&&(l.classList.toggle("hidden"),a.classList.toggle("hidden"))}return{init:t}}();ql.header={myAccount:function(){let t,e;function n(){t=document.querySelector(".js-my-account-menu"),e=document.querySelector(".js-main"),t&&($myAccountButton=document.querySelector(".js-my-account-button"),$myAccountButton.addEventListener("click",r,!1));let s=document.querySelector(".js-page-banner"),o=document.querySelector(".js-close-banner");s&&o&&o.addEventListener("click",()=>{s.remove()})}function r(s){t.classList.toggle("is-open")?(ql.track("opened_my_account_menu"),e.addEventListener("click",r,!1)):e.removeEventListener("click",r,!1)}return{init:n}}()};(t=>{function e(n,r){this.instructionId=n,this.refreshPage=r,this.refreshing=!1,this.refresh=function(){if(this.refreshing){console.log("Already polling. Ignoring this refresh.");return}this.startRefreshing(),$.post("/authoring/instructions/"+this.instructionId+"/refresh.json").done(()=>{setTimeout(()=>this.pollStatus(),2e3)}).fail(s=>{console.log(s),this.stopRefreshing()})},this.pollStatus=function(){t.getJson("/instructions/"+this.instructionId+"/status.json").then(s=>{s.state=="failed"?(t.showFlash("error",s.message),this.stopRefreshing()):s.state=="completed"?(t.showFlash("notice",s.message),this.refreshPage?window.location.reload():this.stopRefreshing()):setTimeout(()=>this.pollStatus(),5e3)}).catch(s=>{this.stopRefreshing(),console.log(s)})},this.startRefreshing=function(){let s=this.instructionId;this.refreshing=!0,$(".refresh-instruction-spinner-"+s).removeClass("hidden"),$(".refresh-instruction-button-"+s).addClass("hidden")},this.stopRefreshing=function(){let s=this.instructionId;this.refreshing=!1,$(".refresh-instruction-spinner-"+s).addClass("hidden"),$(".refresh-instruction-button-"+s).removeClass("hidden")}}t.refreshInstruction=function(n,r){new e(n,r).refresh()}})(ql);ql.instructionVariables=function(){return{update(t){document.querySelectorAll("ql-variable,ql-code-block").forEach(e=>e.load(t))},reset(){document.querySelectorAll("ql-variable,ql-code-block").forEach(t=>t.load())}}}();ql.courseOutline=function(){function t(){let e=document.querySelector(".course-instructor-outline-drawer"),n=e.querySelector(".outline__course").querySelector(".active").parentElement,r=n.classList,s;r.contains("course-header")?s=n.closest(".outline__course"):r.contains("module-header")?s=n.closest(".outline__module"):r.contains("activity-header")&&(s=n.closest(".outline__activity")),s&&document.body.clientHeight/2<s.offsetTop-n.offsetHeight&&(e.scrollTop=s.offsetTop-n.offsetHeight)}return{init:t}}();ql.jumpContent=function(){function t(){document.addEventListener("jumpContent",e)}function e(n){let r=document.getElementById("jump-content");r.focus(),r.setAttribute("tabindex","0")}return{init:t}}();initLaunchWithSubscriptionButtonListener=function(){$(".js-launch-with-subscription-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(1),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithCreditsButtonListener=function(){$(".js-launch-with-credits-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(1),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLaunchWithAccessCodeButtonListener=function(){$(".js-launch-with-access-code-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(1),submitLabAccessForm())})};initLaunchButtonListener=function(){$(".js-launch-button").click(function(){$(this).attr("disabled")||($(".js-launch-with-credits-input").val(0),$(".js-launch-with-subscription-input").val(0),$(".js-launch-with-access-code").val(0),submitLabAccessForm())})};initLabAccessFormListener=function(){$(".js-lab-access-form").on("ajax:success",function(t,e,n,r){ql.labRun.startLab({accessSuccess:!0})}).on("ajax:error",function(t,e,n,r){$(".js-access-code input").val(""),alertLabAccessError(e.responseText),ql.labControlPanel.reset()}).on("ajax:complete",function(){enableLabAccessModalButtons()})};initAutoTabAccessCode=function(){let t=0;$(".js-access-code-input").on("keyup",function(e){e.keyCode===8&t===0&&$(this).prev(".js-access-code-input").focus(),t=this.value.length}),$(".js-access-code-input").on("input",function(e){this.value.length===this.maxLength&&($(this).next(".js-access-code-input").focus(),t=0)})};submitLabAccessForm=function(){disableLabAccessModalButtons(),$(".js-lab-access-form").submit(),$("#lab-access-modal").modal("hide"),ql.labControlPanel.setStarting()};alertLabAccessError=function(t){$("#lab-access-modal").modal("hide"),$(".js-alert-message").html(t),$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")};disableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!0)};enableLabAccessModalButtons=function(){$(".js-lab-access-modal-button").attr("disabled",!1)};initLabAccessModal=function(){initLaunchWithSubscriptionButtonListener(),initLaunchWithCreditsButtonListener(),initLaunchWithAccessCodeButtonListener(),initLaunchButtonListener(),initLabAccessFormListener(),initAutoTabAccessCode()};ql.labActivityTracking={reset(){document.querySelectorAll("ql-activity-tracking,ql-activity-tracking-ch").forEach(t=>t.reset())}};ql.labAlert={alertMessage(t,e=!0){let n=document.getElementById("alert-snackbar");e&&n.setAttribute("error",!0),n.innerHTML=t,n.open()},alertHttpError(t){t.response.text().then(e=>{ql.labAlert.alertMessage(e)})}};ql.labAssessment=(()=>{let t="/feedback/student/lab/main.html?token=qwiklabs",e="/work/main.ipynb?token=qwiklabs",n="/api/contents",r=(l,a)=>l&&a&&l.src.endsWith(e),s=(l,a)=>{let c=document.querySelector("#jupyter-feedback-frame"),d="&cachebuster="+new Date().getTime().toString(),m=l.src.split("qwiklabs.com")[0]+"qwiklabs.com"+n+t+d;$.get(m).done(function(g){c.srcdoc=g.content,a.open()}).fail(function(g){console.error("Failed to fetch jupyter feedback.",g)})},o=()=>{let l=document.querySelector("#embedded-resource"),a=document.querySelector("#jupyter-feedback-modal");r(l,a)&&s(l,a)};var u=function(l,a,c){c.loading=!0;var d=$.get("/assessments/run_step.json?id="+l+"&step="+a).done(function(f){ql.labAssessment.update(f),int_no=parseInt(a)-1;let m=f.completion_only?"":`Check complete. Points earned: ${f.step_scores[int_no]}. Message: `;f.step_scores[int_no]==f.step_points[int_no]?(m+=`${f.student_messages[int_no]||"Step is complete."}`,ql.labAlert.alertMessage(m,isError=!1)):(m+=`${f.student_messages[int_no]||"It doesn't look like you've completed this step yet. Try again."}`,ql.labAlert.alertMessage(m)),o()}).fail(function(f){console.error("Failed to update assessment",f)}).complete(function(f){c.loading=!1})};return{init(){let l=new hallofmirrors.FocusTrap($(".js-lab-assessment-panel")[0]);document.addEventListener("runAssessmentStepSuccess",o),$(".js-open-lab-assessment-panel").click(function(){$(".js-lab-assessment-panel").addClass("is-open"),l.trapFocus()}),$(".js-close-lab-assessment-panel").click(function(){$(".js-lab-assessment-panel").removeClass("is-open"),l.releaseFocus()}),$(".js-show-run-step-button").on("click",function(){var a=ql.labData.getLabInstanceId(),c=$(this).attr("step_no");a!==void 0&&ql.labData.isRunning()&&u(a,c,this)})},update(l){if(!(typeof l>"u"||typeof l.total_score>"u"||l.total_score.length===0)){var a="";for(l.completion_only?a=l.completed_steps+"/"+l.total_steps:a=l.total_score+"/"+l.perfect_score,$(".js-lab-assessment-total-score").html(a),i=1;i<=parseInt(l.total_steps);i++)l.completion_only?l.step_complete[i-1]?$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","check"):$(".js-assessment-step-score-"+i+" ql-icon:first-child").setAttribute("icon","close"):$(".js-assessment-step-score-"+i).html(l.step_scores[i-1])}},reset(){var l=$(".js-lab-assessment-total-score").html();typeof l>"u"||(l=l.replace(/.*\//,"\u2014/"),$(".js-lab-assessment-total-score").html(l),$('*[class^="js-assessment-step-score"]').html("\u2014"))}}})();var jr=or(Pr());initFakeAlertCloseListener=function(){$(".js-alert-close").click(function(){$(".js-alert").hide()})};initCopyCode=function(){$("pre code").each(function(t,e){$(e).after('<button class="button button--text button--small copy-button js-copy-button-'+t+'"><ql-icon>content_copy</ql-icon></button>');let n=document.getElementsByClassName("no-select")[0];var r=new jr.default(".js-copy-button-"+t,{target:function(s){return n&&n.classList.remove("no-select"),s.previousElementSibling}});r.on("success",function(s){n&&n.classList.add("no-select"),document.getSelection().removeAllRanges(),$(".js-copy-button-"+t).attr("title",trans.copied).tooltip("fixTitle").tooltip("show")}),r.on("error",function(s){n&&n.classList.add("no-select"),document.getSelection().removeAllRanges();var o="";/iPhone|iPad/i.test(navigator.userAgent)?o=trans.no_support:/Mac/i.test(navigator.userAgent)?o=trans.mac_press:o=trans.windows_press,$(".js-copy-button-"+t).attr("title",o).tooltip("fixTitle").tooltip("show")}),$(".js-copy-button-"+t).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})})};initImageZoom=function(){$(".js-lab-content img").click(function(t){var e=$(this).attr("src");$("body").append('<div class="lab-content__image-overlay js-zoomed-image"><img class="lab-content__image" src='+e+" /></div>").find(".js-zoomed-image").click(function(n){$(".js-zoomed-image").remove()})})};initPrettyPrint=function(){$(function(){prettyPrint()})};initCodeTabs=function(){let t=Array.from(document.querySelectorAll("ql-code"));t.forEach(e=>e.addEventListener("tabchange",n=>t.filter(r=>r!==e).forEach(r=>r.setLanguage(n.detail.newTab.language))))};initLabContent=function(){initFakeAlertCloseListener(),initCopyCode(),initImageZoom(),initPrettyPrint(),initCodeTabs()};ql.labControlPanel=(()=>{let t;return{init(){t=document.querySelector(".js-lab-control-panel"),t.addEventListener("clickedStartLab",()=>requestStartLab()),document.getElementById("js-are-you-sure-button").addEventListener("click",()=>{ql.labRun.stopLab(),document.getElementById("js-lab-are-you-sure-dialog").close()});function n(){document.getElementById("js-lab-are-you-sure-dialog").open()}t.addEventListener("clickedStopLab",n),$(".js-end-lab-button").on("clickedStopLab",n);let r=document.querySelector("#toggle-lab-control-panel");r&&r.addEventListener("click",()=>{t.classList.toggle("toggled")})},update(e){t.labControlButton=e.labControlButton,t.labTimer=e.labTimer,t.billingLimitRemainder=e.billingLimitRemainder,t.provisioning=e.provisioning,t.provisioningSecondsRemaining=e.provisioningSecondsRemaining,t.labDetails=e.labDetails,t.connectionFiles=e.connectionFiles},reset(){t.labControlButton={running:!1,pending:!1},t.billingLimitRemainder=ql.labData.getLabBillingLimit(),t.provisioning=!1,t.provisioningSecondsRemaining=null,t.connectionFiles=[],t.labDetails=[],t.labTimer={ticking:!1,secondsRemaining:ql.labData.getLabDuration()};for(let e of document.querySelectorAll(".js-end-lab-button-container"))e.classList.add("hidden");this.hideV2Recaptcha()},setStarting(){t.labControlButton={running:!1,pending:!0}},setStopping(){t.labControlButton={running:!0,pending:!0}},setRunning(){t.labControlButton={running:!0,pending:!1}},showV2Recaptcha(){$("#recaptcha-v2-start-lab").removeClass("hidden")},hideV2Recaptcha(){$("#recaptcha-v2-start-lab").addClass("hidden")},addRecaptchaErrorHandler(){window.addEventListener("unhandledrejection",e=>{e.reason.stack.indexOf("recaptcha")>-1&&ql.labControlPanel.showV2Recaptcha()})}}})();window.expireV2Token=function(){ql.labData.setRecaptchaV2Token(void 0)};window.recaptchaComplete=function(t){ql.labData.setRecaptchaV2Token(t),ql.labRun.startLab({accessSuccess:!1})};requestStartLab=function(t){if(!ql.labData.isRecaptchaEnabled()||ql.labData.getRecaptchaV2Token()){ql.labRun.startLab({accessSuccess:!1});return}if(ql.track("clicked_start_lab_button",ql.labData.getAnalyticsPayload()),!document.getElementById("g-recaptcha-response-data-start-lab")){ql.labControlPanel.showV2Recaptcha();return}$.ajaxSetup({timeout:3e3}),executeRecaptchaForStartLabAsync().then(n=>{$.post("/focuses/verify_v3_recaptcha",{recaptchaV3Token:n,id:ql.labData.getFocusId(),parent:ql.labData.getParent()}).done(r=>{r.is_verified?ql.labRun.startLab({accessSuccess:!1}):ql.labControlPanel.showV2Recaptcha()}).error(()=>ql.labControlPanel.showV2Recaptcha())})};ql.labData=function(){let t,e,n,r;return{clearLabInstanceId(){e=null},getLabInstanceId(){return e},setLabInstanceId(s){e=s},getAnalyticsPayload(){return t.analyticsPayload},getLabBillingLimit(){return Number(t.labBillingLimit)},getLabDuration(){return Number(t.labDuration)},getFocusId(){return t.focusId},getParent(){return t.parent},getLearningPlanId(){return t.learningPlanId},getQlcampaign(){return t.qlcampaign},isRecaptchaEnabled(){return t.recaptchaEnabled!=null},getRecaptchaV3Token(){return n},setRecaptchaV3Token(s){n=s},getRecaptchaV2Token(){return r},setRecaptchaV2Token(s){r=s},isOrganizationLicenseRequired(){return t.organizationLicenseRequired!=null},hasCredits(){return t.credits!=null&&t.credits>0},isPaymentRequired(){return t.paymentRequired!=null},isWarningGiven(){return t.warningGiven!=null},isRunning(){return e!=null},init(){t=$(".js-lab-state").data(),e=t.labInstanceId}}}();ql.editRows=function(){let t="",e="",n=[];function r(){t=document.querySelectorAll(".js-edit-row"),e=document.querySelector(".js-edit-title"),n=[e,...t],t.forEach(a=>a.addEventListener("click",o)),e.addEventListener("click",l),$errorFields=document.querySelectorAll(".has-error"),$errorFields.forEach(a=>{$row=a.closest(".js-edit-row"),u($row)}),$inputs=document.querySelectorAll(".js-lab-details input"),$inputs.forEach(a=>{a.addEventListener("keyup",s)})}function s(a){$editRow=this.closest(".js-edit-row"),this.checkValidity()?$editRow.classList.remove("is-invalid"):$editRow.classList.add("is-invalid")}function o(a){if(this.classList.contains("is-selected"))return;l(),u(this);let c=this.querySelectorAll("input"),d=this.querySelectorAll("select"),f=this.querySelectorAll("textarea");f[0]?f[0].focus():d[0]?d[0].focus():c[0]&&c[0].focus()}function u(a){let c=n.indexOf(a);n[c].classList.add("is-selected"),n[c].style.height=`${a.scrollHeight+24}px`,n[c-1]&&n[c-1].classList.add("is-bottom"),n[c+1]&&n[c+1].classList.add("is-top")}function l(){n.forEach(a=>{a.classList.remove("is-selected"),a.classList.remove("is-bottom"),a.classList.remove("is-top"),a.style.height="64px"})}return{init:r}}();ql.additionalResources=function(){function e(){$(document).on("nested:fieldAdded",n),$(document).on("nested:fieldRemoved",r)}function n(s){$editRow=s.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight+16}px`,ql.initMaterialInputs($editRow)}function r(s){$editRow=s.target.closest(".js-edit-row"),$editRow.style.height=`${$editRow.scrollHeight-122-16}px`}return{init:e}}();ql.deploymentManager=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-dm"),e=document.querySelector(".js-remove-dm-button"),n=document.querySelector(".js-remove-dm"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.value=1,e.remove()}return{init:r}}();ql.cloudFormation=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-cf"),e=document.querySelector(".js-remove-cf-button"),n=document.querySelectorAll(".js-remove-cf"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.forEach(u=>u.value=""),e.remove()}return{init:r}}();ql.studentPolicy=function(){let t="",e="",n="";function r(){t=document.querySelector(".js-sp"),e=document.querySelector(".js-remove-sp-button"),n=document.querySelectorAll(".js-remove-sp"),e.addEventListener("click",s)}function s(o){t.href="",t.style.color="red",t.style.fontWeight="400",t.style.textDecoration="line-through",n.forEach(u=>u.value=""),e.remove()}return{init:r}}();ql.instruction=function(){$instructionCard="",$instructionContent="",$instructionHeader="",$instructionLoader="",$instructionRefresh="",instructionPoller={};function t(){$instructionContent=document.querySelector(".js-instruction-content"),$instructionHeader=document.querySelector(".js-instruction-header"),$instructionLoader=document.querySelector(".js-instruction-loader"),$instructionRefresh=document.querySelector(".js-instruction-refresh"),ql.subscribe("received-instruction-status",s),$instructionRefresh&&$instructionRefresh.addEventListener("click",e,!1)}function e(l){l.stopImmediatePropagation(),l.preventDefault(),$instructionContent.classList.add("is-faded"),$instructionLoader.classList.remove("is-hidden");let a=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(me).then(ye).then(c=>n(c.status_path)).catch(u)}function n(l){instructionPoller=new ql.Poller(l,1e3,r,u),instructionPoller.start()}function r(l){ql.publish("received-instruction-status",l)}function s(l){l.state=="completed"&&(instructionPoller.stop(),ql.getHtml(l.display_path).then(o).catch(u))}function o(l){$instructionContent.innerHTML=l,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.remove("has-error"),$instructionLoader.classList.add("is-hidden")}function u(l){var a="Response not a JSON";typeof l=="string"?l.json().then(c=>{a=c.errors}):a=l.statusText,htmlSafeMessage=$("<div>").text(a).html(),$instructionContent.innerHTML=`<div class='lab__instructions__error'>
        <i class='material-icons'>error_outline</i>
        <p>${htmlSafeMessage}</p>
      </div>`,$instructionContent.classList.remove("is-faded"),$instructionContent.classList.remove("is-hidden"),$instructionHeader.classList.add("has-error"),$instructionLoader.classList.add("is-hidden")}return{init:t,poll:n}}();ql.downloadLab=function(){function t(){let e=document.getElementById("file_download-header");if(e===null)return;e.addEventListener("click",n);function n(){e.setAttribute("disabled","disabled"),e.querySelector("i").innerText="checkmark"}}return{init:t}}();ql.publishLab=function(){$publishButton="",$toast="",$toastMessage="",$toastLoader="",publishPoller={};function t(){$publishButton=document.querySelector(".js-publish-button"),$toast=document.querySelector(".js-toast"),$toastMessage=document.querySelector(".js-toast-message"),$toastLoader=$toast.querySelector(".mdl-js-progress"),ql.subscribe("received-publish-status",s),$publishButton.addEventListener("click",e)}function e(o){o.preventDefault();let u=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(u).then(me).then(ye).then(l=>n(l.status_path)).catch(console.error)}function n(o){publishPoller=new ql.Poller(o,500,r),publishPoller.start()}function r(o){ql.publish("received-publish-status",o)}function s(o){o.status=="done"||o.status=="error"?(publishPoller.stop(),$toastLoader.classList.remove("is-visible"),$toastMessage.innerHTML=o.html):$toastLoader.classList.contains("is-visible")||($toastLoader.classList.add("is-visible"),$toastMessage.innerHTML=o.html),o.status==="error"?(ql.showFlash("warn",o.html),$toast.classList.remove("is-visible")):$toast.classList.add("is-visible")}return{init:t,poll:n}}();ql.labLocale=function(){$dialog="",$newLocaleButton="",$localeDialogBody="",localeDialog={};function t(){$newLocaleButton=document.querySelector(".js-new-locale"),$dialog=document.querySelector(".js-dialog"),$localeDialogBody=$dialog.querySelector(".js-new-lab-locale"),localeDialog=new ql.MaterialDialog($dialog),$newLocaleButton.addEventListener("click",e)}function e(s){s.preventDefault(),ql.getHtml(this.href).then(n).then(r).catch(console.error)}function n(s){$localeDialogBody.innerHTML=s,ql.initMaterialInputs($localeDialogBody),localeDialog.open()}function r(){$(document).on("ajax:success","form",function(s,o,u,l){$(document).off("ajax:success"),localeDialog.close(),window.location.replace(l.responseJSON.url)}).on("ajax:error","form",function(s,o,u,l){console.error(l)})}return{init:t}}();ql.tagSelect=function(){let t;function e(){t=document.querySelector(".js-chosen-tags").closest(".js-edit-row"),$(".js-chosen-tags").chosen().change(n)}function n(r){$chosenContainers=t.querySelectorAll(".chosen-container");let s=293;$chosenContainers.forEach(o=>{s+=o.offsetHeight}),t.style.height=`${s}px`}return{init:e}}();ql.permissionsSelect=function(){let t="",e="",n="";function r(){n=document.querySelector(".js-permissions-advanced-link"),e=document.querySelector(".js-chosen-permissions"),t=document.querySelector(".js-permissions-input"),t.addEventListener("change",o),n.addEventListener("click",u),$(".js-chosen-permissions").chosen().change(s)}function s(a){let d=[...this.selectedOptions].map(f=>f.value).join(`\r
`);t.value=d,l()}function o(a){this.classList.contains("is-visible")&&([...e.querySelectorAll("option")].forEach(f=>f.selected=!1),this.value.split(`
`).forEach(f=>{let m=e.querySelector(`[value='${f}']`);m&&(m.selected=!0)}),$(".js-chosen-permissions").trigger("chosen:updated")),l()}function u(a){t.classList.toggle("is-visible"),$chosen=document.querySelector(".js-permissions .chosen-container"),$chosen.classList.toggle("is-hidden"),$editRow=this.closest(".js-edit-row"),$editRow.classList.toggle("is-advanced"),newLabel=this.dataset.label,oldLabel=this.innerText,this.setAttribute("data-label",oldLabel),this.innerText=newLabel,l()}function l(){$chosen=document.querySelector(".js-permissions .chosen-container"),h=$chosen.offsetHeight,$editRow=$chosen.closest(".js-edit-row"),$editRow.style.height=`${h+114}px`}return{init:r}}();ql.disableLab=function(){$disableButton={},$disableIcon={},$disableNotice={};function t(){$disableButton=document.querySelector(".js-disable-lab"),$disableIcon=$disableButton.querySelector("ql-icon"),$disableButton.addEventListener("click",e,!1),$disableNotice=document.querySelector(".js-disable-notice"),ql.subscribe("labUpdated",r)}function e(s){s.preventDefault(),s.stopImmediatePropagation(),n(this.href)}function n(s){fetch(s,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(me).then(ye).then(o=>ql.publish("labUpdated",o)).catch(o=>console.log(o))}function r(s){let o=s.disabled_for_catalogs_at?"disable":"enable",u=s.disabled_for_catalogs_at?"enable":"disable",l=s.disabled_for_catalogs_at?"check_box":"check_box_outline_blank",a=s.disabled_for_catalogs_at?"Enable lab":"Disable lab",c=$disableButton.href.replace(o,u);$disableButton.href=c,$disableIcon?$disableIcon.innerHTML=l:$disableButton.innerHTML=a,s.disabled_for_catalogs_at?$("#modal_disable").modal("show"):$disableNotice.remove()}return{init:t}}();ql.hints={reset(){document.querySelectorAll("ql-hint").forEach(t=>t.reset())},updateLabInstanceId(){document.querySelectorAll("ql-hint").forEach(t=>t.updateLabInstanceId(ql.labData.getLabInstanceId()))}};ql.labIndexView=function(){let t=[],e=0;function n(){t=[...document.querySelectorAll(".js-lab-row")],t.length&&(t[e].focus(),window.addEventListener("keyup",r))}function r(s){s.key==="ArrowDown"?t[e+1]&&(e++,t[e].focus()):s.key==="ArrowUp"&&t[e-1]&&(e--,t[e].focus())}return{init:n}}();ql.labInlineInstructionComponents=(()=>{let t=["ql-activity-tracking","ql-activity-tracking-ch","ql-multiple-choice-probe","ql-multiple-select-probe","ql-true-false-probe"].join(", ");return{updateLabInstanceId(){$(t).attr("labInstanceId",ql.labData.getLabInstanceId())}}})();ql.labLayout=function(){return{setTerminalLayout(){let t=document.getElementById("terminal-drawer"),e=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-menu"),s=document.getElementById("control-panel-target");for(let o of document.querySelectorAll(".js-end-lab-button-container"))o.classList.remove("hidden");if(r.children[0]!==n&&(r.appendChild(n),s.style.display="block",r.open()),e&&(e.open=!1),t){t.open=!0;let o=document.querySelector("#discussion-drawer");o&&(o.mode="over",o.hide(),setTimeout(()=>this.resizeLayout(),200))}},reset(){let t=document.getElementById("terminal-drawer"),e=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("control-panel-target");e.appendChild(n),r.style.display="none",t&&(t.open=!1),e&&(e.open=!0),this.resizeLayout()},resizeLayout(){if(ql.cloudTerminal.isTerminalActive()){let o=document.getElementById("terminal-drawer");o.open=!1,o.open=!0;let u=document.getElementById("control-panel-menu");u&&u.close();return}let t=document.getElementById("lab-content-container"),e=document.getElementById("control-panel-drawer"),n=document.querySelector(".js-lab-control-panel"),r=document.getElementById("lab-instructions");t.offsetWidth<965?(n&&(n.classList.add("ql-lab-control-panel__in-content-drawer"),r.prepend(n),r.style.flexWrap="wrap"),e.open=!1):(n&&(n.classList.remove("ql-lab-control-panel__in-content-drawer"),e.appendChild(n),r.style.flexWrap="nowrap"),e.open=!0)},enableResizeLayout(){this.resizeLayout(),window.addEventListener("resize",this.resizeLayout)}}}();ql.labOutline={links:function(){let t,e,n,r;function u(){$container=document.querySelector(".js-lab-wrapper"),t=document.querySelector(".js-lab-content"),n=t.querySelectorAll("h2:not(ql-expandable-infobox > h2)"),e=document.querySelector(".js-lab-content-outline"),r=e.querySelectorAll("a"),r.forEach(d=>d.addEventListener("click",l)),$container.addEventListener("scroll",a)}function l(d){d.preventDefault(),ql.track("clicked_lab_outline",{label:d.target.innerText});let f=d.target.getAttribute("href"),m=t.querySelector(f);m&&$($container).animate({scrollTop:m.offsetTop-24},500,()=>{d.target.blur(),a()})}function a(d){requestAnimationFrame(()=>{let f=$container.scrollTop+160,m=[...n].filter(b=>b.offsetTop<=f),g=m.length?m.pop():null;c(g)})}function c(d){if(r.forEach(f=>f.classList.remove("is-active")),r.forEach(f=>f.removeAttribute("aria-current")),d!=null){let f=e.querySelector(`a[href='#${d.id}']`);f.classList.add("is-active"),f.setAttribute("aria-current","step")}}return{init:u}}()};initRateItListener=function(){$(".js-rateit").bind("keydown",onSliderKeydown.bind(this)),$(".js-rateit").bind("rated",function(t,e){setRating(e),$("#submit").data("disabled")||$("#submit").prop("disabled",!1)}),$("#rate-lab-btn").on("click",()=>openLabReview())};openLabReview=function(){document.getElementById("lab-review-dialog").open()};initFormSubmitHandler=function(){$("#submit").on("click",()=>$(".js-lab-review-form").submit())};initReviewSubmitListener=function(){$(".js-lab-review-form").on("ajax:success",function(t,e,n,r){alertLabReviewSuccess(r)}).on("ajax:error",function(t,e,n,r){alertLabReviewError(e.responseText)})};alertLabReviewSuccess=function(t){document.getElementById("lab-review-dialog").close();let e=document.getElementById("alert-snackbar");e.innerHTML=trans.thanks_review,e.open()};alertLabReviewError=function(t){document.getElementById("lab-review-dialog").close();let e=document.getElementById("alert-snackbar");e.setAttribute("error",!0),e.innerHTML=JSON.parse(t).message,e.open()};setRating=function(t){$(".js-rating-input").val(t-3);let e=document.getElementById("lab-review-rateit");e.setAttribute("aria-valuenow",t),e.setAttribute("aria-valuetext",transSlider[`star_amount_${t}`])};moveSliderTo=function(e){var e=Math.min(Math.max(e,1),$("#lab-review-rateit").rateit("max"));$("#lab-review-rateit").rateit("value",e),$("#lab-review-rateit").trigger("rated",e)};onSliderKeydown=function(t){var e=$("#lab-review-rateit").rateit("value");switch(t.key){case"ArrowLeft":case"ArrowDown":this.moveSliderTo(e-1);break;case"ArrowRight":case"ArrowUp":this.moveSliderTo(e+1);break}};initLabReviewModal=function(){initRateItListener(),initReviewSubmitListener(),initFormSubmitHandler()};window.transSlider={};initLabReviewTranslations=function(t){transSlider=t};ql.labRun=(()=>{let t;function e(){t=new hallofmirrors.lab.LabInstancePoller({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),successCallback(n){if(n.isExpired){ql.labRun.stopLab();return}ql.labData.setLabInstanceId(n.labInstanceId),ql.labAssessment.update(n.assessmentInfo),ql.game.updateLabLeaderboard(n.gameLeaderboard),ql.labInlineInstructionComponents.updateLabInstanceId(),ql.hints.updateLabInstanceId(),ql.labControlPanel.update(n),ql.instructionVariables.update(n.resourceData),ql.cloudTerminal.update(n.terminalUrl),n.terminalUrl&&ql.labLayout.setTerminalLayout()},errorCallback(n){console.error("Lab poll error: ",n)}})}return{init(){ql.labControlPanel.init(),ql.labLayout.enableResizeLayout(),e(),ql.labData.isRunning()&&t.start()},startLab({accessSuccess:n,ackedQuotaWarning:r}){if(ql.labData.isOrganizationLicenseRequired()&&ql.labData.isPaymentRequired()&&!ql.labData.hasCredits()){document.getElementById("insufficient-organization-licenses-modal").open();return}if((ql.labData.isPaymentRequired()||ql.labData.isWarningGiven())&&!n){$("#lab-access-modal").modal("show");return}ql.labControlPanel.setStarting(),(ql.labData.isRecaptchaEnabled()?executeRecaptchaForStartLabAsync().then(o=>ql.labData.setRecaptchaV3Token(o)):Promise.resolve()).then(()=>ql.labXhr.startLab({ackedQuotaWarning:r})).then(o=>{o.message&&hallofmirrors.snackbarService.alert(o.message),ql.track("lab_started",ql.labData.getAnalyticsPayload()),t.start(),ql.labControlPanel.hideV2Recaptcha(),ql.labData.setRecaptchaV2Token(void 0),ql.labData.setRecaptchaV3Token(void 0)}).catch(o=>{ql.labControlPanel.reset(),ql.labAlert.alertHttpError(o)})},endRunningLabAndStartLab({labInstanceId:n}){hallofmirrors.lab.labHttpService.endLab({labInstanceId:n}),ql.labRun.confirmStartLab({labInstanceId:n,ackedQuotaWarning:!1})},confirmStartLab({ackedQuotaWarning:n}){document.getElementById("alert-snackbar").close(),ql.labRun.startLab({accessSuccess:!0,ackedQuotaWarning:n})},stopLab(){ql.labControlPanel.setStopping(),ql.track("clicked_end_lab_button",ql.labData.getAnalyticsPayload()),ql.labXhr.stopLab().then(({runtime_error:n,resource_limit_violation:r})=>{ql.labData.clearLabInstanceId(),t.stop(),ql.labControlPanel.reset(),ql.labAssessment.reset(),ql.labActivityTracking.reset(),ql.instructionVariables.reset(),ql.cloudTerminal.reset(),ql.labLayout.reset(),ql.hints.reset(),n?ql.labAlert.alertMessage(n):r?ql.labAlert.alertMessage(r):document.getElementById("lab-review-dialog").open()}).catch(n=>{ql.labAlert.alertHttpError(n),ql.labControlPanel.setRunning()})}}})();ql.labXhr={startLab({ackedQuotaWarning:t}){return hallofmirrors.lab.labHttpService.startLab({labRunnerId:ql.labData.getFocusId(),labContainerType:ql.labData.getParent(),learningPlanId:ql.labData.getLearningPlanId(),qlcampaign:ql.labData.getQlcampaign(),recaptchaV3Token:ql.labData.getRecaptchaV3Token(),recaptchaV2Token:ql.labData.getRecaptchaV2Token(),ackedQuotaWarning:t})},stopLab(){let t=ql.labData.getLabInstanceId();return t?hallofmirrors.lab.labHttpService.endLab({labInstanceId:t}):Promise.resolve({runtime_error:null,resource_limit_violation:null})}};var Q="top",ie="bottom",ne="right",ee="left",Mn="auto",Ve=[Q,ie,ne,ee],Pe="start",Ke="end",Mr="clippingParents",Bn="viewport",gt="popper",Br="reference",Bi=Ve.reduce(function(t,e){return t.concat([e+"-"+Pe,e+"-"+Ke])},[]),On=[].concat(Ve,[Mn]).reduce(function(t,e){return t.concat([e,e+"-"+Pe,e+"-"+Ke])},[]),Qo="beforeRead",Zo="read",ea="afterRead",ta="beforeMain",na="main",ia="afterMain",ra="beforeWrite",sa="write",oa="afterWrite",Or=[Qo,Zo,ea,ta,na,ia,ra,sa,oa];function se(t){return t?(t.nodeName||"").toLowerCase():null}function X(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ge(t){var e=X(t).Element;return t instanceof e||t instanceof Element}function re(t){var e=X(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function vt(t){if(typeof ShadowRoot>"u")return!1;var e=X(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function aa(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!re(o)||!se(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(u){var l=s[u];l===!1?o.removeAttribute(u):o.setAttribute(u,l===!0?"":l)}))})}function la(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},u=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=u.reduce(function(a,c){return a[c]="",a},{});!re(s)||!se(s)||(Object.assign(s.style,l),Object.keys(o).forEach(function(a){s.removeAttribute(a)}))})}}var zt={name:"applyStyles",enabled:!0,phase:"write",fn:aa,effect:la,requires:["computeStyles"]};function oe(t){return t.split("-")[0]}var Ee=Math.max,Qe=Math.min,je=Math.round;function bt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Jt(){return!/^((?!chrome|android).)*safari/i.test(bt())}function ve(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;e&&re(t)&&(s=t.offsetWidth>0&&je(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&je(r.height)/t.offsetHeight||1);var u=ge(t)?X(t):window,l=u.visualViewport,a=!Jt()&&n,c=(r.left+(a&&l?l.offsetLeft:0))/s,d=(r.top+(a&&l?l.offsetTop:0))/o,f=r.width/s,m=r.height/o;return{width:f,height:m,top:d,right:c+f,bottom:d+m,left:c,x:c,y:d}}function Ze(t){var e=ve(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Yt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&vt(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function he(t){return X(t).getComputedStyle(t)}function Oi(t){return["table","td","th"].indexOf(se(t))>=0}function le(t){return((ge(t)?t.ownerDocument:t.document)||window.document).documentElement}function Me(t){return se(t)==="html"?t:t.assignedSlot||t.parentNode||(vt(t)?t.host:null)||le(t)}function Dr(t){return!re(t)||he(t).position==="fixed"?null:t.offsetParent}function ca(t){var e=/firefox/i.test(bt()),n=/Trident/i.test(bt());if(n&&re(t)){var r=he(t);if(r.position==="fixed")return null}var s=Me(t);for(vt(s)&&(s=s.host);re(s)&&["html","body"].indexOf(se(s))<0;){var o=he(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Le(t){for(var e=X(t),n=Dr(t);n&&Oi(n)&&he(n).position==="static";)n=Dr(n);return n&&(se(n)==="html"||se(n)==="body"&&he(n).position==="static")?e:n||ca(t)||e}function et(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function tt(t,e,n){return Ee(t,Qe(e,n))}function Fr(t,e,n){var r=tt(t,e,n);return r>n?n:r}function Xt(){return{top:0,right:0,bottom:0,left:0}}function Gt(t){return Object.assign({},Xt(),t)}function Kt(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var ua=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Gt(typeof e!="number"?e:Kt(e,Ve))};function da(t){var e,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,u=n.modifiersData.popperOffsets,l=oe(n.placement),a=et(l),c=[ee,ne].indexOf(l)>=0,d=c?"height":"width";if(!(!o||!u)){var f=ua(s.padding,n),m=Ze(o),g=a==="y"?Q:ee,b=a==="y"?ie:ne,y=n.rects.reference[d]+n.rects.reference[a]-u[a]-n.rects.popper[d],L=u[a]-n.rects.reference[a],j=Le(o),P=j?a==="y"?j.clientHeight||0:j.clientWidth||0:0,C=y/2-L/2,p=f[g],T=P-m[d]-f[b],w=P/2-m[d]/2+C,M=tt(p,w,T),z=a;n.modifiersData[r]=(e={},e[z]=M,e.centerOffset=M-w,e)}}function ha(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||Yt(e.elements.popper,s)&&(e.elements.arrow=s))}var Nr={name:"arrow",enabled:!0,phase:"main",fn:da,effect:ha,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function be(t){return t.split("-")[1]}var fa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function pa(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:je(n*s)/s||0,y:je(r*s)/s||0}}function Hr(t){var e,n=t.popper,r=t.popperRect,s=t.placement,o=t.variation,u=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,f=t.isFixed,m=u.x,g=m===void 0?0:m,b=u.y,y=b===void 0?0:b,L=typeof d=="function"?d({x:g,y}):{x:g,y};g=L.x,y=L.y;var j=u.hasOwnProperty("x"),P=u.hasOwnProperty("y"),C=ee,p=Q,T=window;if(c){var w=Le(n),M="clientHeight",z="clientWidth";if(w===X(n)&&(w=le(n),he(w).position!=="static"&&l==="absolute"&&(M="scrollHeight",z="scrollWidth")),w=w,s===Q||(s===ee||s===ne)&&o===Ke){p=ie;var U=f&&w===T&&T.visualViewport?T.visualViewport.height:w[M];y-=U-r.height,y*=a?1:-1}if(s===ee||(s===Q||s===ie)&&o===Ke){C=ne;var F=f&&w===T&&T.visualViewport?T.visualViewport.width:w[z];g-=F-r.width,g*=a?1:-1}}var W=Object.assign({position:l},c&&fa),V=d===!0?pa({x:g,y},X(n)):{x:g,y};if(g=V.x,y=V.y,a){var B;return Object.assign({},W,(B={},B[p]=P?"0":"",B[C]=j?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",B))}return Object.assign({},W,(e={},e[p]=P?y+"px":"",e[C]=j?g+"px":"",e.transform="",e))}function ma(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,u=o===void 0?!0:o,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:oe(e.placement),variation:be(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Hr(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Hr(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Wr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ma,data:{}};var Dn={passive:!0};function ga(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,o=s===void 0?!0:s,u=r.resize,l=u===void 0?!0:u,a=X(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(d){d.addEventListener("scroll",n.update,Dn)}),l&&a.addEventListener("resize",n.update,Dn),function(){o&&c.forEach(function(d){d.removeEventListener("scroll",n.update,Dn)}),l&&a.removeEventListener("resize",n.update,Dn)}}var Vr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ga,data:{}};var va={left:"right",right:"left",bottom:"top",top:"bottom"};function _t(t){return t.replace(/left|right|bottom|top/g,function(e){return va[e]})}var ba={start:"end",end:"start"};function Fn(t){return t.replace(/start|end/g,function(e){return ba[e]})}function nt(t){var e=X(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function it(t){return ve(le(t)).left+nt(t).scrollLeft}function Di(t,e){var n=X(t),r=le(t),s=n.visualViewport,o=r.clientWidth,u=r.clientHeight,l=0,a=0;if(s){o=s.width,u=s.height;var c=Jt();(c||!c&&e==="fixed")&&(l=s.offsetLeft,a=s.offsetTop)}return{width:o,height:u,x:l+it(t),y:a}}function Fi(t){var e,n=le(t),r=nt(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=Ee(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),u=Ee(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+it(t),a=-r.scrollTop;return he(s||n).direction==="rtl"&&(l+=Ee(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:u,x:l,y:a}}function rt(t){var e=he(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function Nn(t){return["html","body","#document"].indexOf(se(t))>=0?t.ownerDocument.body:re(t)&&rt(t)?t:Nn(Me(t))}function Ue(t,e){var n;e===void 0&&(e=[]);var r=Nn(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=X(r),u=s?[o].concat(o.visualViewport||[],rt(r)?r:[]):r,l=e.concat(u);return s?l:l.concat(Ue(Me(u)))}function yt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _a(t,e){var n=ve(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ur(t,e,n){return e===Bn?yt(Di(t,n)):ge(e)?_a(e,n):yt(Fi(le(t)))}function ya(t){var e=Ue(Me(t)),n=["absolute","fixed"].indexOf(he(t).position)>=0,r=n&&re(t)?Le(t):t;return ge(r)?e.filter(function(s){return ge(s)&&Yt(s,r)&&se(s)!=="body"}):[]}function Ni(t,e,n,r){var s=e==="clippingParents"?ya(t):[].concat(e),o=[].concat(s,[n]),u=o[0],l=o.reduce(function(a,c){var d=Ur(t,c,r);return a.top=Ee(d.top,a.top),a.right=Qe(d.right,a.right),a.bottom=Qe(d.bottom,a.bottom),a.left=Ee(d.left,a.left),a},Ur(t,u,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Qt(t){var e=t.reference,n=t.element,r=t.placement,s=r?oe(r):null,o=r?be(r):null,u=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(s){case Q:a={x:u,y:e.y-n.height};break;case ie:a={x:u,y:e.y+e.height};break;case ne:a={x:e.x+e.width,y:l};break;case ee:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=s?et(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(o){case Pe:a[c]=a[c]-(e[d]/2-n[d]/2);break;case Ke:a[c]=a[c]+(e[d]/2-n[d]/2);break;default:}}return a}function qe(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,o=n.strategy,u=o===void 0?t.strategy:o,l=n.boundary,a=l===void 0?Mr:l,c=n.rootBoundary,d=c===void 0?Bn:c,f=n.elementContext,m=f===void 0?gt:f,g=n.altBoundary,b=g===void 0?!1:g,y=n.padding,L=y===void 0?0:y,j=Gt(typeof L!="number"?L:Kt(L,Ve)),P=m===gt?Br:gt,C=t.rects.popper,p=t.elements[b?P:m],T=Ni(ge(p)?p:p.contextElement||le(t.elements.popper),a,d,u),w=ve(t.elements.reference),M=Qt({reference:w,element:C,strategy:"absolute",placement:s}),z=yt(Object.assign({},C,M)),U=m===gt?z:w,F={top:T.top-U.top+j.top,bottom:U.bottom-T.bottom+j.bottom,left:T.left-U.left+j.left,right:U.right-T.right+j.right},W=t.modifiersData.offset;if(m===gt&&W){var V=W[s];Object.keys(F).forEach(function(B){var te=[ne,ie].indexOf(B)>=0?1:-1,A=[Q,ie].indexOf(B)>=0?"y":"x";F[B]+=V[A]*te})}return F}function Hi(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,o=n.rootBoundary,u=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?On:a,d=be(r),f=d?l?Bi:Bi.filter(function(b){return be(b)===d}):Ve,m=f.filter(function(b){return c.indexOf(b)>=0});m.length===0&&(m=f);var g=m.reduce(function(b,y){return b[y]=qe(t,{placement:y,boundary:s,rootBoundary:o,padding:u})[oe(y)],b},{});return Object.keys(g).sort(function(b,y){return g[b]-g[y]})}function wa(t){if(oe(t)===Mn)return[];var e=_t(t);return[Fn(t),e,Fn(e)]}function Sa(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,u=n.altAxis,l=u===void 0?!0:u,a=n.fallbackPlacements,c=n.padding,d=n.boundary,f=n.rootBoundary,m=n.altBoundary,g=n.flipVariations,b=g===void 0?!0:g,y=n.allowedAutoPlacements,L=e.options.placement,j=oe(L),P=j===L,C=a||(P||!b?[_t(L)]:wa(L)),p=[L].concat(C).reduce(function(x,I){return x.concat(oe(I)===Mn?Hi(e,{placement:I,boundary:d,rootBoundary:f,padding:c,flipVariations:b,allowedAutoPlacements:y}):I)},[]),T=e.rects.reference,w=e.rects.popper,M=new Map,z=!0,U=p[0],F=0;F<p.length;F++){var W=p[F],V=oe(W),B=be(W)===Pe,te=[Q,ie].indexOf(V)>=0,A=te?"width":"height",D=qe(e,{placement:W,boundary:d,rootBoundary:f,altBoundary:m,padding:c}),J=te?B?ne:ee:B?ie:Q;T[A]>w[A]&&(J=_t(J));var Y=_t(J),ue=[];if(o&&ue.push(D[V]<=0),l&&ue.push(D[J]<=0,D[Y]<=0),ue.every(function(x){return x})){U=W,z=!1;break}M.set(W,ue)}if(z)for(var q=b?3:1,_=function(I){var Z=p.find(function(_e){var xe=M.get(_e);if(xe)return xe.slice(0,I).every(function(ot){return ot})});if(Z)return U=Z,"break"},S=q;S>0;S--){var k=_(S);if(k==="break")break}e.placement!==U&&(e.modifiersData[r]._skip=!0,e.placement=U,e.reset=!0)}}var zr={name:"flip",enabled:!0,phase:"main",fn:Sa,requiresIfExists:["offset"],data:{_skip:!1}};function Jr(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Yr(t){return[Q,ne,ie,ee].some(function(e){return t[e]>=0})}function Ea(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,u=qe(e,{elementContext:"reference"}),l=qe(e,{altBoundary:!0}),a=Jr(u,r),c=Jr(l,s,o),d=Yr(a),f=Yr(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}var Xr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ea};function La(t,e,n){var r=oe(t),s=[ee,Q].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,u=o[0],l=o[1];return u=u||0,l=(l||0)*s,[ee,ne].indexOf(r)>=0?{x:l,y:u}:{x:u,y:l}}function qa(t){var e=t.state,n=t.options,r=t.name,s=n.offset,o=s===void 0?[0,0]:s,u=On.reduce(function(d,f){return d[f]=La(f,e.rects,o),d},{}),l=u[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=u}var Gr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qa};function ka(t){var e=t.state,n=t.name;e.modifiersData[n]=Qt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Kr={name:"popperOffsets",enabled:!0,phase:"read",fn:ka,data:{}};function Wi(t){return t==="x"?"y":"x"}function xa(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,o=s===void 0?!0:s,u=n.altAxis,l=u===void 0?!1:u,a=n.boundary,c=n.rootBoundary,d=n.altBoundary,f=n.padding,m=n.tether,g=m===void 0?!0:m,b=n.tetherOffset,y=b===void 0?0:b,L=qe(e,{boundary:a,rootBoundary:c,padding:f,altBoundary:d}),j=oe(e.placement),P=be(e.placement),C=!P,p=et(j),T=Wi(p),w=e.modifiersData.popperOffsets,M=e.rects.reference,z=e.rects.popper,U=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,F=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(w){if(o){var B,te=p==="y"?Q:ee,A=p==="y"?ie:ne,D=p==="y"?"height":"width",J=w[p],Y=J+L[te],ue=J-L[A],q=g?-z[D]/2:0,_=P===Pe?M[D]:z[D],S=P===Pe?-z[D]:-M[D],k=e.elements.arrow,x=g&&k?Ze(k):{width:0,height:0},I=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Xt(),Z=I[te],_e=I[A],xe=tt(0,M[D],x[D]),ot=C?M[D]/2-q-xe-Z-F.mainAxis:_-xe-Z-F.mainAxis,Be=C?-M[D]/2+q+xe+_e+F.mainAxis:S+xe+_e+F.mainAxis,at=e.elements.arrow&&Le(e.elements.arrow),nn=at?p==="y"?at.clientTop||0:at.clientLeft||0:0,St=(B=W?.[p])!=null?B:0,rn=J+ot-St-nn,sn=J+Be-St,Et=tt(g?Qe(Y,rn):Y,J,g?Ee(ue,sn):ue);w[p]=Et,V[p]=Et-J}if(l){var Lt,on=p==="x"?Q:ee,an=p==="x"?ie:ne,$e=w[T],Oe=T==="y"?"height":"width",qt=$e+L[on],ze=$e-L[an],kt=[Q,ee].indexOf(j)!==-1,ln=(Lt=W?.[T])!=null?Lt:0,cn=kt?qt:$e-M[Oe]-z[Oe]-ln+F.altAxis,un=kt?$e+M[Oe]+z[Oe]-ln-F.altAxis:ze,dn=g&&kt?Fr(cn,$e,un):tt(g?cn:qt,$e,g?un:ze);w[T]=dn,V[T]=dn-$e}e.modifiersData[r]=V}}var Qr={name:"preventOverflow",enabled:!0,phase:"main",fn:xa,requiresIfExists:["offset"]};function Vi(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ui(t){return t===X(t)||!re(t)?nt(t):Vi(t)}function Aa(t){var e=t.getBoundingClientRect(),n=je(e.width)/t.offsetWidth||1,r=je(e.height)/t.offsetHeight||1;return n!==1||r!==1}function zi(t,e,n){n===void 0&&(n=!1);var r=re(e),s=re(e)&&Aa(e),o=le(e),u=ve(t,s,n),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((se(e)!=="body"||rt(o))&&(l=Ui(e)),re(e)?(a=ve(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=it(o))),{x:u.left+l.scrollLeft-a.x,y:u.top+l.scrollTop-a.y,width:u.width,height:u.height}}function Ca(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&s(a)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),r}function Ji(t){var e=Ca(t);return Or.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function Yi(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Xi(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Zr={placement:"bottom",modifiers:[],strategy:"absolute"};function es(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ts(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?Zr:s;return function(l,a,c){c===void 0&&(c=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zr,o),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},f=[],m=!1,g={state:d,setOptions:function(j){var P=typeof j=="function"?j(d.options):j;y(),d.options=Object.assign({},o,d.options,P),d.scrollParents={reference:ge(l)?Ue(l):l.contextElement?Ue(l.contextElement):[],popper:Ue(a)};var C=Ji(Xi([].concat(r,d.options.modifiers)));return d.orderedModifiers=C.filter(function(p){return p.enabled}),b(),g.update()},forceUpdate:function(){if(!m){var j=d.elements,P=j.reference,C=j.popper;if(es(P,C)){d.rects={reference:zi(P,Le(C),d.options.strategy==="fixed"),popper:Ze(C)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(F){return d.modifiersData[F.name]=Object.assign({},F.data)});for(var p=0;p<d.orderedModifiers.length;p++){if(d.reset===!0){d.reset=!1,p=-1;continue}var T=d.orderedModifiers[p],w=T.fn,M=T.options,z=M===void 0?{}:M,U=T.name;typeof w=="function"&&(d=w({state:d,options:z,name:U,instance:g})||d)}}}},update:Yi(function(){return new Promise(function(L){g.forceUpdate(),L(d)})}),destroy:function(){y(),m=!0}};if(!es(l,a))return g;g.setOptions(c).then(function(L){!m&&c.onFirstUpdate&&c.onFirstUpdate(L)});function b(){d.orderedModifiers.forEach(function(L){var j=L.name,P=L.options,C=P===void 0?{}:P,p=L.effect;if(typeof p=="function"){var T=p({state:d,name:j,instance:g,options:C}),w=function(){};f.push(T||w)}})}function y(){f.forEach(function(L){return L()}),f=[]}return g}}var $a=[Vr,Kr,Wr,zt,Gr,zr,Qr,Nr,Xr],Gi=ts({defaultModifiers:$a});var Ta="tippy-box",ds="tippy-content",Ra="tippy-backdrop",hs="tippy-arrow",fs="tippy-svg-arrow",st={passive:!0,capture:!0},ps=function(){return document.body};function Ki(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function ir(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function ms(t,e){return typeof t=="function"?t.apply(void 0,e):t}function ns(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function Ia(t){return t.split(/\s+/).filter(Boolean)}function wt(t){return[].concat(t)}function is(t,e){t.indexOf(e)===-1&&t.push(e)}function Pa(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ja(t){return t.split("-")[0]}function Wn(t){return[].slice.call(t)}function rs(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Zt(){return document.createElement("div")}function Vn(t){return["Element","Fragment"].some(function(e){return ir(t,e)})}function Ma(t){return ir(t,"NodeList")}function Ba(t){return ir(t,"MouseEvent")}function Oa(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Da(t){return Vn(t)?[t]:Ma(t)?Wn(t):Array.isArray(t)?t:Wn(document.querySelectorAll(t))}function Qi(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function ss(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Fa(t){var e,n=wt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Na(t,e){var n=e.clientX,r=e.clientY;return t.every(function(s){var o=s.popperRect,u=s.popperState,l=s.props,a=l.interactiveBorder,c=ja(u.placement),d=u.modifiersData.offset;if(!d)return!0;var f=c==="bottom"?d.top.y:0,m=c==="top"?d.bottom.y:0,g=c==="right"?d.left.x:0,b=c==="left"?d.right.x:0,y=o.top-r+f>a,L=r-o.bottom-m>a,j=o.left-n+g>a,P=n-o.right-b>a;return y||L||j||P})}function Zi(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){t[r](s,n)})}function os(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ce={isTouch:!1},as=0;function Ha(){Ce.isTouch||(Ce.isTouch=!0,window.performance&&document.addEventListener("mousemove",gs))}function gs(){var t=performance.now();t-as<20&&(Ce.isTouch=!1,document.removeEventListener("mousemove",gs)),as=t}function Wa(){var t=document.activeElement;if(Oa(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Va(){document.addEventListener("touchstart",Ha,st),window.addEventListener("blur",Wa)}var Ua=typeof window<"u"&&typeof document<"u",za=Ua?!!window.msCrypto:!1;var Ja={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ya={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ke=Object.assign({appendTo:ps,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Ja,Ya),Xa=Object.keys(ke),Ga=function(e){var n=Object.keys(e);n.forEach(function(r){ke[r]=e[r]})};function vs(t){var e=t.plugins||[],n=e.reduce(function(r,s){var o=s.name,u=s.defaultValue;if(o){var l;r[o]=t[o]!==void 0?t[o]:(l=ke[o])!=null?l:u}return r},{});return Object.assign({},t,n)}function Ka(t,e){var n=e?Object.keys(vs(Object.assign({},ke,{plugins:e}))):Xa,r=n.reduce(function(s,o){var u=(t.getAttribute("data-tippy-"+o)||"").trim();if(!u)return s;if(o==="content")s[o]=u;else try{s[o]=JSON.parse(u)}catch{s[o]=u}return s},{});return r}function ls(t,e){var n=Object.assign({},e,{content:ms(e.content,[t])},e.ignoreAttributes?{}:Ka(t,e.plugins));return n.aria=Object.assign({},ke.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Qa=function(){return"innerHTML"};function tr(t,e){t[Qa()]=e}function cs(t){var e=Zt();return t===!0?e.className=hs:(e.className=fs,Vn(t)?e.appendChild(t):tr(e,t)),e}function us(t,e){Vn(e.content)?(tr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?tr(t,e.content):t.textContent=e.content)}function nr(t){var e=t.firstElementChild,n=Wn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(ds)}),arrow:n.find(function(r){return r.classList.contains(hs)||r.classList.contains(fs)}),backdrop:n.find(function(r){return r.classList.contains(Ra)})}}function bs(t){var e=Zt(),n=Zt();n.className=Ta,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Zt();r.className=ds,r.setAttribute("data-state","hidden"),us(r,t.props),e.appendChild(n),n.appendChild(r),s(t.props,t.props);function s(o,u){var l=nr(e),a=l.box,c=l.content,d=l.arrow;u.theme?a.setAttribute("data-theme",u.theme):a.removeAttribute("data-theme"),typeof u.animation=="string"?a.setAttribute("data-animation",u.animation):a.removeAttribute("data-animation"),u.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof u.maxWidth=="number"?u.maxWidth+"px":u.maxWidth,u.role?a.setAttribute("role",u.role):a.removeAttribute("role"),(o.content!==u.content||o.allowHTML!==u.allowHTML)&&us(c,t.props),u.arrow?d?o.arrow!==u.arrow&&(a.removeChild(d),a.appendChild(cs(u.arrow))):a.appendChild(cs(u.arrow)):d&&a.removeChild(d)}return{popper:e,onUpdate:s}}bs.$$tippy=!0;var Za=1,Hn=[],er=[];function el(t,e){var n=ls(t,Object.assign({},ke,vs(rs(e)))),r,s,o,u=!1,l=!1,a=!1,c=!1,d,f,m,g=[],b=ns(rn,n.interactiveDebounce),y,L=Za++,j=null,P=Pa(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:L,reference:t,popper:Zt(),popperInstance:j,props:n,state:C,plugins:P,clearDelayTimeouts:cn,setProps:un,setContent:dn,show:ws,hide:Ss,hideWithInteractivity:Es,enable:kt,disable:ln,unmount:Ls,destroy:qs};if(!n.render)return p;var T=n.render(p),w=T.popper,M=T.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+p.id,p.popper=w,t._tippy=p,w._tippy=p;var z=P.map(function(v){return v.fn(p)}),U=t.hasAttribute("aria-expanded");return at(),q(),J(),Y("onCreate",[p]),n.showOnCreate&&qt(),w.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&te().addEventListener("mousemove",b)}),p;function F(){var v=p.props.touch;return Array.isArray(v)?v:[v,0]}function W(){return F()[0]==="hold"}function V(){var v;return!!((v=p.props.render)!=null&&v.$$tippy)}function B(){return y||t}function te(){var v=B().parentNode;return v?Fa(v):document}function A(){return nr(w)}function D(v){return p.state.isMounted&&!p.state.isVisible||Ce.isTouch||d&&d.type==="focus"?0:Ki(p.props.delay,v?0:1,ke.delay)}function J(v){v===void 0&&(v=!1),w.style.pointerEvents=p.props.interactive&&!v?"":"none",w.style.zIndex=""+p.props.zIndex}function Y(v,E,R){if(R===void 0&&(R=!0),z.forEach(function(O){O[v]&&O[v].apply(O,E)}),R){var N;(N=p.props)[v].apply(N,E)}}function ue(){var v=p.props.aria;if(v.content){var E="aria-"+v.content,R=w.id,N=wt(p.props.triggerTarget||t);N.forEach(function(O){var de=O.getAttribute(E);if(p.state.isVisible)O.setAttribute(E,de?de+" "+R:R);else{var pe=de&&de.replace(R,"").trim();pe?O.setAttribute(E,pe):O.removeAttribute(E)}})}}function q(){if(!(U||!p.props.aria.expanded)){var v=wt(p.props.triggerTarget||t);v.forEach(function(E){p.props.interactive?E.setAttribute("aria-expanded",p.state.isVisible&&E===B()?"true":"false"):E.removeAttribute("aria-expanded")})}}function _(){te().removeEventListener("mousemove",b),Hn=Hn.filter(function(v){return v!==b})}function S(v){if(!(Ce.isTouch&&(a||v.type==="mousedown"))){var E=v.composedPath&&v.composedPath()[0]||v.target;if(!(p.props.interactive&&os(w,E))){if(wt(p.props.triggerTarget||t).some(function(R){return os(R,E)})){if(Ce.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else Y("onClickOutside",[p,v]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),l=!0,setTimeout(function(){l=!1}),p.state.isMounted||Z())}}}function k(){a=!0}function x(){a=!1}function I(){var v=te();v.addEventListener("mousedown",S,!0),v.addEventListener("touchend",S,st),v.addEventListener("touchstart",x,st),v.addEventListener("touchmove",k,st)}function Z(){var v=te();v.removeEventListener("mousedown",S,!0),v.removeEventListener("touchend",S,st),v.removeEventListener("touchstart",x,st),v.removeEventListener("touchmove",k,st)}function _e(v,E){ot(v,function(){!p.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&E()})}function xe(v,E){ot(v,E)}function ot(v,E){var R=A().box;function N(O){O.target===R&&(Zi(R,"remove",N),E())}if(v===0)return E();Zi(R,"remove",f),Zi(R,"add",N),f=N}function Be(v,E,R){R===void 0&&(R=!1);var N=wt(p.props.triggerTarget||t);N.forEach(function(O){O.addEventListener(v,E,R),g.push({node:O,eventType:v,handler:E,options:R})})}function at(){W()&&(Be("touchstart",St,{passive:!0}),Be("touchend",sn,{passive:!0})),Ia(p.props.trigger).forEach(function(v){if(v!=="manual")switch(Be(v,St),v){case"mouseenter":Be("mouseleave",sn);break;case"focus":Be(za?"focusout":"blur",Et);break;case"focusin":Be("focusout",Et);break}})}function nn(){g.forEach(function(v){var E=v.node,R=v.eventType,N=v.handler,O=v.options;E.removeEventListener(R,N,O)}),g=[]}function St(v){var E,R=!1;if(!(!p.state.isEnabled||Lt(v)||l)){var N=((E=d)==null?void 0:E.type)==="focus";d=v,y=v.currentTarget,q(),!p.state.isVisible&&Ba(v)&&Hn.forEach(function(O){return O(v)}),v.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||u)&&p.props.hideOnClick!==!1&&p.state.isVisible?R=!0:qt(v),v.type==="click"&&(u=!R),R&&!N&&ze(v)}}function rn(v){var E=v.target,R=B().contains(E)||w.contains(E);if(!(v.type==="mousemove"&&R)){var N=Oe().concat(w).map(function(O){var de,pe=O._tippy,lt=(de=pe.popperInstance)==null?void 0:de.state;return lt?{popperRect:O.getBoundingClientRect(),popperState:lt,props:n}:null}).filter(Boolean);Na(N,v)&&(_(),ze(v))}}function sn(v){var E=Lt(v)||p.props.trigger.indexOf("click")>=0&&u;if(!E){if(p.props.interactive){p.hideWithInteractivity(v);return}ze(v)}}function Et(v){p.props.trigger.indexOf("focusin")<0&&v.target!==B()||p.props.interactive&&v.relatedTarget&&w.contains(v.relatedTarget)||ze(v)}function Lt(v){return Ce.isTouch?W()!==v.type.indexOf("touch")>=0:!1}function on(){an();var v=p.props,E=v.popperOptions,R=v.placement,N=v.offset,O=v.getReferenceClientRect,de=v.moveTransition,pe=V()?nr(w).arrow:null,lt=O?{getBoundingClientRect:O,contextElement:O.contextElement||B()}:t,rr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(hn){var ct=hn.state;if(V()){var ks=A(),Jn=ks.box;["placement","reference-hidden","escaped"].forEach(function(fn){fn==="placement"?Jn.setAttribute("data-placement",ct.placement):ct.attributes.popper["data-popper-"+fn]?Jn.setAttribute("data-"+fn,""):Jn.removeAttribute("data-"+fn)}),ct.attributes.popper={}}}},Je=[{name:"offset",options:{offset:N}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!de}},rr];V()&&pe&&Je.push({name:"arrow",options:{element:pe,padding:3}}),Je.push.apply(Je,E?.modifiers||[]),p.popperInstance=Gi(lt,w,Object.assign({},E,{placement:R,onFirstUpdate:m,modifiers:Je}))}function an(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function $e(){var v=p.props.appendTo,E,R=B();p.props.interactive&&v===ps||v==="parent"?E=R.parentNode:E=ms(v,[R]),E.contains(w)||E.appendChild(w),p.state.isMounted=!0,on()}function Oe(){return Wn(w.querySelectorAll("[data-tippy-root]"))}function qt(v){p.clearDelayTimeouts(),v&&Y("onTrigger",[p,v]),I();var E=D(!0),R=F(),N=R[0],O=R[1];Ce.isTouch&&N==="hold"&&O&&(E=O),E?r=setTimeout(function(){p.show()},E):p.show()}function ze(v){if(p.clearDelayTimeouts(),Y("onUntrigger",[p,v]),!p.state.isVisible){Z();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(v.type)>=0&&u)){var E=D(!1);E?s=setTimeout(function(){p.state.isVisible&&p.hide()},E):o=requestAnimationFrame(function(){p.hide()})}}function kt(){p.state.isEnabled=!0}function ln(){p.hide(),p.state.isEnabled=!1}function cn(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function un(v){if(!p.state.isDestroyed){Y("onBeforeUpdate",[p,v]),nn();var E=p.props,R=ls(t,Object.assign({},E,rs(v),{ignoreAttributes:!0}));p.props=R,at(),E.interactiveDebounce!==R.interactiveDebounce&&(_(),b=ns(rn,R.interactiveDebounce)),E.triggerTarget&&!R.triggerTarget?wt(E.triggerTarget).forEach(function(N){N.removeAttribute("aria-expanded")}):R.triggerTarget&&t.removeAttribute("aria-expanded"),q(),J(),M&&M(E,R),p.popperInstance&&(on(),Oe().forEach(function(N){requestAnimationFrame(N._tippy.popperInstance.forceUpdate)})),Y("onAfterUpdate",[p,v])}}function dn(v){p.setProps({content:v})}function ws(){var v=p.state.isVisible,E=p.state.isDestroyed,R=!p.state.isEnabled,N=Ce.isTouch&&!p.props.touch,O=Ki(p.props.duration,0,ke.duration);if(!(v||E||R||N)&&!B().hasAttribute("disabled")&&(Y("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,V()&&(w.style.visibility="visible"),J(),I(),p.state.isMounted||(w.style.transition="none"),V()){var de=A(),pe=de.box,lt=de.content;Qi([pe,lt],0)}m=function(){var Je;if(!(!p.state.isVisible||c)){if(c=!0,w.offsetHeight,w.style.transition=p.props.moveTransition,V()&&p.props.animation){var zn=A(),hn=zn.box,ct=zn.content;Qi([hn,ct],O),ss([hn,ct],"visible")}ue(),q(),is(er,p),(Je=p.popperInstance)==null||Je.forceUpdate(),Y("onMount",[p]),p.props.animation&&V()&&xe(O,function(){p.state.isShown=!0,Y("onShown",[p])})}},$e()}}function Ss(){var v=!p.state.isVisible,E=p.state.isDestroyed,R=!p.state.isEnabled,N=Ki(p.props.duration,1,ke.duration);if(!(v||E||R)&&(Y("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,c=!1,u=!1,V()&&(w.style.visibility="hidden"),_(),Z(),J(!0),V()){var O=A(),de=O.box,pe=O.content;p.props.animation&&(Qi([de,pe],N),ss([de,pe],"hidden"))}ue(),q(),p.props.animation?V()&&_e(N,p.unmount):p.unmount()}}function Es(v){te().addEventListener("mousemove",b),is(Hn,b),b(v)}function Ls(){p.state.isVisible&&p.hide(),p.state.isMounted&&(an(),Oe().forEach(function(v){v._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),er=er.filter(function(v){return v!==p}),p.state.isMounted=!1,Y("onHidden",[p]))}function qs(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),nn(),delete t._tippy,p.state.isDestroyed=!0,Y("onDestroy",[p]))}}function en(t,e){e===void 0&&(e={});var n=ke.plugins.concat(e.plugins||[]);Va();var r=Object.assign({},e,{plugins:n}),s=Da(t);if(0)var o,u;var l=s.reduce(function(a,c){var d=c&&el(c,r);return d&&a.push(d),a},[]);return Vn(t)?l[0]:l}en.defaultProps=ke;en.setDefaultProps=Ga;en.currentInput=Ce;var Qh=Object.assign({},zt,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});en.setDefaultProps({render:bs});var _s=en;ql.labsTaken=function(){function t(){return $(".labs_taken_partial").length>0?$(".labs_taken_partial").data("translation"):(console.log("Warning: could not find labs_taken translations"),{})}function e(s,o,u){var l,a=t();if(l="<p><strong>"+a.not_available+"</strong></p>",s.total_score!=null){for(l="<div id='assessment-popover'>",i=0;i<s.step_points.length;i++){if(l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span1 step-no'>"+(i+1)+"</span>",l+="<span class='span2 step-title'>"+s.step_titles[i]+"</span>",s.completion_only==!0){var c="icon-remove";s.step_points[i]!=""&&s.step_points[i]==s.step_scores[i]&&(c="icon-ok"),l+="<span class='span1 step-score'><i class='"+c+"'></i></span>"}else s.step_points[i]==""?l+="<span class='span1 step-score'>"+s.step_scores[i]+"</span>":l+="<span class='span1 step-score'>"+s.step_scores[i]+"/"+s.step_points[i]+"</span>";l+="</div></div></div>"}l+="<div class='row'>",l+="<div class='assessment-steps'>",l+="<div class='row'>",l+="<span class='span2 total-score'>",s.completion_only==!0?l+=a.complete:l+=a.total,l+="</span>",l+="<span class='span1 step-final'>",s.completion_only==!0?l+=s.completed_steps+"/"+s.total_steps:l+=s.total_score+"/"+s.perfect_score,l+="</span></div></div></div>"}_s(document.querySelector("#lab-instance-tooltip-"+$(this).data("labinstance")),{trigger:"manual",allowHTML:!0,content:l,interactive:!0,placement:"right"}).show()}function n(s){var o=$(this).data("labinstance");return $.ajax({url:"/lab_instances/assessment/"+o+".json",context:this,error:function(u,l,a){console.log("Assessment Details ajax fail: ["+l+"/"+a+"]")},success:e}),!1}function r(){$(".labs_taken_partial").length>0&&$('[data-toggle="popover"]').on("click",n)}return{init:r}}();clickCheckbox=function(t){let e="program_group_learning_plans_"+t;document.getElementById(e).hasAttribute("checked")?document.getElementById(e).removeAttribute("checked"):document.getElementById(e).setAttribute("checked","true")};ql.learningPlanEdit=(()=>{function t(){ql.sortable.init(".learnable-position-field");let r=document.querySelectorAll("ql-activity-card ql-toggle-button");for(button of r)button.addEventListener("click",e)}function e(r){let s=this.dataset.itemid,o=document.querySelector(`.destroy-${s}-field`);o&&(o.value==="false"?(o.value="true",this.parentElement.disabled=!0):(o.value="false",this.parentElement.disabled=!1))}function n(r){if(r.files&&r.files[0]){let s=new FileReader,o=document.querySelector("ql-activity-card");s.onload=u=>{o.setAttribute("imagesrc",u.target.result)},s.readAsDataURL(r.files[0])}}return{init:t,update_image_preview:n}})();ql.learningTree={info:function(){function t(){let e=document.querySelector("#drawer-container"),n=document.querySelector("#learning-tree-info-drawer");n.addEventListener("toggle",r=>{r.target===n&&(r.detail.on?e.classList.add("info-drawer-opened"):e.classList.remove("info-drawer-opened"))});for(let r of document.querySelectorAll(".js-close-learning-tree-info"))r.addEventListener("click",()=>{n.hide()})}return{init:t}}()};ql.list=function(){function t(){document.querySelectorAll(".js-list-item").forEach(r=>{$expandToggle=r.querySelector(".js-list-item-expand"),$expandToggle.addEventListener("click",e,!1)})}function e(n){$listItem=this.closest(".js-list-item"),$listItemDetails=$listItem.querySelector(".js-list-item-details"),$listItem.classList.toggle("is-expanded");let r=this.offsetHeight+$listItemDetails.offsetHeight;$listItem.style.height=`${r}px`}return{init:t}}();ql.MaterialDialog=function(t,e){this.dialog=t,this.dismissers=$(this.dialog).find("[data-dismiss]"),this.isOpen=e||!1,this.listen(),this.upgrade(),this.render()};ql.MaterialDialog.prototype.upgrade=function(){$(this.dialog).addClass("is-upgraded")};ql.MaterialDialog.prototype.listen=function(){for(var t=0;t<this.dismissers.length;t++)this.dismissers[t].addEventListener("click",this.close.bind(this))};ql.MaterialDialog.prototype.close=function(){this.isOpen=!1,this.render()};ql.MaterialDialog.prototype.open=function(){this.isOpen=!0,this.render()};ql.MaterialDialog.prototype.render=function(){this.isOpen?$(this.dialog).addClass("is-open"):$(this.dialog).removeClass("is-open")};ql.MaterialInput=function(t){this.input=t,this.wrapper=this.input.parentElement.parentElement,this.isFilled=!!this.input.value,this.isValid=!0,this.listen(),this.upgrade()};ql.MaterialInput.prototype.listen=function(){this.input.addEventListener("input",this.setAndRender.bind(this)),this.input.addEventListener("blur",this.setAndRender.bind(this))};ql.MaterialInput.prototype.upgrade=function(){$(this.input).addClass("is-upgraded")};ql.MaterialInput.prototype.setAndRender=function(){this.setAttributes(),this.isFilled?$(this.input).addClass("is-filled"):$(this.input).removeClass("is-filled"),this.isValid?$(this.wrapper).removeClass("has-error"):$(this.wrapper).addClass("has-error")};ql.MaterialInput.prototype.setAttributes=function(){this.setIsFilled(),this.setIsValid()};ql.MaterialInput.prototype.setIsFilled=function(){this.isFilled=!!this.input.value};ql.MaterialInput.prototype.setIsValid=function(){this.isValid=this.input.validity.valid};ql.initMaterialInputs=function(t){if(t=t||[],t.length)var e=t.find(".md-input__input");else var e=document.getElementsByClassName("md-input__input");for(var n=0;n<e.length;n++)$(e[n]).hasClass("is-upgraded")||new ql.MaterialInput(e[n])};var tl=`:root {
  --game-color: #E52592;
  --classroom-color: #01877E;
  --external-course-color: #D56E0C;
  --certification-color: #C5221F;
}

abbr[title],
abbr[data-original-title] {
  border-bottom: none !important;
}

label abbr[title] {
  color: var(--primary-text-on-surface-color);
}

hr {
  border: 0;
  border-top: 1px solid var(--hairline-color);
  display: block;
  height: 1px;
  margin: 24px 0;
  padding: 0;
}

mark {
  background-color: #F9AB00;
  border-radius: 2px;
  color: inherit;
  padding: 2px 0px;
}

p, li {
  font: var(--md-sys-typescale-body-large);
}

._small-label_1gdx7_37,
._label--small_1gdx7_38 {
  font: var(--md-sys-typescale-body-medium);
  text-decoration: none;
}

strong {
  font-weight: 700;
}

._mdl-typography--small-title_1gdx7_47 {
  color: #202124;
  font-size: 15px;
  font-weight: 400;
}

._text--blue_1gdx7_53 {
  color: var(--primary-text-on-surface-color);
}

._text--center_1gdx7_57 {
  text-align: center;
}

._text--capitalize_1gdx7_61 {
  text-transform: capitalize;
}

._text--code_1gdx7_65 {
  font-family: "Roboto Mono", monospace;
}

._text--copy_1gdx7_69 {
  font-family: var(--md-ref-typeface-plain);
}

._text--error_1gdx7_73 {
  color: var(--warn-color);
}

._text--free_1gdx7_77 {
  color: var(--success-color);
  font-weight: 700;
  text-transform: uppercase;
}

._text--gray_1gdx7_83 {
  color: rgba(0, 0, 0, 0.54);
}

._text--light_1gdx7_87 {
  color: var(--light-text-on-surface-color) !important;
}

._text--right_1gdx7_91 {
  text-align: right;
}

._text--sign_1gdx7_95 {
  font-family: "Oswald", sans-serif;
}

._text--small_1gdx7_99 {
  font-size: 14px !important;
}

._text--large_1gdx7_103 {
  font-size: 20px !important;
}

._text--success_1gdx7_107 {
  color: var(--success-color) !important;
}

._text--yellow_1gdx7_111 {
  color: #F9AB00;
}

._text--red_1gdx7_115 {
  color: #D93025;
}

._text--green_1gdx7_119 {
  color: #34A853;
}

u {
  text-decoration: none;
}

._material-icons_1gdx7_127 {
  font-family: "Material Icons";
  font-weight: normal;
  font-style: normal;
  font-size: 24px; /* Preferred icon size */
  display: inline-block;
  line-height: 1;
  text-transform: none;
  letter-spacing: normal;
  word-wrap: normal;
  white-space: nowrap;
  direction: ltr;
  /* Support for all WebKit browsers. */
  -webkit-font-smoothing: antialiased;
  /* Support for Safari and Chrome. */
  text-rendering: optimizeLegibility;
  /* Support for Firefox. */
  -moz-osx-font-smoothing: grayscale;
  /* Support for IE. */
  font-feature-settings: "liga";
}

._ellipsis_1gdx7_149 {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

._text--rtl_1gdx7_155 {
  direction: rtl;
}

._body-wrapper_1gdx7_159 {
  max-width: 800px;
}

._text--button_1gdx7_163 {
  font: var(--md-sys-typescale-label-large);
}`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(tl));var tn={mobile:"(max-width: 600px)",tablet:"(max-width: 965px)",smallMonitor:"(max-width: 1263px)",largeMonitor:"(min-width: 1264px)",smallLabel:"_small-label_1gdx7_37",labelSmall:"_label--small_1gdx7_38",mdlTypographySmallTitle:"_mdl-typography--small-title_1gdx7_47",textBlue:"_text--blue_1gdx7_53",textCenter:"_text--center_1gdx7_57",textCapitalize:"_text--capitalize_1gdx7_61",textCode:"_text--code_1gdx7_65",textCopy:"_text--copy_1gdx7_69",textError:"_text--error_1gdx7_73",textFree:"_text--free_1gdx7_77",textGray:"_text--gray_1gdx7_83",textLight:"_text--light_1gdx7_87",textRight:"_text--right_1gdx7_91",textSign:"_text--sign_1gdx7_95",textSmall:"_text--small_1gdx7_99",textLarge:"_text--large_1gdx7_103",textSuccess:"_text--success_1gdx7_107",textYellow:"_text--yellow_1gdx7_111",textRed:"_text--red_1gdx7_115",textGreen:"_text--green_1gdx7_119",materialIcons:"_material-icons_1gdx7_127",ellipsis:"_ellipsis_1gdx7_149",textRtl:"_text--rtl_1gdx7_155",bodyWrapper:"_body-wrapper_1gdx7_159",textButton:"_text--button_1gdx7_163"};ql.media={mobile:window.matchMedia(tn.mobile),tablet:window.matchMedia(tn.tablet),smallMonitor:window.matchMedia(tn.smallMonitor),largeMonitor:window.matchMedia(tn.largeMonitor)};retrieve_selected_emails=function(t){if($(t)[0].value)return;let e="";$(".selectable:checked").each((n,r)=>{e=e.concat("<input name='selected_emails[]' value="+r.value+" hidden='True'></input>")}),t&&($(e).insertBefore($(t)[0]),$(t)[0].remove())};ql.modals=function(){function t(){$(".modal[data-show]").modal("show"),$(".modal[data-modal-shown-path]").on("show.bs.modal",function(){$.get(this.dataset.modalShownPath)}).modal("show"),document.addEventListener("openModal",e)}function e(n){if(modal=document.getElementById(n.detail.modal),!modal)throw new Error(`Modal with id ${n.detail.modal} not found.`);typeof modal.open=="function"?modal.open():$(modal).modal("show")}return{init:t}}();ql.activityReportModal=function(){function t(e){let n=e.split("_")[0];$("#activity_report_date_range_picker").flatpickr({mode:"range",locale:n,onChange:function(r){if(r.length===2){let s=this.formatDate(r[0],"Y-m-d"),o=this.formatDate(r[1],"Y-m-d");$("#activity_report_date_range").val(`${s}_${o}`)}}})}return{init:t}}();initCheckboxOpenModal=function(){$(".js-enable-checkbox-open-modal").on("click",function(t){if($(t.currentTarget).find('input[type="checkbox"]').attr("newCheck")){$(t.currentTarget).find('input[type="checkbox"]').attr("checked")?$(t.currentTarget).find('input[type="checkbox"]').removeAttr("checked"):$(t.currentTarget).find('input[type="checkbox"]').attr("checked","true");return}if($(t.currentTarget).find('input[type="checkbox"]').attr("checked")){let e=$(t.currentTarget).find('input[type="checkbox"]').prop("id"),n=document.getElementById("deactivate-modal"),r=n.getElementsByClassName("js-enable-checkbox-open-modal-submit")[0];$(t.currentTarget).attr("on","true"),r.setAttribute("checkboxId",e),n.open()}else $(t.currentTarget).find('input[type="checkbox"]')&&($(t.currentTarget).find('input[type="checkbox"]').attr("newCheck","true"),$(t.currentTarget).find('input[type="checkbox"]').attr("checked","true"))}),$(".js-enable-checkbox-open-modal-submit").on("click",function(t){let e=$(t.currentTarget).attr("checkboxId");document.getElementById(e).setAttribute("newCheck","true"),document.getElementById("deactivate-modal").close(),document.getElementById(e).click()})};ql.myAccount={validateInputField:function(t,e,n,r){t.validity.valid?e.style.display="none":(e.textContent=t.validationMessage,e.style.display="block",n.disabled=!1,r.preventDefault())},validateChangeEmail:function(t){let e=document.querySelector("#user_email"),n=document.querySelector("#change-email-current-password"),r=document.querySelector("#change-email-new-email-error"),s=document.querySelector("#change-email-current-password-error"),o=t.target.querySelector(".button"),u=e.validity.valid&&n.validity.valid;return o.disabled=!0,this.validateInputField(e,r,o,t),this.validateInputField(n,s,o,t),u},validateChangePassword:function(t){let e=document.querySelector("#change-password-current-password"),n=document.querySelector("#user_password"),r=document.querySelector("#user_password_confirmation"),s=document.querySelector("#change-password-current-password-error"),o=document.querySelector("#change-password-new-password-error"),u=document.querySelector("#change-password-confirm-password-error"),l=t.target.querySelector(".button"),a=e.validity.valid&&n.validity.valid&&r.validity.valid;return l.disabled=!0,this.validateInputField(e,s,l,t),this.validateInputField(n,o,l,t),this.validateInputField(r,u,l,t),a}};ql.navPanel=function(){let t;function e(){t=document.querySelector(".js-nav-panel"),document.querySelectorAll(".js-nav-toggle").forEach(s=>s.addEventListener("click",n))}function n(r){r.preventDefault(),t.classList.toggle("is-open"),ql.track("Side navigation toggled",{category:"Navigation"})}return{init:e}}();ql.navigation=function(){let t;function e(){t=document.querySelectorAll(".js-navigation-button"),t.forEach(r=>{r.addEventListener("click",n,!1)})}function n(r){ql.track("Navigation link clicked",{category:"Navigation",label:this.title})}return{init:e}}();ql.initNewLabWindowListener=function(){$(window).resize(function(){ql.setHorizontal()})};ql.setHorizontal=function(){$(window).width()<600?($(".md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").removeClass("permissions-select__container--horizontal"),$(".js-labs-resources").removeClass("labs__resources--horizontal")):($(".md-input").addClass("md-input--horizontal"),$(".js-student-resources .md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").addClass("permissions-select__container--horizontal"),$(".js-labs-resources").addClass("labs__resources--horizontal"))};ql.initNewStudentResourceListener=function(){$(document).on("nested:fieldAdded",function(t){for(var e=t.field.find(".md-input__input"),n=0;n<e.length;n++)new ql.MaterialInput(e[n])})};ql.initInstructionRemovedListener=function(){$(document).on("nested:fieldRemoved",function(t){t.field.next(".js-add-instruction").click()})};ql.initNewLabLocale=function(){ql.initNewLabLocaleButtonListener(),ql.initNewLabLocaleSubmitListener()};ql.initNewLabLocaleButtonListener=function(){$(".js-new-lab-locale-button").on("ajax:success",function(t,e,n,r){$(".js-new-lab-locale").html(r.responseText),ql.initMaterialInputs($(".js-new-lab-locale")),ql.newLabLocaleDialog=new ql.MaterialDialog($(".js-dialog"),!0)})};ql.initNewLabLocaleSubmitListener=function(){$(document).on("ajax:success","form",function(t,e,n,r){ql.newLabLocaleDialog.close(),$(".js-lab-locales-table").find(".flex-table__row:nth-child(1)").after(r.responseText),$(".js-lab-locales-table").find(".flex-table__row:nth-child(2)").addClass("is-new")}).on("ajax:error","form",function(t,e,n,r){console.log("aww")})};ql.organizations=(()=>{let t,e;function n(){t=document.querySelector(".metadata-pairs"),e=t.firstElementChild.cloneNode(!0),document.querySelector(".js-add-item").addEventListener("click",r)}function r(){let o=e.cloneNode(!0),u=new Date().getTime();o.id=`metadata-pair-${u}`,o.children[0].firstElementChild.value="",o.children[0].firstElementChild.id=`metadata-array-key-${u}`,o.children[0].firstElementChild.setAttribute("aria-label",`metadata-array-key-${u}`),o.children[1].firstElementChild.value="",o.children[1].firstElementChild.id=`metadata-array-value-${u}`,o.children[1].firstElementChild.setAttribute("aria-label",`metadata-array-value-${u}`),o.children[2].firstElementChild.setAttribute("onclick",`ql.organizations.removePair('${o.id}')`),t.appendChild(o)}function s(o){let u=document.getElementById(o);u.parentNode.removeChild(u)}return{init:n,removePair:s}})();ql.pagination=function(){let t="";function e(){n(),r()}function n(){t=document.querySelectorAll(".js-pagination select")}function r(){t.forEach(o=>{o.addEventListener("change",s)})}function s(o){if(o.preventDefault(),this.value&&"URLSearchParams"in window){let u=new URLSearchParams(window.location.search);u.set(this.name,this.value),window.location.search=u.toString()}}return{init:e}}();var nl=function(){$(".js-purchase-option").first().prop("checked",!0)},il=function(){$(".js-purchase-option").change(function(){$(".js-purchase-option").siblings(".js-purchase-option-details").removeClass("is-selected"),$(this).siblings(".js-purchase-option-details").addClass("is-selected"),Un(),$(this).hasClass("js-other-credit")||$(".js-other-credit").prop("disabled",!0)})},rl=function(){$(".js-other-option").change(function(){$(".js-other-credit").prop("disabled",!1).focus()})},sl=function(){$(".js-other-credit").on("keyup mouseup change",function(){$(".js-other-option").val($(this).val()),Un()})};initCreditsQuantityInputListener=function(){$(".js-credits-quantity-input").on("keyup mouseup change",function(){var t=$(".js-payments-paths").data("calculate-total-path"),e=$(this).val().trim(),n=$.get(t,{quantity:e,product_code:"credit",round:!0},null,"json");n.success(function(r){$(".js-payment-total").html(r.price),$(".js-payment-total").data("price_in_cents",r.price_in_cents),r.discount?$(".js-payment-discount").html(r.discount):$(".js-payment-discount").html("")})})};var ol=function(){$(".js-add-promo-code-button").click(function(t){t.preventDefault();var e=$(".js-purchase-option:checked"),n=e.val().trim(),r=e.data("product-code"),s=$(".js-promo-code").val().trim(),o=$(".js-payments-paths").data("validate-promo-code-path");if(s==null||s==") && (quantity == null || quantity == ")return!1;var u=$.get(o,{uuid:s,credits:n,product_code:r},null,"html");u.success(function(l){$(".js-payment-details").html(l),$("#payment_details_modal").modal("show"),ys(),Un()})})},ys=function(){$("#redeem_now").click(function(){redeemNowUrl=$(".js-payments-paths").data("redeem-now-path"),promoCode=$(".js-promo-code").val().trim(),$.post(redeemNowUrl,{uuid:promoCode}).fail(function(t){alert("Redeem call failed: "+t.responseText)}).done(function(t){window.location.href=t})})},Un=function(){var t=$(".js-purchase-option:checked"),e=t.val().trim(),n=t.data("product-code"),r=$(".js-promo-code").val().trim(),s=t.data("course-id"),o=$(".js-payments-paths").data("calculate-total-path"),u=$.get(o,{quantity:e,product_code:n,promo_code:r,course_id:s},null,"json");u.success(function(l){l.full_price.subtotal?($(".js-payment-sub-total").html(l.full_price.subtotal),$(".js-payment-tax").html(l.full_price.tax),$(".js-payment-total").html(l.full_price.total),$(".js-payment-total").data("price_in_cents",l.price_in_cents)):($(".js-payment-total").html(l.price),$(".js-payment-total").data("price_in_cents",l.price_in_cents))})};initStripeButton=function(){if($(".js-stripe-button").length){var t=$(".js-stripe-button").data("currency"),e=t==="usd"||t==="cny",n=StripeCheckout.configure({key:$(".js-stripe-button").data("key"),currency:$(".js-stripe-button").data("currency"),alipay:e,locale:"auto",token:function(o){var u=$(".js-purchase-option:checked"),l=u.val().trim(),a=u.data("product-code"),c=$(".js-promo-code").val().trim(),d=$(".js-stripe-button").data("process-path"),f=u.data("courseId"),m=$.post(d,{stripeEmail:o.email,stripeToken:o.id,quantity:l,promo_code:c,product_code:a,course_id:f,referrer:$(".js-stripe-button").data("referrer").trim()});m.fail(function(g){console.log("Stripe call failed: "+g)}).done(function(g){window.location.href=g})}});$(".js-stripe-button").on("click",function(o){o.preventDefault();var u=$(".js-purchase-option:checked"),l=u.val().trim(),a=u.data("product-code"),c=$(".js-promo-code").val().trim(),d=u.data("course-id"),f=$(".js-payments-paths").data("validate-path");$.post(f,{quantity:l,promo_code:c,product_code:a,course_id:d}).fail(function(m){$(".js-payment-details").html(m.responseText),$("#payment_details_modal").modal("show"),ys()}).done(function(m){var g=$(".js-payments-paths").data("calculate-total-path");$.get(g,{quantity:l,promo_code:c,product_code:a,course_id:d},null,"json").success(function(b){console.log(al(l,a)),typeof analytics<"u"&&(analytics.track("payment",{product_code:a,promo_code:c,currency:t,quantity:l,amount:b.price_in_cents}),console.log("payment event sent")),n.open({description:b.title,amount:b.price_in_cents})})})}),$(window).on("popstate",function(){n.close()})}var r=$(".js-change-credit-card");if(r.length){var s=StripeCheckout.configure({key:r.data("key"),locale:"auto",token:function(o){var u=r.data("process-path"),l=$.post(u,{stripeToken:o.id,referrer:r.data("referrer").trim()});l.fail(function(a){console.log("Stripe call failed: "+a)}).done(function(a){window.location.href=a})}});r.on("click",function(o){o.preventDefault(),s.open({description:"Update Card Details",panelLabel:"Update Card Details"}),$(window).on("popstate",function(){s.close()})})}};var al=function(t,e){return t==1?t+" "+e:t+" "+e+"s"};initPayments=function(){nl(),Un(),il(),rl(),sl(),ol(),initStripeButton()};ql.promptResponseForm=function(){function t(e,n){let r=document.getElementById(`prompt-${e}-tab-group`);if(r){let s=r.shadowRoot.querySelectorAll("ql-tab"),o=r.shadowRoot.querySelectorAll("slot"),u=document.getElementById(`prompt-${e}-response-type-input`);if(s.length!=o.length||u===null)return;s.forEach((l,a)=>{l.addEventListener("click",c=>{u.value=n[a],o.forEach((d,f)=>{let m=d.assignedElements()[0].querySelector(`.prompt-${e}-input`);a!=f?(m.value="",m.required=!1):m.required=!0})})})}}return{initTab:t}}();ql.peerReviewSubmission=function(){function t(r,s){let o=document.getElementById(r),u=Array.from(document.getElementsByClassName(s));o&&(u.forEach(l=>{l.addEventListener("chosenOption",a=>{e(o,u)}),l.addEventListener("changedResponse",a=>{e(o,u)})}),o.addEventListener("click",l=>{o.disabled=!0,u.forEach(a=>a.submit())}))}function e(r,s){r.disabled=!n(s)}function n(r){return r.every(s=>s.isReadyForSubmission())}return{init:t}}();ql.drawer=function(){function t(e){let n=document.getElementById(e);n&&n.toggle()}return{toggle:t}}();ql.Permissions=function(t){var e=this;this.button=t,this.menu=new ql.PermissionsMenu($('ul[for="'+this.button.attr("id")+'"]')),this.overlay=$('aside[for="'+this.button.attr("id")+'"]'),this.permissions=this.button.data("permissions"),this.menu.setPermissions=function(n){e.setPermissions(n)},this.button.click(function(n){e.menu.isVisible=!0,e.render()}),this.overlay.click(function(n){e.menu.isVisible=!1,e.render()}),this.render()};ql.Permissions.prototype.setPermissions=function(t){var e=this.permissions.indexOf(t);e>=0?this.permissions.splice(e,1):this.permissions.push(t),$(".js-permissions-input").val(this.permissions.join(`\r
`)),this.render()};ql.Permissions.prototype.render=function(){for(var t=[],e=0;e<this.permissions.length;e++)t.push("<span>"+this.permissions[e]+"</span>");this.button.find("#permissions-display").html(t),this.menu.render()};ql.PermissionsMenu=function(t){var e=this;this.element=t,this.isVisible=!1,this.setPermissions="",this.categories=[];for(var n=this.element.children("li"),r=0;r<n.length;r++)this.categories.push(new ql.PermissionsMenuCategory($(n[r]))),this.categories[r].setPermissions=function(s){e.setPermissions(s)}};ql.PermissionsMenu.prototype.render=function(){this.isVisible?this.element.addClass("is-visible"):this.element.removeClass("is-visible");for(var t=0;t<this.categories.length;t++)this.categories[t].render()};ql.PermissionsMenuCategory=function(t){var e=this;this.element=t,this.isSelected=!1,this.setPermissions="",this.items=[];for(var n=this.element.find("[data-permission]"),r=0;r<n.length;r++)this.items.push(new ql.PermissionsMenuItem($(n[r]))),this.items[r].setPermissions=function(s){e.setPermissions(s)}};ql.PermissionsMenuCategory.prototype.setSelected=function(){this.isSelected=!1;for(var t=0;t<this.items.length;t++)this.items[t].isSelected&&(this.isSelected=!0)};ql.PermissionsMenuCategory.prototype.render=function(){this.setSelected(),this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected");for(var t=0;t<this.items.length;t++)this.items[t].render()};ql.PermissionsMenuItem=function(t){var e=this;this.element=t,this.isSelected=this.element[0].hasAttribute("data-selected"),this.permission=t.data("permission"),this.setPermissions="",this.element.click(function(n){e.isSelected=!e.isSelected,e.setPermissions(e.permission)})};ql.PermissionsMenuItem.prototype.render=function(){this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected")};ql.initPublishModal=function(){$("#publish_modal").on("show.bs.modal",function(){ql.updatePublishModal(),setInterval(ql.updatePublishModal,5*1e3)}).modal()};ql.updatePublishModal=function(){console.log("updating publish modal");let t=$(".js-status").data("lab-id"),e=$(".js-status").data("url");$.get(e).done(function(r){r.status=="done"?window.location.href="/labs/"+t+"/snapshots/new":($("#snapshotJobModal .status").html("["+r.id+"] "+r.status),r.message!=null&&$("#snapshotJobModal .message").html(r.message))})};ql.initClassroomSnapshotModal=function(){let t=document.getElementById("snapshotJobModal");t&&t.dataset.show==="true"&&(document.getElementById("show_classroom_snapshot_modal").click(),setInterval(ll,7*1e3))};function ll(){let e=document.getElementById("snapshotJobModal").dataset.classroomTemplateId;$.get("/authoring/classroom_templates/"+e+"/publish/status.json").done(function(r){r.status=="done"?window.location.href="/authoring/classroom_templates/"+e+"/snapshots/new":($("#snapshotJobModal .status").html("["+e+"] "+r.status),r.message!=null&&$("#snapshotJobModal .message").html(r.message))})}ql.quest={analytics:function(){function t(){let e={questName:gon.learning_path_name,label:gon.learning_path_name,category:"Quest",deployment:gon.deployment},n=document.querySelectorAll(".js-quest-enroll-button"),r=document.querySelectorAll(".js-quest-unenroll-button");document.querySelectorAll(".js-catalog-item-title a").forEach(o=>o.addEventListener("click",u=>{ql.track("clicked_quest_activity_link",{label:u.target.innerText,type:u.target.dataset.type})},!1));for(let o of n)o.addEventListener("click",()=>{ql.track("clicked_quest_enroll_button",e)});for(let o of r)r.addEventListener("click",()=>{ql.track("clicked_quest_unenroll_button",e)})}return{init:t}}()};initSearchAutocomplete=function(){jQuery.ui.autocomplete.prototype._resizeMenu=function(){var t=this.menu.element;t.outerWidth(this.element.outerWidth())},$(".js-autocomplete").length>0&&$.getJSON("/searches/autocomplete.json",function(t){window.SEARCH_AUTOCOMPLETE_DISABLED||(t=t.map($.trim).sort(function(e,n){return e.localeCompare(n)}),$(".js-autocomplete").autocomplete({source:t,select:function(e,n){$(this).val(n.item.value),$(this).parents("form").submit()}}))})};disableSearchAutocomplete=function(){$(".js-autocomplete").autocomplete("instance")&&$(".js-autocomplete").autocomplete("disable")};initSearch=function(){initSearchAutocomplete(),$searchInput=document.getElementById("keywords"),$searchInput&&$searchInput.addEventListener("keydown",t=>{t.isComposing||t.keyCode!=13||ql.track("searched",{label:t.target.value})})};ql.selectAll=function(){let t,e;function n(s,o){t=document.querySelector(s),e=document.querySelectorAll(o),t&&t.addEventListener("click",r,!1)}function r(s){e.forEach(o=>{o.checked=t.checked})}return{init:n}}();ql.snippetListLocaleEdit=(()=>{let t;function e(){document.querySelector(".js-item-count").innerText=t}function n(){for(let[o,u]of itemLists.entries()){let l=document.createElement("li"),a=document.createElement("textarea"),c=new Date().getTime();a.id=`snippet_snippet_list_locales_attributes_${o}_snippet_list_locale_items_attributes_${c}_snippet_text`,a.name=`snippet[snippet_list_locales_attributes][${o}][snippet_list_locale_items_attributes][${c}][snippet_text]`,a.classList.add("text","optional"),l.appendChild(a),u.appendChild(l)}t++,e()}function r(){if(!(t<=0)){for(let o of itemLists){let u=o.querySelectorAll("li:not(.destroyed)"),l=u[u.length-1];if(l){let a=l.querySelector(".input-destroy");a?(a.value="1",l.style.display="none",l.classList.add("destroyed")):o.removeChild(l)}}t--,e()}}function s(){itemLists=Array.from(document.querySelectorAll(".list-locale-items")),t=itemLists[0].querySelectorAll("li").length,document.querySelector(".js-add-item").addEventListener("click",n),document.querySelector(".js-remove-item").addEventListener("click",r)}return{init:s}})();ql.sortable=(()=>{function t(e,n=null){$(".js-sortable").sortable({placeholder:"sortable-placeholder",tolerance:"pointer",update:()=>{let r=Array.from(document.querySelectorAll(e));for(let[s,o]of r.entries())o.value=s;n&&n()}})}return{init:t}})();ql.studentsAssessmentReport=function(){function t(e){let n=document.getElementById("students-assessment-report-download-button");App.cable.subscriptions.create({channel:"StudentsAssessmentChannel",classroomId:e},{initialized(){let r=document.getElementById("students-assessment-report-generate-button");r&&(this.generate=this.generate.bind(this),r.addEventListener("click",this.generate,!1))},generate(){n.loading=!0,this.perform("start_job"),document.querySelector("#students-assessment-report-modal").open()},received(r){n.href=r,n.loading=!1}})}return{init:t}}();ql.surveys=function(){return{pageView(){hallofmirrors.helpService.triggerSurvey("5Q1v5DnZQ0jsbJdbum90V2bxk8xZ")},signUpIntent(){hallofmirrors.helpService.triggerSurvey("dQpbQNNCR0jsbJdbum90SpeULku9")}}}();ql.aiFeaturesSurvey=function(){let t={CANCEL:"feedbackCancelled",SUBMIT:"feedbackSubmitted"};function e(){let n=document.querySelector("ql-ai-feedback"),r=s=>{switch(s.type){case t.CANCEL:document.querySelector("#skills_survey_modal").close();break;case t.SUBMIT:window.location.reload();break}};n&&(n.addEventListener(t.CANCEL,r),n.addEventListener(t.SUBMIT,r))}return{init:e}}();initFirstTabActive=function(){$(".js-tab").first().addClass("is-active"),$(".js-tab-content").first().addClass("is-active")};initTabListener=function(){$(".js-tab").click(function(){var t=$(this).data("tab");$(".js-tab").removeClass("is-active"),$(this).addClass("is-active"),$(".js-tab-content").removeClass("is-active"),$(".js-tab-content[data-tab='"+t+"']").addClass("is-active")})};initTabs=function(){initTabListener()};ql.toggleButtons=function(){let t="is-toggled",e="local-storage-id";function r(){document.querySelectorAll(".toggle-button").forEach(f=>{f.hasAttribute("for")?(f.addEventListener("click",o,!1),f.addEventListener("keyup",s,!1)):f.disabled=!0})}function s(d){d.keyCode===13&&o.bind(this)()}function o(){this.classList.contains(t)?l(this):u(this)}function u(d){c(d,"on"),d.classList.add(t);let f=a(d);f&&f.classList.add(t)}function l(d){c(d,"off"),d.classList.remove(t);let f=a(d);f&&f.classList.remove(t)}function a(d){return document.getElementById(d.getAttribute("for"))}function c(d,f){d.hasAttribute(e)&&(document.cookie=`toggleButton.${d.getAttribute(e)}= ${f}`)}return{init:r}}();initTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};window.trans={};initLabTranslations=function(t){trans=t};initPaymentTranslations=function(t){trans=t};ql.trixEditor=function(){return{init(t){document.querySelectorAll(".trix-input--dialog").forEach(e=>e.setAttribute("placeholder",t)),document.addEventListener("trix-attachment-add",function(e){e.attachment.remove()})}}}();ql.video={survey:function(){function t(){let e=document.querySelector('meta[name="survey-video-ids"]'),n=e?e.content.split(",").map(s=>s.trim()):[],r=document.querySelector("ql-youtube-video");if(r&&n.includes(r.videoId)){let s=!1;r.addEventListener("youtube-state-changed",o=>{o.detail===YT.PlayerState.PLAYING&&(s||(hallofmirrors.helpService.triggerSurvey("Yw9u7T4MF0jsbJdbum90XNtmFrcH",!1,void 0,{videoId:r.videoId}),s=!0))})}}return{init:t}}()};})();
/*! Bundled license information:

clipboard/dist/clipboard.js:
  (*!
   * clipboard.js v2.0.11
   * https://clipboardjs.com/
   *
   * Licensed MIT  Zeno Rocha
   *)
*/
