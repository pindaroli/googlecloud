(function(_ds){var window=this;var Opa=new Map([["https://cloud.google.com/contact",2],["https://console.cloud.google.com/freetrial",1],["https://console.cloud.google.com",3]]),Ppa=["//console.cloud.google.com/freetrial","//console.cloud.google.com/signup"],Qpa=function(a){a.g||(a.g=!0,a.eventHandler.listen(document,"click",b=>{(b=g1(a,b.target,"click"))&&h1(a,b)}),a.eventHandler.listen(document,"contextmenu",b=>{(b=g1(a,b.target,"contextmenu"))&&h1(a,b)}))},g1=function(a,b,c){if(b&&b instanceof HTMLAnchorElement){if("contextmenu"!==
c){var d=_ds.xl(new _ds.tl(b.href),null).toString();(d=Opa.get(d.endsWith("/")?d.slice(0,-1):d))&&_ds.VA(a.cloudtrack,String(d))}if(Ppa.some(e=>b.href.includes(e)))return b}return b&&b instanceof Node&&b.parentElement?g1(a,b.parentElement,c):null},h1=function(a,b){const c=_ds.$s("utm_source"),d=_ds.$s("utm_campaign"),e=_ds.$s("utm_medium"),f=_ds.Ms(window.location.href);var g;var h=null!=(g=_ds.Js.get("FACET_EXPERIMENT_IDS_DEVSITE"))?g:"";var k;g=null!=(k=_ds.Js.get("FACET_EXPERIMENT_IDS_EXPOSED_BOQ"))?
k:"";h=_ds.Ks(h,g);h=h.length?`[${h.join(", ")}]`:"";k=new URL(_ds.Qs(b.href));c&&k.searchParams.set("facet_utm_source",c);d&&k.searchParams.set("facet_utm_campaign",d);e&&k.searchParams.set("facet_utm_medium",e);f&&k.searchParams.set("facet_url",f);h&&k.searchParams.set("facet_id_list",h);_ds.Ce(b,_ds.we(k.toString()).toString());a.cloudtrack.g({type:"facet free trial event",name:f,metadata:{eventDetail:`${c}~~${e}~~${d}`,href:f,activeExperiments:h}})},Rpa=class{constructor({cloudtrack:a}){this.g=
!1;this.cloudtrack=a;this.eventHandler=new _ds.F}install(){Qpa(this)}};var Spa=async function(){return _ds.x((await _ds.t()).getConfig(),17)},Upa=async function(a){var b=Tpa;const c=await Spa();if(c)return(await fetch(`${"https://dlp.googleapis.com/v2/projects/google.com:cloud-web-hats/content:deidentify"}?key=${c}`,{body:JSON.stringify({item:{value:a},deidentifyConfig:{infoTypeTransformations:{transformations:[{primitiveTransformation:{characterMaskConfig:{maskingCharacter:"*"}}}]}},inspectConfig:{minLikelihood:"POSSIBLE",infoTypes:b}}),headers:{"Content-Type":"application/json"},
method:"POST"})).json()};var Vpa=["https://inthecloud.withgoogle.com/startup/dl-cd.html"],Tpa=[{name:"FIRST_NAME"},{name:"LAST_NAME"},{name:"EMAIL_ADDRESS"},{name:"CREDIT_CARD_NUMBER"},{name:"DATE_OF_BIRTH"},{name:"DOMAIN_NAME"},{name:"PHONE_NUMBER"},{name:"URL"},{name:"US_SOCIAL_SECURITY_NUMBER"},{name:"IP_ADDRESS"}],Wpa={KX:"utm_source",cV:"utm_medium",BP:"utm_campaign",gQ:"utm_content",YX:"utm_term"},Xpa=function(a){a.eventHandler.listen(document.body,"devsite-analytics-observation",b=>{b=b.Ha.detail;if("pageScroll"===
b.action||"pageScrollRaw"===b.action)a.cloudtrack.g({type:b.action,name:b.label||""}),_ds.QA(a.cloudtrack,"pageScroll"===b.action?"page_scroll":"page_scroll_raw",{scrollDepth:b.label||""})})},Ypa=function(a){a.eventHandler.listen(document.body,"devsite-analytics-sent-pageview",b=>{const c=b.Ha.detail;if("trackPageview"===b.Ha.detail.event){b=a.cloudtrack;_ds.VA(b);const g={clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight};for(var d of b.m.keys())b.m.set(d,void 0);d=document.querySelectorAll('head meta[name*="track-metadata-page_"]');
for(f of d){var e=f.getAttribute("name");e&&(d=f.getAttribute("content"),e=e.replace("track-metadata-page_",""),b.m.set(e,d||""))}var f=Object.assign({},g,Object.fromEntries(b.m));_ds.OA.push(Object.assign({},c,{event:"pageMetadata",metadataObject:f,originalUrl:b.v}));_ds.QA(a.cloudtrack,"page_view",{pageName:c.pageName,hostingPlatform:"devsite"})}})},Zpa=function(a){a.eventHandler.listen(document,"cloud-track-search-focus",()=>{a.cloudtrack.g({type:"search",name:"focus",metadata:{eventDetail:"n/a",
search_suggest:"n/a",search_suggest_url:"n/a",position:"nav"}});_ds.QA(a.cloudtrack,"search_focus")});a.eventHandler.listen(document,"cloud-track-search-input",()=>{a.cloudtrack.g({type:"search",name:"input",metadata:{eventDetail:"n/a",search_suggest:"n/a",search_suggest_url:"n/a",position:"nav"}});_ds.QA(a.cloudtrack,"search_input")});a.eventHandler.listen(document,"cloud-track-search-submit",async b=>{var c=b.Ha.detail.query,d=b.Ha.detail.sN;let e="n/a",f="n/a";b="n/a";let g="submit",h="(unknown)";
if(await DevsiteApp.hasMendelFlagAccess("Cloud","enable_cloud_dlp_service")){const l=[];if(d){var k=d.closest(".devsite-result-item");k instanceof HTMLElement&&(k=k.id,k.includes("partial-query")?h="suggested search":k.includes("other-products")?h="product":k.includes("product")?h="page":k.includes("reference")&&(h="reference"),g+=` - ${h}`);d=d.closest(".devsite-result-item-link");d instanceof HTMLElement&&(k="",k=Array.from(d.children),k=k.length?k.map(m=>m instanceof HTMLElement?m.innerText:"").join(" "):
d.innerText,"suggested search"===h?(d=i1(a,k).then(m=>f=m||"(dlp error)"),l.push(d)):(f=k,b=d.getAttribute("href")||"n/a"))}c&&(c=i1(a,c).then(m=>{e=m||"(dlp error)";e=e.substring(0,100).replace(/([0-9]{5})([0-9]+)/g,"$1[c]")}),l.push(c));await Promise.all(l)}a.cloudtrack.g({type:"search",name:g,metadata:{eventDetail:e,search_suggest:f,search_suggest_url:b,position:"nav"}});_ds.QA(a.cloudtrack,"search_submit",{searchSuggestionType:h,searchQuery:e,searchSuggestion:f,searchSuggestionUrl:b})})},$pa=
function(a){a.eventHandler.listen(document.body,"cloudx-personalization-update",b=>{_ds.SA(a.cloudtrack,{Ca:b.Ha.detail.key,value:b.Ha.detail.value})})},j1=async function(){var a=Array.from(document.querySelectorAll(_ds.UJ())).map(c=>customElements.whenDefined(c.localName));await Promise.all(a);a=aqa();var b=a.medium;if(a.source&&b){b=Vpa.map(c=>`[href*="${c}"]`).join(",");b=document.querySelectorAll(b);for(const c of b)c instanceof HTMLAnchorElement&&bqa(c,a)}},i1=async function(a,b){if(!b.length)return"";
b=await Upa(b).catch(c=>{a.cloudtrack.g({type:"dlp error",name:JSON.stringify(c)});_ds.QA(a.cloudtrack,"error",{errorType:"dlp",errorMessage:JSON.stringify(c)})});return b?b.item.value:(a.cloudtrack.g({type:"dlp error",name:"Unable to call DLP"}),_ds.QA(a.cloudtrack,"error",{errorType:"dlp",errorMessage:"Unable to call DLP"}),null)},aqa=function(){var a=(new URL(window.document.location.href)).searchParams;const b=a.get("utm_source"),c=a.get("utm_medium"),d=a.get("utm_campaign"),e=a.get("utm_content");
a=a.get("utm_term");return{source:b,medium:c,campaign:d,content:e,term:a}},bqa=function(a,b){var c=a.getAttribute("href"),d=b.source,e=b.medium,f=b.campaign,g=b.content;b=b.term;if(c&&d&&e){c=new URL(c);d=[`${"utm_source"}=${d}`,`${"utm_medium"}=${e}`];f&&d.push(`${"utm_campaign"}=${f}`);g&&d.push(`${"utm_content"}=${g}`);b&&d.push(`${"utm_term"}=${b}`);f=Object.values(Wpa);for(const [h,k]of Array.from(c.searchParams))g=k,e=h.replace(";",""),f.includes(e)||(g?d.push(`${e}=${g}`):d.push(e));_ds.Ce(a,
_ds.we(`${c.origin}${c.pathname}?${d.join("&")}`))}},k1=class extends _ds.Zw{constructor(){super(...arguments);this.userCountry="ZZ";this.cloudtrack=new _ds.WA;this.eventHandler=new _ds.F;this.g=new Rpa({cloudtrack:this.cloudtrack})}connectedCallback(){super.connectedCallback();this.cloudtrack.qs();this.g.install();Xpa(this);Ypa(this);Zpa(this);$pa(this);j1();this.eventHandler.listen(document.body,"cloudtrack-decorate-urls",()=>{j1()})}disconnectedCallback(){super.disconnectedCallback();_ds.H(this.cloudtrack.eventHandler);
_ds.H(this.eventHandler)}};_ds.v([_ds.I({type:String}),_ds.w("design:type",Object)],k1.prototype,"userCountry",void 0);try{customElements.define("cloudx-track",k1)}catch(a){console.warn("CloudxTrack",a)};})(_ds_www);
